function cov_26eimolqk5(){var path="C:\\Users\\Dell\\Desktop\\Monica\\models\\users.js";var hash="6ed44edd4e0aedee22cc0366c6448b986ae4d123";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\Monica\\models\\users.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:4,column:15},end:{line:4,column:20}},"4":{start:{line:5,column:18},end:{line:5,column:38}},"5":{start:{line:6,column:31},end:{line:6,column:53}},"6":{start:{line:8,column:22},end:{line:8,column:50}},"7":{start:{line:11,column:17},end:{line:72,column:2}},"8":{start:{line:75,column:0},end:{line:99,column:2}},"9":{start:{line:76,column:4},end:{line:76,column:29}},"10":{start:{line:77,column:15},end:{line:77,column:19}},"11":{start:{line:78,column:4},end:{line:78,column:30}},"12":{start:{line:79,column:4},end:{line:97,column:7}},"13":{start:{line:80,column:8},end:{line:80,column:34}},"14":{start:{line:81,column:8},end:{line:85,column:9}},"15":{start:{line:82,column:12},end:{line:82,column:36}},"16":{start:{line:83,column:12},end:{line:83,column:36}},"17":{start:{line:86,column:8},end:{line:96,column:10}},"18":{start:{line:87,column:12},end:{line:95,column:15}},"19":{start:{line:88,column:16},end:{line:94,column:17}},"20":{start:{line:89,column:20},end:{line:89,column:43}},"21":{start:{line:90,column:20},end:{line:90,column:34}},"22":{start:{line:92,column:20},end:{line:92,column:53}},"23":{start:{line:93,column:20},end:{line:93,column:29}},"24":{start:{line:101,column:0},end:{line:112,column:1}},"25":{start:{line:102,column:15},end:{line:102,column:19}},"26":{start:{line:103,column:17},end:{line:103,column:23}},"27":{start:{line:105,column:16},end:{line:105,column:96}},"28":{start:{line:107,column:4},end:{line:111,column:7}},"29":{start:{line:109,column:8},end:{line:109,column:23}},"30":{start:{line:114,column:0},end:{line:127,column:2}},"31":{start:{line:115,column:15},end:{line:115,column:19}},"32":{start:{line:118,column:4},end:{line:122,column:5}},"33":{start:{line:119,column:8},end:{line:119,column:57}},"34":{start:{line:121,column:7},end:{line:121,column:31}},"35":{start:{line:123,column:4},end:{line:125,column:7}},"36":{start:{line:129,column:0},end:{line:150,column:2}},"37":{start:{line:130,column:15},end:{line:130,column:19}},"38":{start:{line:133,column:4},end:{line:137,column:5}},"39":{start:{line:134,column:8},end:{line:134,column:57}},"40":{start:{line:136,column:7},end:{line:136,column:31}},"41":{start:{line:140,column:4},end:{line:147,column:3}},"42":{start:{line:171,column:0},end:{line:184,column:5}},"43":{start:{line:172,column:13},end:{line:172,column:17}},"44":{start:{line:173,column:15},end:{line:173,column:22}},"45":{start:{line:174,column:14},end:{line:174,column:78}},"46":{start:{line:175,column:4},end:{line:175,column:26}},"47":{start:{line:176,column:4},end:{line:176,column:22}},"48":{start:{line:177,column:4},end:{line:182,column:6}},"49":{start:{line:178,column:8},end:{line:181,column:11}},"50":{start:{line:179,column:12},end:{line:179,column:27}},"51":{start:{line:188,column:4},end:{line:204,column:6}},"52":{start:{line:189,column:19},end:{line:189,column:23}},"53":{start:{line:191,column:14},end:{line:191,column:19}},"54":{start:{line:192,column:8},end:{line:196,column:9}},"55":{start:{line:193,column:12},end:{line:193,column:61}},"56":{start:{line:195,column:11},end:{line:195,column:35}},"57":{start:{line:197,column:8},end:{line:202,column:11}},"58":{start:{line:207,column:4},end:{line:210,column:6}},"59":{start:{line:208,column:19},end:{line:208,column:23}},"60":{start:{line:209,column:8},end:{line:209,column:46}},"61":{start:{line:218,column:15},end:{line:218,column:50}},"62":{start:{line:222,column:0},end:{line:224,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:75,column:39},end:{line:75,column:40}},loc:{start:{line:75,column:66},end:{line:99,column:1}},line:75},"1":{name:"(anonymous_1)",decl:{start:{line:79,column:40},end:{line:79,column:41}},loc:{start:{line:79,column:50},end:{line:97,column:5}},line:79},"2":{name:"(anonymous_2)",decl:{start:{line:86,column:27},end:{line:86,column:28}},loc:{start:{line:86,column:48},end:{line:96,column:9}},line:86},"3":{name:"(anonymous_3)",decl:{start:{line:87,column:52},end:{line:87,column:53}},loc:{start:{line:87,column:66},end:{line:95,column:13}},line:87},"4":{name:"(anonymous_4)",decl:{start:{line:101,column:39},end:{line:101,column:40}},loc:{start:{line:101,column:51},end:{line:112,column:1}},line:101},"5":{name:"(anonymous_5)",decl:{start:{line:107,column:23},end:{line:107,column:24}},loc:{start:{line:107,column:44},end:{line:111,column:5}},line:107},"6":{name:"(anonymous_6)",decl:{start:{line:114,column:33},end:{line:114,column:34}},loc:{start:{line:114,column:50},end:{line:127,column:1}},line:114},"7":{name:"(anonymous_7)",decl:{start:{line:129,column:37},end:{line:129,column:38}},loc:{start:{line:129,column:54},end:{line:150,column:1}},line:129},"8":{name:"(anonymous_8)",decl:{start:{line:171,column:38},end:{line:171,column:39}},loc:{start:{line:171,column:48},end:{line:184,column:5}},line:171},"9":{name:"(anonymous_9)",decl:{start:{line:177,column:28},end:{line:177,column:29}},loc:{start:{line:177,column:32},end:{line:182,column:5}},line:177},"10":{name:"(anonymous_10)",decl:{start:{line:178,column:27},end:{line:178,column:28}},loc:{start:{line:178,column:48},end:{line:181,column:9}},line:178},"11":{name:"(anonymous_11)",decl:{start:{line:188,column:42},end:{line:188,column:43}},loc:{start:{line:188,column:59},end:{line:204,column:5}},line:188},"12":{name:"(anonymous_12)",decl:{start:{line:207,column:37},end:{line:207,column:38}},loc:{start:{line:207,column:57},end:{line:210,column:5}},line:207}},branchMap:{"0":{loc:{start:{line:81,column:8},end:{line:85,column:9}},type:"if",locations:[{start:{line:81,column:8},end:{line:85,column:9}},{start:{line:81,column:8},end:{line:85,column:9}}],line:81},"1":{loc:{start:{line:88,column:16},end:{line:94,column:17}},type:"if",locations:[{start:{line:88,column:16},end:{line:94,column:17}},{start:{line:88,column:16},end:{line:94,column:17}}],line:88}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ed44edd4e0aedee22cc0366c6448b986ae4d123"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_26eimolqk5=function(){return actualCoverage;};return actualCoverage;}cov_26eimolqk5();const mongoose=(cov_26eimolqk5().s[0]++,require("mongoose"));const jwt=(cov_26eimolqk5().s[1]++,require('jsonwebtoken'));const bcrypt=(cov_26eimolqk5().s[2]++,require('bcryptjs'));var password=(cov_26eimolqk5().s[3]++,"abc");const validator=(cov_26eimolqk5().s[4]++,require('validator'));var{images,ImagesSchema}=(cov_26eimolqk5().s[5]++,require("./images.js"));// images model
const defaultModule=(cov_26eimolqk5().s[6]++,require("./../defaultimage"));var UserSchema=(cov_26eimolqk5().s[7]++,new mongoose.Schema({userName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,required:true,trim:true,minlength:1,unique:true,validate:{validator:validator.isEmail,message:'{value} is not a valid email'}},password:{type:String,required:true,trim:true,minlength:4},isPremium:{type:Boolean,default:false},isActive:{type:Boolean,default:false},gender:{type:String,required:true,trim:true,minlength:1,maxlength:1,enum:["M","F"]},birthDate:{type:Date,required:true,min:'1920-12-31',max:'2005-12-31'},resetToken:{type:String,default:undefined},image:{type:ImagesSchema,required:true,default:defaultModule.defaultImage._doc}}));cov_26eimolqk5().s[8]++;UserSchema.statics.findByCredentials=function(email,password){cov_26eimolqk5().f[0]++;cov_26eimolqk5().s[9]++;console.log("2elgedeed");var User=(cov_26eimolqk5().s[10]++,this);cov_26eimolqk5().s[11]++;console.log("2elgedeed2");cov_26eimolqk5().s[12]++;return User.findOne({email}).then(user=>{cov_26eimolqk5().f[1]++;cov_26eimolqk5().s[13]++;console.log("2elgedeed3");cov_26eimolqk5().s[14]++;if(!user){cov_26eimolqk5().b[0][0]++;cov_26eimolqk5().s[15]++;console.log("not user");cov_26eimolqk5().s[16]++;return Promise.reject();}else{cov_26eimolqk5().b[0][1]++;}cov_26eimolqk5().s[17]++;return new Promise((resolve,reject)=>{cov_26eimolqk5().f[2]++;cov_26eimolqk5().s[18]++;bcrypt.compare(password,user.password,(err,res)=>{cov_26eimolqk5().f[3]++;cov_26eimolqk5().s[19]++;if(res){cov_26eimolqk5().b[1][0]++;cov_26eimolqk5().s[20]++;console.log("feh3ade");cov_26eimolqk5().s[21]++;resolve(user);}else{cov_26eimolqk5().b[1][1]++;cov_26eimolqk5().s[22]++;console.log("Passwordincorrect");cov_26eimolqk5().s[23]++;reject();}});});});};cov_26eimolqk5().s[24]++;UserSchema.methods.generateAuthToken=function(){cov_26eimolqk5().f[4]++;var user=(cov_26eimolqk5().s[25]++,this);var access=(cov_26eimolqk5().s[26]++,'auth');//console.log('hena');
var token=(cov_26eimolqk5().s[27]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser').toString());//console.log('henahena');
cov_26eimolqk5().s[28]++;return new Promise((resolve,reject)=>{cov_26eimolqk5().f[5]++;cov_26eimolqk5().s[29]++;//console.log('henahenahena');
resolve(token);});};cov_26eimolqk5().s[30]++;UserSchema.statics.findByToken=function(token){cov_26eimolqk5().f[6]++;var User=(cov_26eimolqk5().s[31]++,this);var decoded;cov_26eimolqk5().s[32]++;try{cov_26eimolqk5().s[33]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_26eimolqk5().s[34]++;return Promise.reject();}cov_26eimolqk5().s[35]++;return User.findOne({_id:decoded._id});};cov_26eimolqk5().s[36]++;UserSchema.statics.ActivateByToken=function(token){cov_26eimolqk5().f[7]++;var User=(cov_26eimolqk5().s[37]++,this);var decoded;cov_26eimolqk5().s[38]++;try{cov_26eimolqk5().s[39]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_26eimolqk5().s[40]++;return Promise.reject();}cov_26eimolqk5().s[41]++;return User.findOneAndUpdate({_id:decoded._id},{isActive:true});};/*bcrypt.genSalt(10, (err, salt) => {
    bcrypt.hash(password, salt, (err, hash) => {
        console.log(hash);
        var user1 = new User({
            email: "ayamahmoudabdelfatah99@gmail.com",
            password: hash,
            userName: "hamadaaa  ",
            country: "  Egypt"
        });
        user1.save().then((res) => {
            console.log(res._id);
        }, (err) => {
            console.log(err);
        });

    });
});*/ ////monica////////
cov_26eimolqk5().s[42]++;UserSchema.methods.generateResetToken=function(){cov_26eimolqk5().f[8]++;var user=(cov_26eimolqk5().s[43]++,this);var access=(cov_26eimolqk5().s[44]++,"reset");var token=(cov_26eimolqk5().s[45]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser'));cov_26eimolqk5().s[46]++;user.resetToken=token;cov_26eimolqk5().s[47]++;console.log(token);cov_26eimolqk5().s[48]++;return user.save().then(()=>{cov_26eimolqk5().f[9]++;cov_26eimolqk5().s[49]++;return new Promise((resolve,reject)=>{cov_26eimolqk5().f[10]++;cov_26eimolqk5().s[50]++;resolve(token);});});};cov_26eimolqk5().s[51]++;UserSchema.statics.checkTokenAndFind=function(token){cov_26eimolqk5().f[11]++;var User=(cov_26eimolqk5().s[52]++,this);var decoded;var t=(cov_26eimolqk5().s[53]++,token);cov_26eimolqk5().s[54]++;try{cov_26eimolqk5().s[55]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_26eimolqk5().s[56]++;return Promise.reject();}cov_26eimolqk5().s[57]++;return User.findOne({_id:decoded._id,resetToken:t});};cov_26eimolqk5().s[58]++;UserSchema.statics.findByEmail=function(reqEmail){cov_26eimolqk5().f[12]++;var User=(cov_26eimolqk5().s[59]++,this);cov_26eimolqk5().s[60]++;return User.findOne({email:reqEmail});};var User=(cov_26eimolqk5().s[61]++,mongoose.model('Users',UserSchema));cov_26eimolqk5().s[62]++;module.exports={User};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImp3dCIsImJjcnlwdCIsInBhc3N3b3JkIiwidmFsaWRhdG9yIiwiaW1hZ2VzIiwiSW1hZ2VzU2NoZW1hIiwiZGVmYXVsdE1vZHVsZSIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VyTmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInRyaW0iLCJ1bmlxdWUiLCJlbWFpbCIsInZhbGlkYXRlIiwiaXNFbWFpbCIsIm1lc3NhZ2UiLCJpc1ByZW1pdW0iLCJCb29sZWFuIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiZ2VuZGVyIiwibWF4bGVuZ3RoIiwiZW51bSIsImJpcnRoRGF0ZSIsIkRhdGUiLCJtaW4iLCJtYXgiLCJyZXNldFRva2VuIiwidW5kZWZpbmVkIiwiaW1hZ2UiLCJkZWZhdWx0SW1hZ2UiLCJfZG9jIiwic3RhdGljcyIsImZpbmRCeUNyZWRlbnRpYWxzIiwiY29uc29sZSIsImxvZyIsIlVzZXIiLCJmaW5kT25lIiwidGhlbiIsInVzZXIiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzb2x2ZSIsImNvbXBhcmUiLCJlcnIiLCJyZXMiLCJtZXRob2RzIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJhY2Nlc3MiLCJ0b2tlbiIsInNpZ24iLCJfaWQiLCJ0b0hleFN0cmluZyIsInRvU3RyaW5nIiwiZmluZEJ5VG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiZSIsIkFjdGl2YXRlQnlUb2tlbiIsImZpbmRPbmVBbmRVcGRhdGUiLCJnZW5lcmF0ZVJlc2V0VG9rZW4iLCJzYXZlIiwiY2hlY2tUb2tlbkFuZEZpbmQiLCJ0IiwiZmluZEJ5RW1haWwiLCJyZXFFbWFpbCIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Im8vTkFBQSxLQUFNQSxDQUFBQSxRQUFRLDBCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENBQWQsQ0FDQSxLQUFNQyxD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LENBQVAsQ0FPSCxDQWhCRCxDLHlCQW1CQTVELFVBQVUsQ0FBQzZCLE9BQVgsQ0FBbUJnQyxXQUFuQixDQUFpQyxTQUFVQyxRQUFWLENBQW9CLDBCQUNqRCxHQUFJN0IsQ0FBQUEsSUFBSSwyQkFBRyxJQUFILENBQVIsQ0FEaUQseUJBRWpELE1BQU9BLENBQUFBLElBQUksQ0FBQ0MsT0FBTCxDQUFhLENBQUN6QixLQUFLLENBQUNxRCxRQUFQLENBQWIsQ0FBUCxDQUNILENBSEQsQ0FXQSxHQUFJN0IsQ0FBQUEsSUFBSSwyQkFBRzFDLFFBQVEsQ0FBQ3dFLEtBQVQsQ0FBZSxPQUFmLENBQXdCL0QsVUFBeEIsQ0FBSCxDQUFSLEMseUJBSUpnRSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDYmhDLElBRGEsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbnZhciBwYXNzd29yZCA9IFwiYWJjXCI7XHJcbmNvbnN0IHZhbGlkYXRvciA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xyXG52YXIgeyBpbWFnZXMsIEltYWdlc1NjaGVtYSB9ID0gcmVxdWlyZShcIi4vaW1hZ2VzLmpzXCIpOyAvLyBpbWFnZXMgbW9kZWxcclxuXHJcbmNvbnN0IGRlZmF1bHRNb2R1bGUgPSByZXF1aXJlKFwiLi8uLi9kZWZhdWx0aW1hZ2VcIik7XHJcblxyXG5cclxudmFyIFVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIHVzZXJOYW1lOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDogMSxcclxuICAgICAgICB0cmltOiB0cnVlLFxyXG4gICAgICAgIHVuaXF1ZTogdHJ1ZVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgZW1haWw6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDEsXHJcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxyXG5cdFx0dmFsaWRhdGU6e1xyXG5cdFx0XHR2YWxpZGF0b3I6IHZhbGlkYXRvci5pc0VtYWlsLFxyXG5cdFx0XHRtZXNzYWdlOiAne3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBlbWFpbCdcclxuXHRcdH1cclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB0cmltOiB0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDogNCxcclxuICAgIH0sXHJcbiAgICBpc1ByZW1pdW06IHtcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgaXNBY3RpdmU6IHtcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgZ2VuZGVyOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIHRyaW06IHRydWUsXHJcbiAgICAgICAgbWlubGVuZ3RoOiAxLFxyXG4gICAgICAgIG1heGxlbmd0aDogMSxcclxuICAgICAgICBlbnVtOiBbXCJNXCIsIFwiRlwiXSxcclxuICAgIH0sXHJcbiAgICBiaXJ0aERhdGU6IHtcclxuICAgICAgICB0eXBlOiBEYXRlLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIG1pbjogJzE5MjAtMTItMzEnLFxyXG4gICAgICAgIG1heDogJzIwMDUtMTItMzEnXHJcbiAgICB9LFxyXG4gICAgcmVzZXRUb2tlbjpcclxuICAgICB7XHJcbiAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgZGVmYXVsdDp1bmRlZmluZWRcclxuICAgIH0sXHJcbiAgICBpbWFnZToge1xyXG4gICAgICAgIHR5cGU6IEltYWdlc1NjaGVtYSxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBkZWZhdWx0OiBkZWZhdWx0TW9kdWxlLmRlZmF1bHRJbWFnZS5fZG9jXHJcbiAgICB9XHJcblxyXG5cclxufSk7XHJcblxyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeUNyZWRlbnRpYWxzID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWRcIik7XHJcbiAgICB2YXIgVXNlciA9IHRoaXM7XHJcbiAgICBjb25zb2xlLmxvZyhcIjJlbGdlZGVlZDJcIik7XHJcbiAgICByZXR1cm4gVXNlci5maW5kT25lKHsgZW1haWwgfSkudGhlbigodXNlcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkM1wiKTtcclxuICAgICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJub3QgdXNlclwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCwgKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmZWgzYWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodXNlcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc3dvcmRpbmNvcnJlY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5Vc2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVBdXRoVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdXNlciA9IHRoaXM7XHJcbiAgICB2YXIgYWNjZXNzID0gJ2F1dGgnO1xyXG4gICAgLy9jb25zb2xlLmxvZygnaGVuYScpO1xyXG4gICAgdmFyIHRva2VuID0gand0LnNpZ24oeyBfaWQ6IHVzZXIuX2lkLnRvSGV4U3RyaW5nKCksIGFjY2VzcyB9LCAnc2VjcmV0a2V5Zm9ydXNlcicpLnRvU3RyaW5nKCk7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdoZW5haGVuYScpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdoZW5haGVuYWhlbmEnKTtcclxuICAgICAgICByZXNvbHZlKHRva2VuKTtcclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgVXNlciA9IHRoaXM7XHJcbiAgICB2YXIgZGVjb2RlZDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuICwgJ3NlY3JldGtleWZvcnVzZXInKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5Vc2VyU2NoZW1hLnN0YXRpY3MuQWN0aXZhdGVCeVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgVXNlciA9IHRoaXM7XHJcbiAgICB2YXIgZGVjb2RlZDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuICwgJ3NlY3JldGtleWZvcnVzZXInKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gVXNlci5maW5kT25lQW5kVXBkYXRlKFxyXG5cdHtcclxuICAgICBfaWQ6ZGVjb2RlZC5faWRcclxuICAgIH0sXHJcblx0e1xyXG5cdFx0aXNBY3RpdmU6dHJ1ZVxyXG5cdH1cclxuXHQpO1xyXG5cclxuXHJcbn07XHJcblxyXG4vKmJjcnlwdC5nZW5TYWx0KDEwLCAoZXJyLCBzYWx0KSA9PiB7XHJcbiAgICBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdCwgKGVyciwgaGFzaCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGhhc2gpO1xyXG4gICAgICAgIHZhciB1c2VyMSA9IG5ldyBVc2VyKHtcclxuICAgICAgICAgICAgZW1haWw6IFwiYXlhbWFobW91ZGFiZGVsZmF0YWg5OUBnbWFpbC5jb21cIixcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2gsXHJcbiAgICAgICAgICAgIHVzZXJOYW1lOiBcImhhbWFkYWFhICBcIixcclxuICAgICAgICAgICAgY291bnRyeTogXCIgIEVneXB0XCJcclxuICAgICAgICB9KTtcclxuICAgICAgICB1c2VyMS5zYXZlKCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5faWQpO1xyXG4gICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxufSk7Ki9cclxuLy8vL21vbmljYS8vLy8vLy8vXHJcblxyXG5Vc2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVSZXNldFRva2VuPWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdXNlcj10aGlzO1xyXG4gICAgdmFyIGFjY2Vzcz1cInJlc2V0XCI7XHJcbiAgICB2YXIgdG9rZW49and0LnNpZ24oe19pZDp1c2VyLl9pZC50b0hleFN0cmluZygpLGFjY2Vzc30sJ3NlY3JldGtleWZvcnVzZXInKTtcclxuICAgIHVzZXIucmVzZXRUb2tlbj10b2tlbjtcclxuICAgIGNvbnNvbGUubG9nKHRva2VuKVxyXG4gICAgcmV0dXJuIHVzZXIuc2F2ZSgpLnRoZW4oKCk9PntcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKHRva2VuKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIFVzZXJTY2hlbWEuc3RhdGljcy5jaGVja1Rva2VuQW5kRmluZD0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkZWNvZGVkO1xyXG4gICAgICAgIHZhciB0PXRva2VuO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuICwgJ3NlY3JldGtleWZvcnVzZXInKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgICBfaWQ6ZGVjb2RlZC5faWQsXHJcblxyXG4gICAgICAgICByZXNldFRva2VuOnRcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgVXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeUVtYWlsID0gZnVuY3Rpb24gKHJlcUVtYWlsKSB7XHJcbiAgICAgICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBVc2VyLmZpbmRPbmUoe2VtYWlsOnJlcUVtYWlsfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIHZhciBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXJzJywgVXNlclNjaGVtYSk7XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgVXNlclxyXG59O1xyXG4iXX0=