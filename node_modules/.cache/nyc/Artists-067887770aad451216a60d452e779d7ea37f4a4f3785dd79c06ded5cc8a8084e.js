function cov_15jki93hm8(){var path="C:\\Users\\Dell\\Desktop\\error\\models\\Artists.js";var hash="51524fb87bcc0b18d34c7dbd7776e65d673e1169";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\error\\models\\Artists.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:34}},"2":{start:{line:3,column:17},end:{line:3,column:23}},"3":{start:{line:4,column:12},end:{line:4,column:35}},"4":{start:{line:6,column:0},end:{line:10,column:2}},"5":{start:{line:7,column:4},end:{line:9,column:6}},"6":{start:{line:8,column:8},end:{line:8,column:26}},"7":{start:{line:11,column:19},end:{line:48,column:2}},"8":{start:{line:50,column:0},end:{line:76,column:2}},"9":{start:{line:51,column:4},end:{line:51,column:29}},"10":{start:{line:52,column:17},end:{line:52,column:21}},"11":{start:{line:53,column:4},end:{line:53,column:30}},"12":{start:{line:54,column:4},end:{line:54,column:23}},"13":{start:{line:55,column:4},end:{line:74,column:7}},"14":{start:{line:56,column:8},end:{line:56,column:34}},"15":{start:{line:57,column:8},end:{line:61,column:9}},"16":{start:{line:58,column:12},end:{line:58,column:36}},"17":{start:{line:59,column:12},end:{line:59,column:36}},"18":{start:{line:62,column:8},end:{line:73,column:10}},"19":{start:{line:63,column:12},end:{line:72,column:15}},"20":{start:{line:64,column:16},end:{line:71,column:17}},"21":{start:{line:65,column:20},end:{line:65,column:43}},"22":{start:{line:66,column:20},end:{line:66,column:36}},"23":{start:{line:68,column:20},end:{line:68,column:49}},"24":{start:{line:69,column:20},end:{line:69,column:53}},"25":{start:{line:70,column:20},end:{line:70,column:29}},"26":{start:{line:77,column:0},end:{line:88,column:1}},"27":{start:{line:78,column:17},end:{line:78,column:21}},"28":{start:{line:79,column:17},end:{line:79,column:23}},"29":{start:{line:80,column:4},end:{line:80,column:24}},"30":{start:{line:81,column:16},end:{line:81,column:100}},"31":{start:{line:82,column:4},end:{line:82,column:28}},"32":{start:{line:83,column:4},end:{line:87,column:7}},"33":{start:{line:84,column:8},end:{line:84,column:36}},"34":{start:{line:85,column:8},end:{line:85,column:23}},"35":{start:{line:92,column:0},end:{line:105,column:2}},"36":{start:{line:93,column:17},end:{line:93,column:21}},"37":{start:{line:96,column:4},end:{line:100,column:5}},"38":{start:{line:97,column:8},end:{line:97,column:59}},"39":{start:{line:99,column:7},end:{line:99,column:31}},"40":{start:{line:101,column:4},end:{line:103,column:7}},"41":{start:{line:107,column:0},end:{line:132,column:2}},"42":{start:{line:108,column:20},end:{line:108,column:24}},"43":{start:{line:111,column:4},end:{line:119,column:5}},"44":{start:{line:113,column:8},end:{line:113,column:59}},"45":{start:{line:118,column:7},end:{line:118,column:31}},"46":{start:{line:122,column:4},end:{line:129,column:3}},"47":{start:{line:135,column:13},end:{line:135,column:52}},"48":{start:{line:136,column:0},end:{line:136,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:19},end:{line:6,column:20}},loc:{start:{line:6,column:34},end:{line:10,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:32},end:{line:7,column:33}},loc:{start:{line:7,column:47},end:{line:9,column:5}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:50,column:41},end:{line:50,column:42}},loc:{start:{line:50,column:68},end:{line:76,column:1}},line:50},"3":{name:"(anonymous_3)",decl:{start:{line:55,column:42},end:{line:55,column:43}},loc:{start:{line:55,column:54},end:{line:74,column:5}},line:55},"4":{name:"(anonymous_4)",decl:{start:{line:62,column:27},end:{line:62,column:28}},loc:{start:{line:62,column:48},end:{line:73,column:9}},line:62},"5":{name:"(anonymous_5)",decl:{start:{line:63,column:54},end:{line:63,column:55}},loc:{start:{line:63,column:68},end:{line:72,column:13}},line:63},"6":{name:"(anonymous_6)",decl:{start:{line:77,column:41},end:{line:77,column:42}},loc:{start:{line:77,column:53},end:{line:88,column:1}},line:77},"7":{name:"(anonymous_7)",decl:{start:{line:83,column:23},end:{line:83,column:24}},loc:{start:{line:83,column:44},end:{line:87,column:5}},line:83},"8":{name:"(anonymous_8)",decl:{start:{line:92,column:35},end:{line:92,column:36}},loc:{start:{line:92,column:52},end:{line:105,column:1}},line:92},"9":{name:"(anonymous_9)",decl:{start:{line:107,column:39},end:{line:107,column:40}},loc:{start:{line:107,column:56},end:{line:132,column:1}},line:107}},branchMap:{"0":{loc:{start:{line:57,column:8},end:{line:61,column:9}},type:"if",locations:[{start:{line:57,column:8},end:{line:61,column:9}},{start:{line:57,column:8},end:{line:61,column:9}}],line:57},"1":{loc:{start:{line:64,column:16},end:{line:71,column:17}},type:"if",locations:[{start:{line:64,column:16},end:{line:71,column:17}},{start:{line:64,column:16},end:{line:71,column:17}}],line:64}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"51524fb87bcc0b18d34c7dbd7776e65d673e1169"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_15jki93hm8=function(){return actualCoverage;};return actualCoverage;}cov_15jki93hm8();var mongoose=(cov_15jki93hm8().s[0]++,require("mongoose"));const bcrypt=(cov_15jki93hm8().s[1]++,require('bcryptjs'));const password=(cov_15jki93hm8().s[2]++,"2032");const jwt=(cov_15jki93hm8().s[3]++,require('jsonwebtoken'));cov_15jki93hm8().s[4]++;bcrypt.genSalt(10,(err,salt)=>{cov_15jki93hm8().f[0]++;cov_15jki93hm8().s[5]++;bcrypt.hash(password,salt,(err,hash)=>{cov_15jki93hm8().f[1]++;cov_15jki93hm8().s[6]++;console.log(hash);});});var ArtistSchema=(cov_15jki93hm8().s[7]++,new mongoose.Schema({artistName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,//required:true,
trim:true,minlength:1,unique:true},password:{type:String,required:true,trim:true,minlength:4},about:{type:String,required:true,trim:true,minlength:100},genres:[String],rating:{type:Number,default:-1// artist is not yet rated by the users of our app
},isActive:{type:Boolean,default:false}}));cov_15jki93hm8().s[8]++;ArtistSchema.statics.findByCredentials=function(email,password){cov_15jki93hm8().f[2]++;cov_15jki93hm8().s[9]++;console.log("2elgedeed");var artist=(cov_15jki93hm8().s[10]++,this);cov_15jki93hm8().s[11]++;console.log("2elgedeed2");cov_15jki93hm8().s[12]++;console.log(email);cov_15jki93hm8().s[13]++;return artist.findOne({email}).then(artist=>{cov_15jki93hm8().f[3]++;cov_15jki93hm8().s[14]++;console.log("2elgedeed3");cov_15jki93hm8().s[15]++;if(!artist){cov_15jki93hm8().b[0][0]++;cov_15jki93hm8().s[16]++;console.log("not user");cov_15jki93hm8().s[17]++;return Promise.reject();}else{cov_15jki93hm8().b[0][1]++;}cov_15jki93hm8().s[18]++;return new Promise((resolve,reject)=>{cov_15jki93hm8().f[4]++;cov_15jki93hm8().s[19]++;bcrypt.compare(password,artist.password,(err,res)=>{cov_15jki93hm8().f[5]++;cov_15jki93hm8().s[20]++;if(res){cov_15jki93hm8().b[1][0]++;cov_15jki93hm8().s[21]++;console.log("feh3ade");cov_15jki93hm8().s[22]++;resolve(artist);}else{cov_15jki93hm8().b[1][1]++;cov_15jki93hm8().s[23]++;console.log(artist.password);cov_15jki93hm8().s[24]++;console.log("Passwordincorrect");cov_15jki93hm8().s[25]++;reject();}});});});};cov_15jki93hm8().s[26]++;ArtistSchema.methods.generateAuthToken=function(){cov_15jki93hm8().f[6]++;var artist=(cov_15jki93hm8().s[27]++,this);var access=(cov_15jki93hm8().s[28]++,'auth');cov_15jki93hm8().s[29]++;console.log('hena');var token=(cov_15jki93hm8().s[30]++,jwt.sign({_id:artist._id.toHexString(),access},'secretkeyforartist').toString());cov_15jki93hm8().s[31]++;console.log('henahena');cov_15jki93hm8().s[32]++;return new Promise((resolve,reject)=>{cov_15jki93hm8().f[7]++;cov_15jki93hm8().s[33]++;console.log('henahenahena');cov_15jki93hm8().s[34]++;resolve(token);});};//////////////////
cov_15jki93hm8().s[35]++;ArtistSchema.statics.findByToken=function(token){cov_15jki93hm8().f[8]++;var artist=(cov_15jki93hm8().s[36]++,this);var decoded;cov_15jki93hm8().s[37]++;try{cov_15jki93hm8().s[38]++;decoded=jwt.verify(token,'secretkeyforartist');}catch(e){cov_15jki93hm8().s[39]++;return Promise.reject();}cov_15jki93hm8().s[40]++;return artist.findOne({_id:decoded._id});};cov_15jki93hm8().s[41]++;ArtistSchema.statics.ActivateByToken=function(token){cov_15jki93hm8().f[9]++;var newArtist=(cov_15jki93hm8().s[42]++,this);var decoded;cov_15jki93hm8().s[43]++;try{cov_15jki93hm8().s[44]++;decoded=jwt.verify(token,'secretkeyforartist');}catch(e){cov_15jki93hm8().s[45]++;return Promise.reject();}cov_15jki93hm8().s[46]++;return newArtist.findOneAndUpdate({_id:decoded._id},{isActive:true});};var artist=(cov_15jki93hm8().s[47]++,mongoose.model('Artists',ArtistSchema));cov_15jki93hm8().s[48]++;module.exports={artist};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGlzdHMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiYmNyeXB0IiwicGFzc3dvcmQiLCJqd3QiLCJnZW5TYWx0IiwiZXJyIiwic2FsdCIsImhhc2giLCJjb25zb2xlIiwibG9nIiwiQXJ0aXN0U2NoZW1hIiwiU2NoZW1hIiwiYXJ0aXN0TmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInRyaW0iLCJ1bmlxdWUiLCJlbWFpbCIsImFib3V0IiwiZ2VucmVzIiwicmF0aW5nIiwiTnVtYmVyIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiQm9vbGVhbiIsInN0YXRpY3MiLCJmaW5kQnlDcmVkZW50aWFscyIsImFydGlzdCIsImZpbmRPbmUiLCJ0aGVuIiwiUHJvbWlzZSIsInJlamVjdCIsInJlc29sdmUiLCJjb21wYXJlIiwicmVzIiwibWV0aG9kcyIsImdlbmVyYXRlQXV0aFRva2VuIiwiYWNjZXNzIiwidG9rZW4iLCJzaWduIiwiX2lkIiwidG9IZXhTdHJpbmciLCJ0b1N0cmluZyIsImZpbmRCeVRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsImUiLCJBY3RpdmF0ZUJ5VG9rZW4iLCJuZXdBcnRpc3QiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiaWtMQUFBLEdBQUlBLENBQUFBLFFBQVEsMEJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDQUNBLEtBQU1FLENBQUFBLFFBQVEsMEJBQUcsTUFBSCxDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRywwQkFBR0gsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFULEMsd0JBRUFDLE1BQU0sQ0FBQ0csT0FBUCxDQUFlLEVBQWYsQ0FBbUIsQ0FBQ0MsR0FBRCxDQUFNQyxJQUFOLEdBQWUsaURBQzlCTCxNQUFN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Q0FBQ2lCLE9BQWIsQ0FBcUJzQixlQUFyQixDQUF1QyxTQUFVVCxLQUFWLENBQWlCLHlCQUNwRCxHQUFJVSxDQUFBQSxTQUFTLDJCQUFHLElBQUgsQ0FBYixDQUNBLEdBQUlKLENBQUFBLE9BQUosQ0FGb0QseUJBSXBELEdBQ0gsMEJBQ09BLE9BQU8sQ0FBRzNDLEdBQUcsQ0FBQzRDLE1BQUosQ0FBV1AsS0FBWCxDQUFtQixvQkFBbkIsQ0FBVixDQUNILENBRUosTUFBT1EsQ0FBUCxDQUNBLDBCQUNNLE1BQU9oQixDQUFBQSxPQUFPLENBQUNDLE1BQVIsRUFBUCxDQUNGLENBWm1ELHlCQWVwRCxNQUFPaUIsQ0FBQUEsU0FBUyxDQUFDQyxnQkFBVixDQUNWLENBQ0lULEdBQUcsQ0FBQ0ksT0FBTyxDQUFDSixHQURoQixDQURVLENBSVYsQ0FDQ2pCLFFBQVEsQ0FBQyxJQURWLENBSlUsQ0FBUCxDQVVILENBekJELENBNEJBLEdBQUlJLENBQUFBLE1BQU0sMkJBQUc5QixRQUFRLENBQUNxRCxLQUFULENBQWUsU0FBZixDQUEwQjFDLFlBQTFCLENBQUgsQ0FBVixDLHlCQUNBMkMsTUFBTSxDQUFDQyxPQUFQLENBQWUsQ0FBQ3pCLE1BQUQsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbInZhciBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxuY29uc3QgcGFzc3dvcmQgPSBcIjIwMzJcIjtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG5iY3J5cHQuZ2VuU2FsdCgxMCwgKGVyciwgc2FsdCkgPT4ge1xyXG4gICAgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQsIChlcnIsIGhhc2gpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhoYXNoKTtcclxuICAgIH0pXHJcbn0pXHJcbnZhciBBcnRpc3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIGFydGlzdE5hbWU6IHtcclxuICAgICAgICB0eXBlOlN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aCA6IDEgLFxyXG4gICAgICAgIHRyaW0gOiB0cnVlLFxyXG4gICAgICAgIHVuaXF1ZTp0cnVlIFxyXG4gICAgfSxcclxuICAgIGVtYWlsOntcclxuICAgICAgICB0eXBlOlN0cmluZyxcclxuICAgICAgICAvL3JlcXVpcmVkOnRydWUsXHJcbiAgICAgICAgdHJpbTp0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDoxLCBcclxuICAgICAgICB1bmlxdWUgOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcGFzc3dvcmQ6e1xyXG4gICAgdHlwZTpTdHJpbmcsXHJcbiAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgdHJpbTp0cnVlLFxyXG4gICAgbWlubGVuZ3RoOjQsXHJcbiAgICB9LFxyXG4gICAgYWJvdXQ6e1xyXG4gICAgICAgIHR5cGU6U3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXHJcbiAgICAgICAgdHJpbTp0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDoxMDAgICBcclxuICAgIH0sXHJcbiAgICBnZW5yZXM6W1N0cmluZ10sXHJcbiAgICByYXRpbmc6e1xyXG4gICAgICAgIHR5cGU6TnVtYmVyLFxyXG4gICAgICAgIGRlZmF1bHQ6LTEgICAvLyBhcnRpc3QgaXMgbm90IHlldCByYXRlZCBieSB0aGUgdXNlcnMgb2Ygb3VyIGFwcFxyXG4gICAgfSxcclxuXHQgIGlzQWN0aXZlOiB7XHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfSxcclxuICAgIFxyXG59KTtcclxuXHJcbkFydGlzdFNjaGVtYS5zdGF0aWNzLmZpbmRCeUNyZWRlbnRpYWxzID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWRcIik7XHJcbiAgICB2YXIgYXJ0aXN0ID0gdGhpcztcclxuICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkMlwiKTtcclxuICAgIGNvbnNvbGUubG9nKGVtYWlsKTtcclxuICAgIHJldHVybiBhcnRpc3QuZmluZE9uZSh7IGVtYWlsIH0pLnRoZW4oKGFydGlzdCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkM1wiKTtcclxuICAgICAgICBpZiAoIWFydGlzdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCB1c2VyXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBhcnRpc3QucGFzc3dvcmQsIChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmVoM2FkZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFydGlzdCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFydGlzdC5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzd29yZGluY29ycmVjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxufTtcclxuQXJ0aXN0U2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVBdXRoVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXJ0aXN0ID0gdGhpcztcclxuICAgIHZhciBhY2Nlc3MgPSAnYXV0aCc7XHJcbiAgICBjb25zb2xlLmxvZygnaGVuYScpO1xyXG4gICAgdmFyIHRva2VuID0gand0LnNpZ24oeyBfaWQ6IGFydGlzdC5faWQudG9IZXhTdHJpbmcoKSwgYWNjZXNzIH0sICdzZWNyZXRrZXlmb3JhcnRpc3QnKS50b1N0cmluZygpO1xyXG4gICAgY29uc29sZS5sb2coJ2hlbmFoZW5hJyk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdoZW5haGVuYWhlbmEnKTtcclxuICAgICAgICByZXNvbHZlKHRva2VuKTtcclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vL1xyXG5BcnRpc3RTY2hlbWEuc3RhdGljcy5maW5kQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGFydGlzdCA9IHRoaXM7XHJcbiAgICB2YXIgZGVjb2RlZDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuICwgJ3NlY3JldGtleWZvcmFydGlzdCcpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJ0aXN0LmZpbmRPbmUoe1xyXG4gICAgIF9pZDpkZWNvZGVkLl9pZFxyXG4gICAgfSk7ICAgIFxyXG4gICAgXHJcbn07XHJcblxyXG5BcnRpc3RTY2hlbWEuc3RhdGljcy5BY3RpdmF0ZUJ5VG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBuZXdBcnRpc3QgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IFxyXG5cdHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3JhcnRpc3QnKTtcclxuICAgIH1cclxuXHJcblx0Y2F0Y2ggKGUpIFxyXG5cdHtcclxuICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgfVxyXG5cdFx0XHRcclxuXHJcbiAgICByZXR1cm4gbmV3QXJ0aXN0LmZpbmRPbmVBbmRVcGRhdGUoXHJcblx0e1xyXG4gICAgIF9pZDpkZWNvZGVkLl9pZFxyXG4gICAgfSxcclxuXHR7XHJcblx0XHRpc0FjdGl2ZTp0cnVlXHJcblx0fVxyXG5cdCk7IFxyXG5cdFxyXG4gICAgXHJcbn07XHJcblxyXG5cclxudmFyIGFydGlzdCA9IG1vbmdvb3NlLm1vZGVsKCdBcnRpc3RzJywgQXJ0aXN0U2NoZW1hKTtcclxubW9kdWxlLmV4cG9ydHM9e2FydGlzdH07Il19