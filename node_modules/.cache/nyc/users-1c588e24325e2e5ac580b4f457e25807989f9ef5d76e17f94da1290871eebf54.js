function cov_nmcqi9o39(){var path="C:\\Users\\Dell\\Desktop\\new\\models\\users.js";var hash="bf7efb0e4501b76d147ea4c4aa64e3282613f4a4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\new\\models\\users.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:4,column:15},end:{line:4,column:20}},"4":{start:{line:5,column:18},end:{line:5,column:38}},"5":{start:{line:6,column:31},end:{line:6,column:53}},"6":{start:{line:8,column:20},end:{line:8,column:48}},"7":{start:{line:11,column:17},end:{line:86,column:2}},"8":{start:{line:89,column:0},end:{line:113,column:2}},"9":{start:{line:90,column:4},end:{line:90,column:29}},"10":{start:{line:91,column:15},end:{line:91,column:19}},"11":{start:{line:92,column:4},end:{line:92,column:30}},"12":{start:{line:93,column:4},end:{line:111,column:7}},"13":{start:{line:94,column:8},end:{line:94,column:34}},"14":{start:{line:95,column:8},end:{line:99,column:9}},"15":{start:{line:96,column:12},end:{line:96,column:36}},"16":{start:{line:97,column:12},end:{line:97,column:36}},"17":{start:{line:100,column:8},end:{line:110,column:10}},"18":{start:{line:101,column:12},end:{line:109,column:15}},"19":{start:{line:102,column:16},end:{line:108,column:17}},"20":{start:{line:103,column:20},end:{line:103,column:43}},"21":{start:{line:104,column:20},end:{line:104,column:34}},"22":{start:{line:106,column:20},end:{line:106,column:53}},"23":{start:{line:107,column:20},end:{line:107,column:29}},"24":{start:{line:115,column:0},end:{line:126,column:1}},"25":{start:{line:116,column:15},end:{line:116,column:19}},"26":{start:{line:117,column:17},end:{line:117,column:23}},"27":{start:{line:119,column:16},end:{line:119,column:96}},"28":{start:{line:121,column:4},end:{line:125,column:7}},"29":{start:{line:123,column:8},end:{line:123,column:23}},"30":{start:{line:128,column:0},end:{line:141,column:2}},"31":{start:{line:129,column:15},end:{line:129,column:19}},"32":{start:{line:132,column:4},end:{line:136,column:5}},"33":{start:{line:133,column:8},end:{line:133,column:57}},"34":{start:{line:135,column:7},end:{line:135,column:31}},"35":{start:{line:137,column:4},end:{line:139,column:7}},"36":{start:{line:143,column:0},end:{line:164,column:2}},"37":{start:{line:144,column:15},end:{line:144,column:19}},"38":{start:{line:147,column:4},end:{line:151,column:5}},"39":{start:{line:148,column:8},end:{line:148,column:57}},"40":{start:{line:150,column:7},end:{line:150,column:31}},"41":{start:{line:154,column:4},end:{line:161,column:3}},"42":{start:{line:185,column:0},end:{line:198,column:5}},"43":{start:{line:186,column:13},end:{line:186,column:17}},"44":{start:{line:187,column:15},end:{line:187,column:22}},"45":{start:{line:188,column:14},end:{line:188,column:78}},"46":{start:{line:189,column:4},end:{line:189,column:26}},"47":{start:{line:190,column:4},end:{line:190,column:22}},"48":{start:{line:191,column:4},end:{line:196,column:6}},"49":{start:{line:192,column:8},end:{line:195,column:11}},"50":{start:{line:193,column:12},end:{line:193,column:27}},"51":{start:{line:202,column:4},end:{line:218,column:6}},"52":{start:{line:203,column:19},end:{line:203,column:23}},"53":{start:{line:205,column:14},end:{line:205,column:19}},"54":{start:{line:206,column:8},end:{line:210,column:9}},"55":{start:{line:207,column:12},end:{line:207,column:61}},"56":{start:{line:209,column:11},end:{line:209,column:35}},"57":{start:{line:211,column:8},end:{line:216,column:11}},"58":{start:{line:221,column:4},end:{line:224,column:6}},"59":{start:{line:222,column:19},end:{line:222,column:23}},"60":{start:{line:223,column:8},end:{line:223,column:46}},"61":{start:{line:232,column:15},end:{line:232,column:50}},"62":{start:{line:236,column:0},end:{line:238,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:89,column:39},end:{line:89,column:40}},loc:{start:{line:89,column:66},end:{line:113,column:1}},line:89},"1":{name:"(anonymous_1)",decl:{start:{line:93,column:40},end:{line:93,column:41}},loc:{start:{line:93,column:50},end:{line:111,column:5}},line:93},"2":{name:"(anonymous_2)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:48},end:{line:110,column:9}},line:100},"3":{name:"(anonymous_3)",decl:{start:{line:101,column:52},end:{line:101,column:53}},loc:{start:{line:101,column:66},end:{line:109,column:13}},line:101},"4":{name:"(anonymous_4)",decl:{start:{line:115,column:39},end:{line:115,column:40}},loc:{start:{line:115,column:51},end:{line:126,column:1}},line:115},"5":{name:"(anonymous_5)",decl:{start:{line:121,column:23},end:{line:121,column:24}},loc:{start:{line:121,column:44},end:{line:125,column:5}},line:121},"6":{name:"(anonymous_6)",decl:{start:{line:128,column:33},end:{line:128,column:34}},loc:{start:{line:128,column:50},end:{line:141,column:1}},line:128},"7":{name:"(anonymous_7)",decl:{start:{line:143,column:37},end:{line:143,column:38}},loc:{start:{line:143,column:54},end:{line:164,column:1}},line:143},"8":{name:"(anonymous_8)",decl:{start:{line:185,column:38},end:{line:185,column:39}},loc:{start:{line:185,column:48},end:{line:198,column:5}},line:185},"9":{name:"(anonymous_9)",decl:{start:{line:191,column:28},end:{line:191,column:29}},loc:{start:{line:191,column:32},end:{line:196,column:5}},line:191},"10":{name:"(anonymous_10)",decl:{start:{line:192,column:27},end:{line:192,column:28}},loc:{start:{line:192,column:48},end:{line:195,column:9}},line:192},"11":{name:"(anonymous_11)",decl:{start:{line:202,column:42},end:{line:202,column:43}},loc:{start:{line:202,column:59},end:{line:218,column:5}},line:202},"12":{name:"(anonymous_12)",decl:{start:{line:221,column:37},end:{line:221,column:38}},loc:{start:{line:221,column:57},end:{line:224,column:5}},line:221}},branchMap:{"0":{loc:{start:{line:95,column:8},end:{line:99,column:9}},type:"if",locations:[{start:{line:95,column:8},end:{line:99,column:9}},{start:{line:95,column:8},end:{line:99,column:9}}],line:95},"1":{loc:{start:{line:102,column:16},end:{line:108,column:17}},type:"if",locations:[{start:{line:102,column:16},end:{line:108,column:17}},{start:{line:102,column:16},end:{line:108,column:17}}],line:102}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bf7efb0e4501b76d147ea4c4aa64e3282613f4a4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_nmcqi9o39=function(){return actualCoverage;};return actualCoverage;}cov_nmcqi9o39();const mongoose=(cov_nmcqi9o39().s[0]++,require("mongoose"));const jwt=(cov_nmcqi9o39().s[1]++,require('jsonwebtoken'));const bcrypt=(cov_nmcqi9o39().s[2]++,require('bcryptjs'));var password=(cov_nmcqi9o39().s[3]++,"abc");const validator=(cov_nmcqi9o39().s[4]++,require('validator'));var{images,ImagesSchema}=(cov_nmcqi9o39().s[5]++,require("./images.js"));// images model
const defaultModule=(cov_nmcqi9o39().s[6]++,require("./../defaultimage"));var UserSchema=(cov_nmcqi9o39().s[7]++,new mongoose.Schema({userName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,required:true,trim:true,minlength:1,unique:true,validate:{validator:validator.isEmail,message:'{value} is not a valid email'}},password:{type:String,required:true,trim:true,minlength:4},isPremium:{type:Boolean,default:false},isActive:{type:Boolean,default:false},gender:{type:String,required:true,trim:true,minlength:1,maxlength:1,enum:["M","F"]},birthDate:{type:Date,required:true,min:'1920-12-31',max:'2005-12-31'},resetToken:{type:String,default:undefined},image:{type:ImagesSchema,required:true,default:defaultModule.defaultImage._doc},likedTracks:[{type:mongoose.Schema.Types.ObjectId,ref:"track"}],likedAlbums:[{type:mongoose.Schema.Types.ObjectId,ref:"album"}]}));cov_nmcqi9o39().s[8]++;UserSchema.statics.findByCredentials=function(email,password){cov_nmcqi9o39().f[0]++;cov_nmcqi9o39().s[9]++;console.log("2elgedeed");var User=(cov_nmcqi9o39().s[10]++,this);cov_nmcqi9o39().s[11]++;console.log("2elgedeed2");cov_nmcqi9o39().s[12]++;return User.findOne({email}).then(user=>{cov_nmcqi9o39().f[1]++;cov_nmcqi9o39().s[13]++;console.log("2elgedeed3");cov_nmcqi9o39().s[14]++;if(!user){cov_nmcqi9o39().b[0][0]++;cov_nmcqi9o39().s[15]++;console.log("not user");cov_nmcqi9o39().s[16]++;return Promise.reject();}else{cov_nmcqi9o39().b[0][1]++;}cov_nmcqi9o39().s[17]++;return new Promise((resolve,reject)=>{cov_nmcqi9o39().f[2]++;cov_nmcqi9o39().s[18]++;bcrypt.compare(password,user.password,(err,res)=>{cov_nmcqi9o39().f[3]++;cov_nmcqi9o39().s[19]++;if(res){cov_nmcqi9o39().b[1][0]++;cov_nmcqi9o39().s[20]++;console.log("feh3ade");cov_nmcqi9o39().s[21]++;resolve(user);}else{cov_nmcqi9o39().b[1][1]++;cov_nmcqi9o39().s[22]++;console.log("Passwordincorrect");cov_nmcqi9o39().s[23]++;reject();}});});});};cov_nmcqi9o39().s[24]++;UserSchema.methods.generateAuthToken=function(){cov_nmcqi9o39().f[4]++;var user=(cov_nmcqi9o39().s[25]++,this);var access=(cov_nmcqi9o39().s[26]++,'auth');//console.log('hena');
var token=(cov_nmcqi9o39().s[27]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser').toString());//console.log('henahena');
cov_nmcqi9o39().s[28]++;return new Promise((resolve,reject)=>{cov_nmcqi9o39().f[5]++;cov_nmcqi9o39().s[29]++;//console.log('henahenahena');
resolve(token);});};cov_nmcqi9o39().s[30]++;UserSchema.statics.findByToken=function(token){cov_nmcqi9o39().f[6]++;var User=(cov_nmcqi9o39().s[31]++,this);var decoded;cov_nmcqi9o39().s[32]++;try{cov_nmcqi9o39().s[33]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_nmcqi9o39().s[34]++;return Promise.reject();}cov_nmcqi9o39().s[35]++;return User.findOne({_id:decoded._id});};cov_nmcqi9o39().s[36]++;UserSchema.statics.ActivateByToken=function(token){cov_nmcqi9o39().f[7]++;var User=(cov_nmcqi9o39().s[37]++,this);var decoded;cov_nmcqi9o39().s[38]++;try{cov_nmcqi9o39().s[39]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_nmcqi9o39().s[40]++;return Promise.reject();}cov_nmcqi9o39().s[41]++;return User.findOneAndUpdate({_id:decoded._id},{isActive:true});};/*bcrypt.genSalt(10, (err, salt) => {
    bcrypt.hash(password, salt, (err, hash) => {
        console.log(hash);
        var user1 = new User({
            email: "ayamahmoudabdelfatah99@gmail.com",
            password: hash,
            userName: "hamadaaa  ",
            country: "  Egypt"
        });
        user1.save().then((res) => {
            console.log(res._id);
        }, (err) => {
            console.log(err);
        });

    });
});*/ ////monica////////
cov_nmcqi9o39().s[42]++;UserSchema.methods.generateResetToken=function(){cov_nmcqi9o39().f[8]++;var user=(cov_nmcqi9o39().s[43]++,this);var access=(cov_nmcqi9o39().s[44]++,"reset");var token=(cov_nmcqi9o39().s[45]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser'));cov_nmcqi9o39().s[46]++;user.resetToken=token;cov_nmcqi9o39().s[47]++;console.log(token);cov_nmcqi9o39().s[48]++;return user.save().then(()=>{cov_nmcqi9o39().f[9]++;cov_nmcqi9o39().s[49]++;return new Promise((resolve,reject)=>{cov_nmcqi9o39().f[10]++;cov_nmcqi9o39().s[50]++;resolve(token);});});};cov_nmcqi9o39().s[51]++;UserSchema.statics.checkTokenAndFind=function(token){cov_nmcqi9o39().f[11]++;var User=(cov_nmcqi9o39().s[52]++,this);var decoded;var t=(cov_nmcqi9o39().s[53]++,token);cov_nmcqi9o39().s[54]++;try{cov_nmcqi9o39().s[55]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_nmcqi9o39().s[56]++;return Promise.reject();}cov_nmcqi9o39().s[57]++;return User.findOne({_id:decoded._id,resetToken:t});};cov_nmcqi9o39().s[58]++;UserSchema.statics.findByEmail=function(reqEmail){cov_nmcqi9o39().f[12]++;var User=(cov_nmcqi9o39().s[59]++,this);cov_nmcqi9o39().s[60]++;return User.findOne({email:reqEmail});};var User=(cov_nmcqi9o39().s[61]++,mongoose.model('Users',UserSchema));cov_nmcqi9o39().s[62]++;module.exports={User};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImp3dCIsImJjcnlwdCIsInBhc3N3b3JkIiwidmFsaWRhdG9yIiwiaW1hZ2VzIiwiSW1hZ2VzU2NoZW1hIiwiZGVmYXVsdE1vZHVsZSIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VyTmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInRyaW0iLCJ1bmlxdWUiLCJlbWFpbCIsInZhbGlkYXRlIiwiaXNFbWFpbCIsIm1lc3NhZ2UiLCJpc1ByZW1pdW0iLCJCb29sZWFuIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiZ2VuZGVyIiwibWF4bGVuZ3RoIiwiZW51bSIsImJpcnRoRGF0ZSIsIkRhdGUiLCJtaW4iLCJtYXgiLCJyZXNldFRva2VuIiwidW5kZWZpbmVkIiwiaW1hZ2UiLCJkZWZhdWx0SW1hZ2UiLCJfZG9jIiwibGlrZWRUcmFja3MiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibGlrZWRBbGJ1bXMiLCJzdGF0aWNzIiwiZmluZEJ5Q3JlZGVudGlhbHMiLCJjb25zb2xlIiwibG9nIiwiVXNlciIsImZpbmRPbmUiLCJ0aGVuIiwidXNlciIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNvbHZlIiwiY29tcGFyZSIsImVyciIsInJlcyIsIm1ldGhvZHMiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsImFjY2VzcyIsInRva2VuIiwic2lnbiIsIl9pZCIsInRvSGV4U3RyaW5nIiwidG9TdHJpbmciLCJmaW5kQnlUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlIiwiQWN0aXZhdGVCeVRva2VuIiwiZmluZE9uZUFuZFVwZGF0ZSIsImdlbmVyYXRlUmVzZXRUb2tlbiIsInNhdmUiLCJjaGVja1Rva2VuQW5kRmluZCIsInQiLCJmaW5kQnlFbWFpbCIsInJlcUVtYWlsIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOGdPQUFBLEtBQU1BLENB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QUEsQ0FBQywwQkFBQ2QsS0FBRCxDQUFMLENBSG1ELHdCQUluRCxHQUFJLHlCQUNBTSxPQUFPLENBQUdoRSxHQUFHLENBQUNpRSxNQUFKLENBQVdQLEtBQVgsQ0FBbUIsa0JBQW5CLENBQVYsQ0FDSCxDQUFDLE1BQU9RLENBQVAsQ0FBVSx5QkFDVCxNQUFPakIsQ0FBQUEsT0FBTyxDQUFDQyxNQUFSLEVBQVAsQ0FDRixDQVJrRCx3QkFTbkQsTUFBT0wsQ0FBQUEsSUFBSSxDQUFDQyxPQUFMLENBQWEsQ0FDbkJjLEdBQUcsQ0FBQ0ksT0FBTyxDQUFDSixHQURPLENBR25CN0IsVUFBVSxDQUFDeUMsQ0FIUSxDQUFiLENBQVAsQ0FPSCxDQWhCRCxDLHdCQW1CQWpFLFVBQVUsQ0FBQ2tDLE9BQVgsQ0FBbUJnQyxXQUFuQixDQUFpQyxTQUFVQyxRQUFWLENBQW9CLHlCQUNqRCxHQUFJN0IsQ0FBQUEsSUFBSSwwQkFBRyxJQUFILENBQVIsQ0FEaUQsd0JBRWpELE1BQU9BLENBQUFBLElBQUksQ0FBQ0MsT0FBTCxDQUFhLENBQUM5QixLQUFLLENBQUMwRCxRQUFQLENBQWIsQ0FBUCxDQUNILENBSEQsQ0FXQSxHQUFJN0IsQ0FBQUEsSUFBSSwwQkFBRy9DLFFBQVEsQ0FBQzZFLEtBQVQsQ0FBZSxPQUFmLENBQXdCcEUsVUFBeEIsQ0FBSCxDQUFSLEMsd0JBSUpxRSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDYmhDLElBRGEsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbnZhciBwYXNzd29yZCA9IFwiYWJjXCI7XHJcbmNvbnN0IHZhbGlkYXRvciA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xyXG52YXIgeyBpbWFnZXMsIEltYWdlc1NjaGVtYSB9ID0gcmVxdWlyZShcIi4vaW1hZ2VzLmpzXCIpOyAvLyBpbWFnZXMgbW9kZWxcclxuXHJcbmNvbnN0IGRlZmF1bHRNb2R1bGU9cmVxdWlyZShcIi4vLi4vZGVmYXVsdGltYWdlXCIpO1xyXG5cclxuXHJcbnZhciBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICB1c2VyTmFtZToge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDEsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGVtYWlsOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIHRyaW06IHRydWUsXHJcbiAgICAgICAgbWlubGVuZ3RoOiAxLFxyXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcclxuXHRcdHZhbGlkYXRlOntcclxuXHRcdFx0dmFsaWRhdG9yOiB2YWxpZGF0b3IuaXNFbWFpbCxcclxuXHRcdFx0bWVzc2FnZTogJ3t2YWx1ZX0gaXMgbm90IGEgdmFsaWQgZW1haWwnXHJcblx0XHR9XHJcbiAgICB9LFxyXG4gICAgcGFzc3dvcmQ6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDQsXHJcbiAgICB9LFxyXG4gICAgaXNQcmVtaXVtOiB7XHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGlzQWN0aXZlOiB7XHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGdlbmRlcjoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB0cmltOiB0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDogMSxcclxuICAgICAgICBtYXhsZW5ndGg6IDEsXHJcbiAgICAgICAgZW51bTogW1wiTVwiLCBcIkZcIl0sXHJcbiAgICB9LFxyXG4gICAgYmlydGhEYXRlOiB7XHJcbiAgICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBtaW46ICcxOTIwLTEyLTMxJyxcclxuICAgICAgICBtYXg6ICcyMDA1LTEyLTMxJ1xyXG4gICAgfSxcclxuICAgIHJlc2V0VG9rZW46XHJcbiAgICAge1xyXG4gICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgIGRlZmF1bHQ6dW5kZWZpbmVkXHJcbiAgICB9LFxyXG4gICAgaW1hZ2U6IHtcclxuICAgICAgICB0eXBlOiBJbWFnZXNTY2hlbWEsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgZGVmYXVsdDpkZWZhdWx0TW9kdWxlLmRlZmF1bHRJbWFnZS5fZG9jXHJcbiAgICB9LFxyXG5cclxuICAgIGxpa2VkVHJhY2tzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgICAgIHJlZjogXCJ0cmFja1wiXHJcbiAgICAgICAgfVxyXG4gICAgXSxcclxuXHJcbiAgICBsaWtlZEFsYnVtczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgICAgICByZWY6IFwiYWxidW1cIlxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICBcclxuXHJcbn0pO1xyXG5cclxuXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlDcmVkZW50aWFscyA9IGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkXCIpO1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWQyXCIpO1xyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIjJlbGdlZGVlZDNcIik7XHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm90IHVzZXJcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmVoM2FkZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3N3b3JkaW5jb3JyZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuVXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlQXV0aFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGFjY2VzcyA9ICdhdXRoJztcclxuICAgIC8vY29uc29sZS5sb2coJ2hlbmEnKTtcclxuICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsgX2lkOiB1c2VyLl9pZC50b0hleFN0cmluZygpLCBhY2Nlc3MgfSwgJ3NlY3JldGtleWZvcnVzZXInKS50b1N0cmluZygpO1xyXG4gICAgLy9jb25zb2xlLmxvZygnaGVuYWhlbmEnKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGVuYWhlbmFoZW5hJyk7XHJcbiAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBVc2VyLmZpbmRPbmUoe1xyXG4gICAgIF9pZDpkZWNvZGVkLl9pZFxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLkFjdGl2YXRlQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcclxuXHR7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9LFxyXG5cdHtcclxuXHRcdGlzQWN0aXZlOnRydWVcclxuXHR9XHJcblx0KTtcclxuXHJcblxyXG59O1xyXG5cclxuLypiY3J5cHQuZ2VuU2FsdCgxMCwgKGVyciwgc2FsdCkgPT4ge1xyXG4gICAgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQsIChlcnIsIGhhc2gpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhoYXNoKTtcclxuICAgICAgICB2YXIgdXNlcjEgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIGVtYWlsOiBcImF5YW1haG1vdWRhYmRlbGZhdGFoOTlAZ21haWwuY29tXCIsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogXCJoYW1hZGFhYSAgXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwiICBFZ3lwdFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdXNlcjEuc2F2ZSgpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuX2lkKTtcclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbn0pOyovXHJcbi8vLy9tb25pY2EvLy8vLy8vL1xyXG5cclxuVXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlUmVzZXRUb2tlbj1mdW5jdGlvbigpe1xyXG4gICAgdmFyIHVzZXI9dGhpcztcclxuICAgIHZhciBhY2Nlc3M9XCJyZXNldFwiO1xyXG4gICAgdmFyIHRva2VuPWp3dC5zaWduKHtfaWQ6dXNlci5faWQudG9IZXhTdHJpbmcoKSxhY2Nlc3N9LCdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB1c2VyLnJlc2V0VG9rZW49dG9rZW47XHJcbiAgICBjb25zb2xlLmxvZyh0b2tlbilcclxuICAgIHJldHVybiB1c2VyLnNhdmUoKS50aGVuKCgpPT57XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBVc2VyU2NoZW1hLnN0YXRpY3MuY2hlY2tUb2tlbkFuZEZpbmQ9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgICAgICB2YXIgZGVjb2RlZDtcclxuICAgICAgICB2YXIgdD10b2tlbjtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5maW5kT25lKHtcclxuICAgICAgICAgX2lkOmRlY29kZWQuX2lkLFxyXG5cclxuICAgICAgICAgcmVzZXRUb2tlbjp0XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuICAgIFVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlFbWFpbCA9IGZ1bmN0aW9uIChyZXFFbWFpbCkge1xyXG4gICAgICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgICAgICByZXR1cm4gVXNlci5maW5kT25lKHtlbWFpbDpyZXFFbWFpbH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB2YXIgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VycycsIFVzZXJTY2hlbWEpO1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIFVzZXJcclxufTtcclxuIl19