function cov_28c831pzen(){var path="C:\\Users\\Dell\\Desktop\\Monica\\Services\\createplaylist.js";var hash="735d1d7f1d265fcf9f2ece29c38bf7bf5d812f79";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\Monica\\Services\\createplaylist.js",statementMap:{"0":{start:{line:2,column:15},end:{line:2,column:33}},"1":{start:{line:3,column:16},end:{line:3,column:38}},"2":{start:{line:4,column:17},end:{line:4,column:35}},"3":{start:{line:5,column:9},end:{line:5,column:22}},"4":{start:{line:7,column:15},end:{line:7,column:45}},"5":{start:{line:8,column:15},end:{line:8,column:50}},"6":{start:{line:9,column:11},end:{line:9,column:42}},"7":{start:{line:16,column:8},end:{line:16,column:17}},"8":{start:{line:18,column:0},end:{line:18,column:27}},"9":{start:{line:22,column:0},end:{line:69,column:3}},"10":{start:{line:24,column:16},end:{line:24,column:36}},"11":{start:{line:25,column:4},end:{line:68,column:6}},"12":{start:{line:26,column:8},end:{line:28,column:9}},"13":{start:{line:27,column:12},end:{line:27,column:36}},"14":{start:{line:29,column:8},end:{line:31,column:9}},"15":{start:{line:30,column:12},end:{line:30,column:69}},"16":{start:{line:37,column:20},end:{line:37,column:28}},"17":{start:{line:38,column:8},end:{line:63,column:11}},"18":{start:{line:39,column:12},end:{line:62,column:13}},"19":{start:{line:40,column:39},end:{line:49,column:18}},"20":{start:{line:48,column:20},end:{line:48,column:77}},"21":{start:{line:51,column:16},end:{line:57,column:19}},"22":{start:{line:52,column:20},end:{line:52,column:35}},"23":{start:{line:53,column:20},end:{line:53,column:46}},"24":{start:{line:55,column:20},end:{line:55,column:35}},"25":{start:{line:56,column:20},end:{line:56,column:72}},"26":{start:{line:60,column:17},end:{line:62,column:13}},"27":{start:{line:61,column:16},end:{line:61,column:92}},"28":{start:{line:67,column:8},end:{line:67,column:52}},"29":{start:{line:74,column:0},end:{line:78,column:1}},"30":{start:{line:75,column:4},end:{line:77,column:7}},"31":{start:{line:76,column:8},end:{line:76,column:44}},"32":{start:{line:79,column:0},end:{line:79,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:22,column:22},end:{line:22,column:23}},loc:{start:{line:22,column:33},end:{line:69,column:1}},line:22},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:33},end:{line:25,column:34}},loc:{start:{line:25,column:41},end:{line:66,column:5}},line:25},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:92},end:{line:38,column:93}},loc:{start:{line:38,column:107},end:{line:63,column:9}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:47,column:18},end:{line:47,column:19}},loc:{start:{line:47,column:23},end:{line:49,column:17}},line:47},"4":{name:"(anonymous_4)",decl:{start:{line:51,column:45},end:{line:51,column:46}},loc:{start:{line:51,column:52},end:{line:54,column:17}},line:51},"5":{name:"(anonymous_5)",decl:{start:{line:54,column:25},end:{line:54,column:26}},loc:{start:{line:54,column:30},end:{line:57,column:17}},line:54},"6":{name:"(anonymous_6)",decl:{start:{line:66,column:13},end:{line:66,column:14}},loc:{start:{line:66,column:18},end:{line:68,column:5}},line:66},"7":{name:"(anonymous_7)",decl:{start:{line:75,column:20},end:{line:75,column:21}},loc:{start:{line:75,column:24},end:{line:77,column:5}},line:75}},branchMap:{"0":{loc:{start:{line:26,column:8},end:{line:28,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:28,column:9}},{start:{line:26,column:8},end:{line:28,column:9}}],line:26},"1":{loc:{start:{line:29,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:31,column:9}},{start:{line:29,column:8},end:{line:31,column:9}}],line:29},"2":{loc:{start:{line:39,column:12},end:{line:62,column:13}},type:"if",locations:[{start:{line:39,column:12},end:{line:62,column:13}},{start:{line:39,column:12},end:{line:62,column:13}}],line:39},"3":{loc:{start:{line:60,column:17},end:{line:62,column:13}},type:"if",locations:[{start:{line:60,column:17},end:{line:62,column:13}},{start:{line:60,column:17},end:{line:62,column:13}}],line:60},"4":{loc:{start:{line:74,column:0},end:{line:78,column:1}},type:"if",locations:[{start:{line:74,column:0},end:{line:78,column:1}},{start:{line:74,column:0},end:{line:78,column:1}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"735d1d7f1d265fcf9f2ece29c38bf7bf5d812f79"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_28c831pzen=function(){return actualCoverage;};return actualCoverage;}cov_28c831pzen();//library imports
const express=(cov_28c831pzen().s[0]++,require('express'));var bodyParser=(cov_28c831pzen().s[1]++,require('body-parser'));const{ObjectID}=(cov_28c831pzen().s[2]++,require("mongodb"));var fs=(cov_28c831pzen().s[3]++,require('fs'));//local imports
var{mongoose}=(cov_28c831pzen().s[4]++,require("./../db/mongoose.js"));var{playlist}=(cov_28c831pzen().s[5]++,require("./../models/playlists.js"));// playlists model
var{User}=(cov_28c831pzen().s[6]++,require("./../models/users.js"));// users model
///////////
var app=(cov_28c831pzen().s[7]++,express());//configures the middlewear
cov_28c831pzen().s[8]++;app.use(bodyParser.json());//post fn takes the url as first paramter and a call back fn 
//the user id is to be passed in the url to know whom this playlist belongs to
cov_28c831pzen().s[9]++;app.post('/playlists',(req,res)=>{cov_28c831pzen().f[0]++;var token=(cov_28c831pzen().s[10]++,req.header('x-auth'));cov_28c831pzen().s[11]++;User.findByToken(token).then(user=>{cov_28c831pzen().f[1]++;cov_28c831pzen().s[12]++;if(!user){cov_28c831pzen().b[0][0]++;cov_28c831pzen().s[13]++;return Promise.reject();}else{cov_28c831pzen().b[0][1]++;}cov_28c831pzen().s[14]++;if(!req.body.playlistName){cov_28c831pzen().b[1][0]++;cov_28c831pzen().s[15]++;return res.status(400).send("Playlist must have a name");}else{cov_28c831pzen().b[1][1]++;}//PREVENT THE USER FROM HAVING 2 PLAYLISTS WITH THE SAME NAME
var userId2=(cov_28c831pzen().s[16]++,user._id);cov_28c831pzen().s[17]++;playlist.find({$and:[{userId:userId2},{playlistName:req.body.playlistName}]}).then(myduplicate=>{cov_28c831pzen().f[2]++;cov_28c831pzen().s[18]++;if(myduplicate.length==0){cov_28c831pzen().b[2][0]++;var playlistInstance=(cov_28c831pzen().s[19]++,new playlist({userId:userId2,playlistName:req.body.playlistName,privacy:req.body.privacy// href:playlistInstance.href         // to be uncommented when href is known
},e=>{cov_28c831pzen().f[3]++;cov_28c831pzen().s[20]++;return res.status(500).send("Coult not create playlist");}));cov_28c831pzen().s[21]++;playlistInstance.save().then(doc=>{cov_28c831pzen().f[4]++;cov_28c831pzen().s[22]++;myduplicate=[];cov_28c831pzen().s[23]++;res.status(201).send(doc);}).catch(e=>{cov_28c831pzen().f[5]++;cov_28c831pzen().s[24]++;myduplicate=[];cov_28c831pzen().s[25]++;res.status(500).send("Could not save the playlist");});}else{cov_28c831pzen().b[2][1]++;cov_28c831pzen().s[26]++;if(myduplicate.length!=0){cov_28c831pzen().b[3][0]++;cov_28c831pzen().s[27]++;return res.status(400).send("Cannot create 2 playlists with the same name");}else{cov_28c831pzen().b[3][1]++;}};});}).catch(e=>{cov_28c831pzen().f[6]++;cov_28c831pzen().s[28]++;res.status(401).send('Unauthorized Access');});});cov_28c831pzen().s[29]++;if(!module.parent){cov_28c831pzen().b[4][0]++;cov_28c831pzen().s[30]++;app.listen(3000,()=>{cov_28c831pzen().f[7]++;cov_28c831pzen().s[31]++;console.log("Started on port 3000");});}else{cov_28c831pzen().b[4][1]++;}cov_28c831pzen().s[32]++;module.exports={app};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZXBsYXlsaXN0LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYm9keVBhcnNlciIsIk9iamVjdElEIiwiZnMiLCJtb25nb29zZSIsInBsYXlsaXN0IiwiVXNlciIsImFwcCIsInVzZSIsImpzb24iLCJwb3N0IiwicmVxIiwicmVzIiwidG9rZW4iLCJoZWFkZXIiLCJmaW5kQnlUb2tlbiIsInRoZW4iLCJ1c2VyIiwiUHJvbWlzZSIsInJlamVjdCIsImJvZHkiLCJwbGF5bGlzdE5hbWUiLCJzdGF0dXMiLCJzZW5kIiwidXNlcklkMiIsIl9pZCIsImZpbmQiLCIkYW5kIiwidXNlcklkIiwibXlkdXBsaWNhdGUiLCJsZW5ndGgiLCJwbGF5bGlzdEluc3RhbmNlIiwicHJpdmFjeSIsImUiLCJzYXZlIiwiZG9jIiwiY2F0Y2giLCJtb2R1bGUiLCJwYXJlbnQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Inc0SkFBQTtBQUNBLEtBQU1BLENBQUFBLE9BQU8sMEJBQUVDLE9BQU8sQ0FBQyxTQUFELENBQVQsQ0FBYixDQUNBLEdBQUlDLENBQUFBLFVBQVUsMEJBQUVELE9BQU8sQ0FBQyxhQUFELENBQVQsQ0FBZCxDQUNBLEtBQU0sQ0FBQ0UsUUFBRCwyQkFBV0YsT0FBTyxDQUFDLFNBQUQsQ0FBbEIsQ0FBTixDQUNBLEdBQUlHLENBQUFBLEVBQUUsMEJBQUdILE9BQU8sQ0FBQyxJQUFELENBQVYsQ0FBTixDQUNBO0FBQ0EsR0FBRyxDQUFDSSxRQUFELDJCQUFZSixPQUFPLENBQUMscUJBQUQsQ0FBbkIsQ0FBSCxDQUNBLEdBQUcsQ0FBQ0ssUUFBRCwyQkFBWUwsT0FBTyxDQUFDLDBCQUFELENBQW5CLENBQUgsQ0FBb0Q7QUFDcEQsR0FBRyxDQUFDTSxJQUFELDJCQUFRTixPQUFPLENBQUMsc0JBQUQsQ0FBZixDQUFILENBQTRDO0FBTTVDO0FBQ0EsR0FBSU8sQ0FBQUEsR0FBRywwQkFBQ1IsT0FBTyxF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SkQsaUMseUJBS0FKLE1BQU0sQ0FBQ0ssT0FBUCxDQUFlLENBQUNuQyxHQUFELENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyIvL2xpYnJhcnkgaW1wb3J0c1xyXG5jb25zdCBleHByZXNzPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbnZhciBib2R5UGFyc2VyPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCB7T2JqZWN0SUR9PXJlcXVpcmUoXCJtb25nb2RiXCIpO1xyXG52YXIgZnMgPSByZXF1aXJlKCdmcycpO1xyXG4vL2xvY2FsIGltcG9ydHNcclxudmFye21vbmdvb3NlfT0gcmVxdWlyZShcIi4vLi4vZGIvbW9uZ29vc2UuanNcIik7ICBcclxudmFye3BsYXlsaXN0fT0gcmVxdWlyZShcIi4vLi4vbW9kZWxzL3BsYXlsaXN0cy5qc1wiKTsgLy8gcGxheWxpc3RzIG1vZGVsXHJcbnZhcntVc2VyfT0gcmVxdWlyZShcIi4vLi4vbW9kZWxzL3VzZXJzLmpzXCIpOyAvLyB1c2VycyBtb2RlbFxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vLy8vLy8vLy8vXHJcbnZhciBhcHA9ZXhwcmVzcygpO1xyXG4vL2NvbmZpZ3VyZXMgdGhlIG1pZGRsZXdlYXJcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcblxyXG4vL3Bvc3QgZm4gdGFrZXMgdGhlIHVybCBhcyBmaXJzdCBwYXJhbXRlciBhbmQgYSBjYWxsIGJhY2sgZm4gXHJcbi8vdGhlIHVzZXIgaWQgaXMgdG8gYmUgcGFzc2VkIGluIHRoZSB1cmwgdG8ga25vdyB3aG9tIHRoaXMgcGxheWxpc3QgYmVsb25ncyB0b1xyXG5hcHAucG9zdCgnL3BsYXlsaXN0cycsKHJlcSxyZXMpPT57XHJcbiAgICBcclxuICAgIHZhciB0b2tlbiA9IHJlcS5oZWFkZXIoJ3gtYXV0aCcpO1xyXG4gICAgVXNlci5maW5kQnlUb2tlbih0b2tlbikudGhlbigodXNlcik9PntcclxuICAgICAgICBpZighdXNlcil7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighcmVxLmJvZHkucGxheWxpc3ROYW1lKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiUGxheWxpc3QgbXVzdCBoYXZlIGEgbmFtZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG5cclxuICAgICAgICAvL1BSRVZFTlQgVEhFIFVTRVIgRlJPTSBIQVZJTkcgMiBQTEFZTElTVFMgV0lUSCBUSEUgU0FNRSBOQU1FXHJcblxyXG4gICAgICAgIHZhciB1c2VySWQyPXVzZXIuX2lkO1xyXG4gICAgICAgIHBsYXlsaXN0LmZpbmQoeyRhbmQ6W3t1c2VySWQ6dXNlcklkMn0se3BsYXlsaXN0TmFtZTpyZXEuYm9keS5wbGF5bGlzdE5hbWUgfV19KS50aGVuKChteWR1cGxpY2F0ZSk9PntcclxuICAgICAgICAgICAgaWYobXlkdXBsaWNhdGUubGVuZ3RoPT0wKXtcclxuICAgICAgICAgICAgICAgIHZhciBwbGF5bGlzdEluc3RhbmNlID0gbmV3IHBsYXlsaXN0KHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6dXNlcklkMiwgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlsaXN0TmFtZTogcmVxLmJvZHkucGxheWxpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaXZhY3k6IHJlcS5ib2R5LnByaXZhY3ksXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAvLyBocmVmOnBsYXlsaXN0SW5zdGFuY2UuaHJlZiAgICAgICAgIC8vIHRvIGJlIHVuY29tbWVudGVkIHdoZW4gaHJlZiBpcyBrbm93blxyXG4gICAgICAgICAgICAgICAgfSwoZSk9PntcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJDb3VsdCBub3QgY3JlYXRlIHBsYXlsaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcGxheWxpc3RJbnN0YW5jZS5zYXZlKCkudGhlbigoZG9jKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIG15ZHVwbGljYXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKGRvYyk7ICBcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIG15ZHVwbGljYXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiQ291bGQgbm90IHNhdmUgdGhlIHBsYXlsaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKG15ZHVwbGljYXRlLmxlbmd0aCE9MCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJDYW5ub3QgY3JlYXRlIDIgcGxheWxpc3RzIHdpdGggdGhlIHNhbWUgbmFtZVwiKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBcclxuICAgIH0pLmNhdGNoKChlKT0+e1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKCdVbmF1dGhvcml6ZWQgQWNjZXNzJyk7XHJcbiAgICB9KVxyXG59KTtcclxuXHJcbiAgICBcclxuXHJcblxyXG5pZighbW9kdWxlLnBhcmVudCl7XHJcbiAgICBhcHAubGlzdGVuKDMwMDAsKCk9PntcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0ZWQgb24gcG9ydCAzMDAwXCIpO1xyXG4gICAgfSk7XHJcbn1cclxubW9kdWxlLmV4cG9ydHM9e2FwcH07XHJcblxyXG5cclxuIl19