function cov_1j093calk0(){var path="C:\\Users\\Dell\\Desktop\\Monica\\models\\Artists.js";var hash="4cae78338017ab2be60455cbdc8cd1e204d7c0c4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\Monica\\models\\Artists.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:34}},"2":{start:{line:3,column:17},end:{line:3,column:23}},"3":{start:{line:4,column:12},end:{line:4,column:35}},"4":{start:{line:5,column:31},end:{line:5,column:53}},"5":{start:{line:7,column:0},end:{line:11,column:2}},"6":{start:{line:8,column:4},end:{line:10,column:6}},"7":{start:{line:9,column:8},end:{line:9,column:26}},"8":{start:{line:12,column:19},end:{line:53,column:2}},"9":{start:{line:55,column:0},end:{line:81,column:2}},"10":{start:{line:56,column:4},end:{line:56,column:29}},"11":{start:{line:57,column:17},end:{line:57,column:21}},"12":{start:{line:58,column:4},end:{line:58,column:30}},"13":{start:{line:59,column:4},end:{line:59,column:23}},"14":{start:{line:60,column:4},end:{line:79,column:7}},"15":{start:{line:61,column:8},end:{line:61,column:34}},"16":{start:{line:62,column:8},end:{line:66,column:9}},"17":{start:{line:63,column:12},end:{line:63,column:36}},"18":{start:{line:64,column:12},end:{line:64,column:36}},"19":{start:{line:67,column:8},end:{line:78,column:10}},"20":{start:{line:68,column:12},end:{line:77,column:15}},"21":{start:{line:69,column:16},end:{line:76,column:17}},"22":{start:{line:70,column:20},end:{line:70,column:43}},"23":{start:{line:71,column:20},end:{line:71,column:36}},"24":{start:{line:73,column:20},end:{line:73,column:49}},"25":{start:{line:74,column:20},end:{line:74,column:53}},"26":{start:{line:75,column:20},end:{line:75,column:29}},"27":{start:{line:82,column:0},end:{line:93,column:1}},"28":{start:{line:83,column:17},end:{line:83,column:21}},"29":{start:{line:84,column:17},end:{line:84,column:23}},"30":{start:{line:86,column:16},end:{line:86,column:100}},"31":{start:{line:88,column:4},end:{line:92,column:7}},"32":{start:{line:90,column:8},end:{line:90,column:23}},"33":{start:{line:97,column:0},end:{line:110,column:2}},"34":{start:{line:98,column:17},end:{line:98,column:21}},"35":{start:{line:101,column:4},end:{line:105,column:5}},"36":{start:{line:102,column:8},end:{line:102,column:59}},"37":{start:{line:104,column:7},end:{line:104,column:31}},"38":{start:{line:106,column:4},end:{line:108,column:7}},"39":{start:{line:112,column:0},end:{line:137,column:2}},"40":{start:{line:113,column:20},end:{line:113,column:24}},"41":{start:{line:116,column:4},end:{line:124,column:5}},"42":{start:{line:118,column:8},end:{line:118,column:59}},"43":{start:{line:123,column:7},end:{line:123,column:31}},"44":{start:{line:127,column:4},end:{line:134,column:3}},"45":{start:{line:142,column:13},end:{line:142,column:52}},"46":{start:{line:143,column:0},end:{line:143,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:34},end:{line:11,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:32},end:{line:8,column:33}},loc:{start:{line:8,column:47},end:{line:10,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:55,column:41},end:{line:55,column:42}},loc:{start:{line:55,column:68},end:{line:81,column:1}},line:55},"3":{name:"(anonymous_3)",decl:{start:{line:60,column:42},end:{line:60,column:43}},loc:{start:{line:60,column:54},end:{line:79,column:5}},line:60},"4":{name:"(anonymous_4)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:48},end:{line:78,column:9}},line:67},"5":{name:"(anonymous_5)",decl:{start:{line:68,column:54},end:{line:68,column:55}},loc:{start:{line:68,column:68},end:{line:77,column:13}},line:68},"6":{name:"(anonymous_6)",decl:{start:{line:82,column:41},end:{line:82,column:42}},loc:{start:{line:82,column:53},end:{line:93,column:1}},line:82},"7":{name:"(anonymous_7)",decl:{start:{line:88,column:23},end:{line:88,column:24}},loc:{start:{line:88,column:44},end:{line:92,column:5}},line:88},"8":{name:"(anonymous_8)",decl:{start:{line:97,column:35},end:{line:97,column:36}},loc:{start:{line:97,column:52},end:{line:110,column:1}},line:97},"9":{name:"(anonymous_9)",decl:{start:{line:112,column:39},end:{line:112,column:40}},loc:{start:{line:112,column:56},end:{line:137,column:1}},line:112}},branchMap:{"0":{loc:{start:{line:62,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:62,column:8},end:{line:66,column:9}},{start:{line:62,column:8},end:{line:66,column:9}}],line:62},"1":{loc:{start:{line:69,column:16},end:{line:76,column:17}},type:"if",locations:[{start:{line:69,column:16},end:{line:76,column:17}},{start:{line:69,column:16},end:{line:76,column:17}}],line:69}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4cae78338017ab2be60455cbdc8cd1e204d7c0c4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1j093calk0=function(){return actualCoverage;};return actualCoverage;}cov_1j093calk0();var mongoose=(cov_1j093calk0().s[0]++,require("mongoose"));const bcrypt=(cov_1j093calk0().s[1]++,require('bcryptjs'));const password=(cov_1j093calk0().s[2]++,"2032");const jwt=(cov_1j093calk0().s[3]++,require('jsonwebtoken'));var{images,ImagesSchema}=(cov_1j093calk0().s[4]++,require("./images.js"));// images model
cov_1j093calk0().s[5]++;bcrypt.genSalt(10,(err,salt)=>{cov_1j093calk0().f[0]++;cov_1j093calk0().s[6]++;bcrypt.hash(password,salt,(err,hash)=>{cov_1j093calk0().f[1]++;cov_1j093calk0().s[7]++;console.log(hash);});});var ArtistSchema=(cov_1j093calk0().s[8]++,new mongoose.Schema({artistName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,//required:true,
trim:true,minlength:1,unique:true},password:{type:String,required:true,trim:true,minlength:4},about:{type:String,required:true,trim:true,minlength:100},genres:[String],rating:{type:Number,default:-1// artist is not yet rated by the users of our app
},isActive:{type:Boolean,default:false},image:{type:ImagesSchema,required:true}}));cov_1j093calk0().s[9]++;ArtistSchema.statics.findByCredentials=function(email,password){cov_1j093calk0().f[2]++;cov_1j093calk0().s[10]++;console.log("2elgedeed");var artist=(cov_1j093calk0().s[11]++,this);cov_1j093calk0().s[12]++;console.log("2elgedeed2");cov_1j093calk0().s[13]++;console.log(email);cov_1j093calk0().s[14]++;return artist.findOne({email}).then(artist=>{cov_1j093calk0().f[3]++;cov_1j093calk0().s[15]++;console.log("2elgedeed3");cov_1j093calk0().s[16]++;if(!artist){cov_1j093calk0().b[0][0]++;cov_1j093calk0().s[17]++;console.log("not user");cov_1j093calk0().s[18]++;return Promise.reject();}else{cov_1j093calk0().b[0][1]++;}cov_1j093calk0().s[19]++;return new Promise((resolve,reject)=>{cov_1j093calk0().f[4]++;cov_1j093calk0().s[20]++;bcrypt.compare(password,artist.password,(err,res)=>{cov_1j093calk0().f[5]++;cov_1j093calk0().s[21]++;if(res){cov_1j093calk0().b[1][0]++;cov_1j093calk0().s[22]++;console.log("feh3ade");cov_1j093calk0().s[23]++;resolve(artist);}else{cov_1j093calk0().b[1][1]++;cov_1j093calk0().s[24]++;console.log(artist.password);cov_1j093calk0().s[25]++;console.log("Passwordincorrect");cov_1j093calk0().s[26]++;reject();}});});});};cov_1j093calk0().s[27]++;ArtistSchema.methods.generateAuthToken=function(){cov_1j093calk0().f[6]++;var artist=(cov_1j093calk0().s[28]++,this);var access=(cov_1j093calk0().s[29]++,'auth');//console.log('hena');
var token=(cov_1j093calk0().s[30]++,jwt.sign({_id:artist._id.toHexString(),access},'secretkeyforartist').toString());//console.log('henahena');
cov_1j093calk0().s[31]++;return new Promise((resolve,reject)=>{cov_1j093calk0().f[7]++;cov_1j093calk0().s[32]++;//console.log('henahenahena');
resolve(token);});};//////////////////
cov_1j093calk0().s[33]++;ArtistSchema.statics.findByToken=function(token){cov_1j093calk0().f[8]++;var artist=(cov_1j093calk0().s[34]++,this);var decoded;cov_1j093calk0().s[35]++;try{cov_1j093calk0().s[36]++;decoded=jwt.verify(token,'secretkeyforartist');}catch(e){cov_1j093calk0().s[37]++;return Promise.reject();}cov_1j093calk0().s[38]++;return artist.findOne({_id:decoded._id});};cov_1j093calk0().s[39]++;ArtistSchema.statics.ActivateByToken=function(token){cov_1j093calk0().f[9]++;var newArtist=(cov_1j093calk0().s[40]++,this);var decoded;cov_1j093calk0().s[41]++;try{cov_1j093calk0().s[42]++;decoded=jwt.verify(token,'secretkeyforartist');}catch(e){cov_1j093calk0().s[43]++;return Promise.reject();}cov_1j093calk0().s[44]++;return newArtist.findOneAndUpdate({_id:decoded._id},{isActive:true});};var artist=(cov_1j093calk0().s[45]++,mongoose.model('Artists',ArtistSchema));cov_1j093calk0().s[46]++;module.exports={artist};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGlzdHMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiYmNyeXB0IiwicGFzc3dvcmQiLCJqd3QiLCJpbWFnZXMiLCJJbWFnZXNTY2hlbWEiLCJnZW5TYWx0IiwiZXJyIiwic2FsdCIsImhhc2giLCJjb25zb2xlIiwibG9nIiwiQXJ0aXN0U2NoZW1hIiwiU2NoZW1hIiwiYXJ0aXN0TmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInRyaW0iLCJ1bmlxdWUiLCJlbWFpbCIsImFib3V0IiwiZ2VucmVzIiwicmF0aW5nIiwiTnVtYmVyIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiQm9vbGVhbiIsImltYWdlIiwic3RhdGljcyIsImZpbmRCeUNyZWRlbnRpYWxzIiwiYXJ0aXN0IiwiZmluZE9uZSIsInRoZW4iLCJQcm9taXNlIiwicmVqZWN0IiwicmVzb2x2ZSIsImNvbXBhcmUiLCJyZXMiLCJtZXRob2RzIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJhY2Nlc3MiLCJ0b2tlbiIsInNpZ24iLCJfaWQiLCJ0b0hleFN0cmluZyIsInRvU3RyaW5nIiwiZmluZEJ5VG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiZSIsIkFjdGl2YXRlQnlUb2tlbiIsIm5ld0FydGlzdCIsImZpbmRPbmVBbmRVcGRhdGUiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiIyOEtBQUEsR0FBSUEsQ0FBQUEsUUFBUSwwQkFBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUUsQ0FBQUEsUUFBUSwwQkFBRyxNQUFILENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxHQUFHLDBCQUFHSCxPQUFPLENBQUMsY0FBRCxDQUFWLENBQVQsQ0FDQSxHQUFJLENBQUVJLE1BQUYsQ0FBVUMsWUFBViwyQkFBMkJMLE9BQU8sQ0FB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QUcsQ0FBQ0ksT0FBTyxDQUFDSixHQURTLENBQWYsQ0FBUCxDQUlILENBYkQsQyx5QkFlQWpDLFlBQVksQ0FBQ2tCLE9BQWIsQ0FBcUJzQixlQUFyQixDQUF1QyxTQUFVVCxLQUFWLENBQWlCLHlCQUNwRCxHQUFJVSxDQUFBQSxTQUFTLDJCQUFHLElBQUgsQ0FBYixDQUNBLEdBQUlKLENBQUFBLE9BQUosQ0FGb0QseUJBSXBELEdBQ0gsMEJBQ09BLE9BQU8sQ0FBRzlDLEdBQUcsQ0FBQytDLE1BQUosQ0FBV1AsS0FBWCxDQUFtQixvQkFBbkIsQ0FBVixDQUNILENBRUosTUFBT1EsQ0FBUCxDQUNBLDBCQUNNLE1BQU9oQixDQUFBQSxPQUFPLENBQUNDLE1BQVIsRUFBUCxDQUNGLENBWm1ELHlCQWVwRCxNQUFPaUIsQ0FBQUEsU0FBUyxDQUFDQyxnQkFBVixDQUNWLENBQ0lULEdBQUcsQ0FBQ0ksT0FBTyxDQUFDSixHQURoQixDQURVLENBSVYsQ0FDQ2xCLFFBQVEsQ0FBQyxJQURWLENBSlUsQ0FBUCxDQVVILENBekJELENBOEJBLEdBQUlLLENBQUFBLE1BQU0sMkJBQUdqQyxRQUFRLENBQUN3RCxLQUFULENBQWUsU0FBZixDQUEwQjNDLFlBQTFCLENBQUgsQ0FBVixDLHlCQUNBNEMsTUFBTSxDQUFDQyxPQUFQLENBQWUsQ0FBQ3pCLE1BQUQsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbInZhciBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxuY29uc3QgcGFzc3dvcmQgPSBcIjIwMzJcIjtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbnZhciB7IGltYWdlcywgSW1hZ2VzU2NoZW1hIH0gPSByZXF1aXJlKFwiLi9pbWFnZXMuanNcIik7IC8vIGltYWdlcyBtb2RlbFxyXG5cclxuYmNyeXB0LmdlblNhbHQoMTAsIChlcnIsIHNhbHQpID0+IHtcclxuICAgIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0LCAoZXJyLCBoYXNoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaGFzaCk7XHJcbiAgICB9KVxyXG59KVxyXG52YXIgQXJ0aXN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICBhcnRpc3ROYW1lOiB7XHJcbiAgICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGggOiAxICxcclxuICAgICAgICB0cmltIDogdHJ1ZSxcclxuICAgICAgICB1bmlxdWU6dHJ1ZSBcclxuICAgIH0sXHJcbiAgICBlbWFpbDp7XHJcbiAgICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICAgLy9yZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIHRyaW06dHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6MSwgXHJcbiAgICAgICAgdW5pcXVlIDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHBhc3N3b3JkOntcclxuICAgIHR5cGU6U3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgIHRyaW06dHJ1ZSxcclxuICAgIG1pbmxlbmd0aDo0LFxyXG4gICAgfSxcclxuICAgIGFib3V0OntcclxuICAgICAgICB0eXBlOlN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIHRyaW06dHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6MTAwICAgXHJcbiAgICB9LFxyXG4gICAgZ2VucmVzOltTdHJpbmddLFxyXG4gICAgcmF0aW5nOntcclxuICAgICAgICB0eXBlOk51bWJlcixcclxuICAgICAgICBkZWZhdWx0Oi0xICAgLy8gYXJ0aXN0IGlzIG5vdCB5ZXQgcmF0ZWQgYnkgdGhlIHVzZXJzIG9mIG91ciBhcHBcclxuICAgIH0sXHJcblx0ICBpc0FjdGl2ZToge1xyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBpbWFnZToge1xyXG4gICAgICAgIHR5cGU6IEltYWdlc1NjaGVtYSxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfVxyXG4gICAgXHJcbn0pO1xyXG5cclxuQXJ0aXN0U2NoZW1hLnN0YXRpY3MuZmluZEJ5Q3JlZGVudGlhbHMgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIjJlbGdlZGVlZFwiKTtcclxuICAgIHZhciBhcnRpc3QgPSB0aGlzO1xyXG4gICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWQyXCIpO1xyXG4gICAgY29uc29sZS5sb2coZW1haWwpO1xyXG4gICAgcmV0dXJuIGFydGlzdC5maW5kT25lKHsgZW1haWwgfSkudGhlbigoYXJ0aXN0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWQzXCIpO1xyXG4gICAgICAgIGlmICghYXJ0aXN0KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm90IHVzZXJcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGFydGlzdC5wYXNzd29yZCwgKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmZWgzYWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJ0aXN0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJ0aXN0LnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3N3b3JkaW5jb3JyZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5BcnRpc3RTY2hlbWEubWV0aG9kcy5nZW5lcmF0ZUF1dGhUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhcnRpc3QgPSB0aGlzO1xyXG4gICAgdmFyIGFjY2VzcyA9ICdhdXRoJztcclxuICAgIC8vY29uc29sZS5sb2coJ2hlbmEnKTtcclxuICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsgX2lkOiBhcnRpc3QuX2lkLnRvSGV4U3RyaW5nKCksIGFjY2VzcyB9LCAnc2VjcmV0a2V5Zm9yYXJ0aXN0JykudG9TdHJpbmcoKTtcclxuICAgIC8vY29uc29sZS5sb2coJ2hlbmFoZW5hJyk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2hlbmFoZW5haGVuYScpO1xyXG4gICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG5cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vXHJcbkFydGlzdFNjaGVtYS5zdGF0aWNzLmZpbmRCeVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgYXJ0aXN0ID0gdGhpcztcclxuICAgIHZhciBkZWNvZGVkO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4gLCAnc2VjcmV0a2V5Zm9yYXJ0aXN0Jyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcnRpc3QuZmluZE9uZSh7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9KTsgICAgXHJcbiAgICBcclxufTtcclxuXHJcbkFydGlzdFNjaGVtYS5zdGF0aWNzLkFjdGl2YXRlQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIG5ld0FydGlzdCA9IHRoaXM7XHJcbiAgICB2YXIgZGVjb2RlZDtcclxuXHJcbiAgICB0cnkgXHJcblx0e1xyXG4gICAgICAgIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuICwgJ3NlY3JldGtleWZvcmFydGlzdCcpO1xyXG4gICAgfVxyXG5cclxuXHRjYXRjaCAoZSkgXHJcblx0e1xyXG4gICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcbiAgICB9XHJcblx0XHRcdFxyXG5cclxuICAgIHJldHVybiBuZXdBcnRpc3QuZmluZE9uZUFuZFVwZGF0ZShcclxuXHR7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9LFxyXG5cdHtcclxuXHRcdGlzQWN0aXZlOnRydWVcclxuXHR9XHJcblx0KTsgXHJcblx0XHJcbiAgICBcclxufTtcclxuXHJcblxyXG5cclxuXHJcbnZhciBhcnRpc3QgPSBtb25nb29zZS5tb2RlbCgnQXJ0aXN0cycsIEFydGlzdFNjaGVtYSk7XHJcbm1vZHVsZS5leHBvcnRzPXthcnRpc3R9OyJdfQ==