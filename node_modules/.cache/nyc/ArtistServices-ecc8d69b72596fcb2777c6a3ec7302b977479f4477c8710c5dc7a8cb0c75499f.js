function cov_1lk2x9fibn(){var path="C:\\Users\\Dell\\Desktop\\new\\Services\\ArtistServices.js";var hash="21080fe43ee3ce696817cf24f365978995cdefaf";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\new\\Services\\ArtistServices.js",statementMap:{"0":{start:{line:2,column:19},end:{line:2,column:49}},"1":{start:{line:3,column:17},end:{line:3,column:50}},"2":{start:{line:5,column:16},end:{line:5,column:47}},"3":{start:{line:6,column:16},end:{line:6,column:47}},"4":{start:{line:7,column:25},end:{line:9,column:1}},"5":{start:{line:8,column:4},end:{line:8,column:40}},"6":{start:{line:10,column:25},end:{line:12,column:1}},"7":{start:{line:11,column:4},end:{line:11,column:40}},"8":{start:{line:15,column:16},end:{line:30,column:1}},"9":{start:{line:16,column:18},end:{line:22,column:6}},"10":{start:{line:23,column:4},end:{line:23,column:25}},"11":{start:{line:25,column:4},end:{line:29,column:7}},"12":{start:{line:26,column:8},end:{line:26,column:29}},"13":{start:{line:28,column:8},end:{line:28,column:25}},"14":{start:{line:33,column:27},end:{line:38,column:1}},"15":{start:{line:35,column:4},end:{line:35,column:84}},"16":{start:{line:39,column:22},end:{line:48,column:1}},"17":{start:{line:40,column:4},end:{line:40,column:24}},"18":{start:{line:41,column:4},end:{line:47,column:6}},"19":{start:{line:42,column:8},end:{line:42,column:85}},"20":{start:{line:42,column:64},end:{line:42,column:80}},"21":{start:{line:43,column:8},end:{line:43,column:83}},"22":{start:{line:43,column:62},end:{line:43,column:78}},"23":{start:{line:46,column:8},end:{line:46,column:35}},"24":{start:{line:49,column:20},end:{line:59,column:1}},"25":{start:{line:50,column:4},end:{line:50,column:20}},"26":{start:{line:51,column:4},end:{line:51,column:48}},"27":{start:{line:52,column:4},end:{line:56,column:6}},"28":{start:{line:53,column:8},end:{line:53,column:36}},"29":{start:{line:54,column:8},end:{line:54,column:30}},"30":{start:{line:61,column:22},end:{line:84,column:1}},"31":{start:{line:62,column:4},end:{line:62,column:51}},"32":{start:{line:63,column:4},end:{line:82,column:10}},"33":{start:{line:64,column:8},end:{line:64,column:23}},"34":{start:{line:65,column:8},end:{line:65,column:61}},"35":{start:{line:65,column:34},end:{line:65,column:61}},"36":{start:{line:66,column:8},end:{line:66,column:23}},"37":{start:{line:73,column:8},end:{line:73,column:83}},"38":{start:{line:73,column:53},end:{line:73,column:80}},"39":{start:{line:81,column:12},end:{line:81,column:39}},"40":{start:{line:85,column:16},end:{line:98,column:1}},"41":{start:{line:87,column:21},end:{line:95,column:6}},"42":{start:{line:89,column:23},end:{line:89,column:59}},"43":{start:{line:90,column:22},end:{line:90,column:116}},"44":{start:{line:90,column:49},end:{line:90,column:114}},"45":{start:{line:90,column:81},end:{line:90,column:105}},"46":{start:{line:92,column:8},end:{line:92,column:55}},"47":{start:{line:96,column:4},end:{line:96,column:56}},"48":{start:{line:99,column:16},end:{line:111,column:1}},"49":{start:{line:101,column:21},end:{line:108,column:6}},"50":{start:{line:103,column:23},end:{line:103,column:59}},"51":{start:{line:104,column:22},end:{line:104,column:116}},"52":{start:{line:104,column:49},end:{line:104,column:114}},"53":{start:{line:104,column:81},end:{line:104,column:105}},"54":{start:{line:105,column:8},end:{line:105,column:56}},"55":{start:{line:109,column:4},end:{line:109,column:56}},"56":{start:{line:112,column:26},end:{line:117,column:1}},"57":{start:{line:113,column:4},end:{line:113,column:37}},"58":{start:{line:114,column:4},end:{line:114,column:30}},"59":{start:{line:115,column:4},end:{line:115,column:109}},"60":{start:{line:115,column:58},end:{line:115,column:97}},"61":{start:{line:118,column:0},end:{line:125,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:25},end:{line:7,column:26}},loc:{start:{line:7,column:39},end:{line:9,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:25},end:{line:10,column:26}},loc:{start:{line:10,column:39},end:{line:12,column:1}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:64},end:{line:30,column:1}},line:15},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:24},end:{line:25,column:25}},loc:{start:{line:25,column:33},end:{line:27,column:5}},line:25},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:7},end:{line:27,column:8}},loc:{start:{line:27,column:16},end:{line:29,column:5}},line:27},"5":{name:"(anonymous_5)",decl:{start:{line:33,column:27},end:{line:33,column:28}},loc:{start:{line:33,column:51},end:{line:38,column:1}},line:33},"6":{name:"(anonymous_6)",decl:{start:{line:39,column:22},end:{line:39,column:23}},loc:{start:{line:39,column:46},end:{line:48,column:1}},line:39},"7":{name:"(anonymous_7)",decl:{start:{line:41,column:51},end:{line:41,column:52}},loc:{start:{line:41,column:64},end:{line:44,column:5}},line:41},"8":{name:"(anonymous_8)",decl:{start:{line:42,column:45},end:{line:42,column:46}},loc:{start:{line:42,column:62},end:{line:42,column:82}},line:42},"9":{name:"(anonymous_9)",decl:{start:{line:43,column:43},end:{line:43,column:44}},loc:{start:{line:43,column:60},end:{line:43,column:80}},line:43},"10":{name:"(anonymous_10)",decl:{start:{line:45,column:12},end:{line:45,column:13}},loc:{start:{line:45,column:21},end:{line:47,column:5}},line:45},"11":{name:"(anonymous_11)",decl:{start:{line:49,column:20},end:{line:49,column:21}},loc:{start:{line:49,column:34},end:{line:59,column:1}},line:49},"12":{name:"(anonymous_12)",decl:{start:{line:52,column:36},end:{line:52,column:37}},loc:{start:{line:52,column:45},end:{line:56,column:5}},line:52},"13":{name:"(anonymous_13)",decl:{start:{line:61,column:22},end:{line:61,column:23}},loc:{start:{line:61,column:46},end:{line:84,column:1}},line:61},"14":{name:"(anonymous_14)",decl:{start:{line:63,column:51},end:{line:63,column:52}},loc:{start:{line:63,column:70},end:{line:78,column:5}},line:63},"15":{name:"(anonymous_15)",decl:{start:{line:73,column:43},end:{line:73,column:44}},loc:{start:{line:73,column:53},end:{line:73,column:80}},line:73},"16":{name:"(anonymous_16)",decl:{start:{line:80,column:15},end:{line:80,column:16}},loc:{start:{line:80,column:24},end:{line:82,column:9}},line:80},"17":{name:"(anonymous_17)",decl:{start:{line:85,column:16},end:{line:85,column:17}},loc:{start:{line:85,column:41},end:{line:98,column:1}},line:85},"18":{name:"(anonymous_18)",decl:{start:{line:87,column:33},end:{line:87,column:34}},loc:{start:{line:87,column:49},end:{line:95,column:5}},line:87},"19":{name:"(anonymous_19)",decl:{start:{line:90,column:39},end:{line:90,column:40}},loc:{start:{line:90,column:49},end:{line:90,column:114}},line:90},"20":{name:"(anonymous_20)",decl:{start:{line:90,column:50},end:{line:90,column:51}},loc:{start:{line:90,column:81},end:{line:90,column:105}},line:90},"21":{name:"(anonymous_21)",decl:{start:{line:99,column:16},end:{line:99,column:17}},loc:{start:{line:99,column:41},end:{line:111,column:1}},line:99},"22":{name:"(anonymous_22)",decl:{start:{line:101,column:33},end:{line:101,column:34}},loc:{start:{line:101,column:49},end:{line:108,column:5}},line:101},"23":{name:"(anonymous_23)",decl:{start:{line:104,column:39},end:{line:104,column:40}},loc:{start:{line:104,column:49},end:{line:104,column:114}},line:104},"24":{name:"(anonymous_24)",decl:{start:{line:104,column:50},end:{line:104,column:51}},loc:{start:{line:104,column:81},end:{line:104,column:105}},line:104},"25":{name:"(anonymous_25)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:44},end:{line:117,column:1}},line:112},"26":{name:"(anonymous_26)",decl:{start:{line:115,column:13},end:{line:115,column:14}},loc:{start:{line:115,column:58},end:{line:115,column:97}},line:115}},branchMap:{"0":{loc:{start:{line:65,column:8},end:{line:65,column:61}},type:"if",locations:[{start:{line:65,column:8},end:{line:65,column:61}},{start:{line:65,column:8},end:{line:65,column:61}}],line:65}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"21080fe43ee3ce696817cf24f365978995cdefaf"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1lk2x9fibn=function(){return actualCoverage;};return actualCoverage;}cov_1lk2x9fibn();// JavaScript source code
var{mongoose}=(cov_1lk2x9fibn().s[0]++,require("./../db/mongoose.js"));var{artist}=(cov_1lk2x9fibn().s[1]++,require("./../models/artists.js"));//artists model
var{album}=(cov_1lk2x9fibn().s[2]++,require("./../models/album.js"));var{track}=(cov_1lk2x9fibn().s[3]++,require("./../models/track.js"));//track model
cov_1lk2x9fibn().s[4]++;var GetTracksOfArtists=function(id){cov_1lk2x9fibn().f[0]++;cov_1lk2x9fibn().s[5]++;return track.find({artistId:id});};cov_1lk2x9fibn().s[6]++;var GetAlbumsOfArtists=function(id){cov_1lk2x9fibn().f[1]++;cov_1lk2x9fibn().s[7]++;return album.find({artistId:id});};cov_1lk2x9fibn().s[8]++;var addartist=(Email,Password,Artistname,About,Genres)=>{cov_1lk2x9fibn().f[2]++;var artist1=(cov_1lk2x9fibn().s[9]++,new artist({email:Email,password:Password,artistName:Artistname,about:About,genres:Genres}));cov_1lk2x9fibn().s[10]++;console.log('da5al');//SAVING AND RETURNING ID OF THE NEW ARTIST
cov_1lk2x9fibn().s[11]++;artist1.save().then(res=>{cov_1lk2x9fibn().f[3]++;cov_1lk2x9fibn().s[12]++;console.log(res._id);},err=>{cov_1lk2x9fibn().f[4]++;cov_1lk2x9fibn().s[13]++;console.log(err);});};cov_1lk2x9fibn().s[14]++;var GetArtistObjectArray=function(wordtosearch){cov_1lk2x9fibn().f[5]++;cov_1lk2x9fibn().s[15]++;//return artist.find({ artistName: wordtosearch });
return artist.find({'artistName':{'$regex':wordtosearch,$options:'i'}});};cov_1lk2x9fibn().s[16]++;var SearchInArtists=function(wordtosearch){cov_1lk2x9fibn().f[6]++;cov_1lk2x9fibn().s[17]++;console.log("D5al");cov_1lk2x9fibn().s[18]++;return GetArtistObjectArray(wordtosearch).then(artists=>{cov_1lk2x9fibn().f[7]++;cov_1lk2x9fibn().s[19]++;console.log("ijgifjgf"+artists.map(function(value){cov_1lk2x9fibn().f[8]++;cov_1lk2x9fibn().s[20]++;return value._id;}));cov_1lk2x9fibn().s[21]++;return Promise.resolve(artists.map(function(value){cov_1lk2x9fibn().f[9]++;cov_1lk2x9fibn().s[22]++;return value._id;}));}).catch(err=>{cov_1lk2x9fibn().f[10]++;cov_1lk2x9fibn().s[23]++;return Promise.reject(err);});};cov_1lk2x9fibn().s[24]++;var GetArtistById=function(id){cov_1lk2x9fibn().f[11]++;cov_1lk2x9fibn().s[25]++;console.log(id);cov_1lk2x9fibn().s[26]++;console.log(artist.findById(id).artistName);cov_1lk2x9fibn().s[27]++;return artist.findById(id).then(Art=>{cov_1lk2x9fibn().f[12]++;cov_1lk2x9fibn().s[28]++;console.log(Art.artistName);cov_1lk2x9fibn().s[29]++;return Art.artistName;});};cov_1lk2x9fibn().s[30]++;var SearchInArtists=function(wordtosearch){cov_1lk2x9fibn().f[13]++;cov_1lk2x9fibn().s[31]++;console.log("adadadadadadadadadadadadadadada");cov_1lk2x9fibn().s[32]++;return GetArtistObjectArray(wordtosearch).then(async artists=>{cov_1lk2x9fibn().f[14]++;cov_1lk2x9fibn().s[33]++;console.log(1);cov_1lk2x9fibn().s[34]++;if(artists.length===0){cov_1lk2x9fibn().b[0][0]++;cov_1lk2x9fibn().s[35]++;return Promise.resolve([]);}else{cov_1lk2x9fibn().b[0][1]++;}cov_1lk2x9fibn().s[36]++;console.log(2);//const ArtistsWithTracks = await AddTracks(artists);
//const Artists = await AddAlbums(ArtistsWithTracks);
cov_1lk2x9fibn().s[37]++;return Promise.resolve(artists.map(artist=>{cov_1lk2x9fibn().f[15]++;cov_1lk2x9fibn().s[38]++;return GetSimplifiedArtist(artist);}));})// return Promise.resolve(albums);
.catch(err=>{cov_1lk2x9fibn().f[16]++;cov_1lk2x9fibn().s[39]++;return Promise.reject(err);});};cov_1lk2x9fibn().s[40]++;var AddTracks=async function(artists){cov_1lk2x9fibn().f[17]++;const promises=(cov_1lk2x9fibn().s[41]++,artists.map(async artist=>{cov_1lk2x9fibn().f[18]++;const Tracks=(cov_1lk2x9fibn().s[42]++,await GetTracksOfArtists(artist._id));const tracks=(cov_1lk2x9fibn().s[43]++,await Tracks.map(track=>{cov_1lk2x9fibn().f[19]++;cov_1lk2x9fibn().s[44]++;return(({_id,trackName,image})=>{cov_1lk2x9fibn().f[20]++;cov_1lk2x9fibn().s[45]++;return{_id,trackName,image};})(track);}));cov_1lk2x9fibn().s[46]++;return Object.assign(artist,{Tracks:tracks});}));cov_1lk2x9fibn().s[47]++;return Promise.resolve((await Promise.all(promises)));};cov_1lk2x9fibn().s[48]++;var AddAlbums=async function(artists){cov_1lk2x9fibn().f[21]++;const promises=(cov_1lk2x9fibn().s[49]++,artists.map(async artist=>{cov_1lk2x9fibn().f[22]++;const Albums=(cov_1lk2x9fibn().s[50]++,await GetAlbumsOfArtists(artist._id));const albums=(cov_1lk2x9fibn().s[51]++,await Albums.map(album=>{cov_1lk2x9fibn().f[23]++;cov_1lk2x9fibn().s[52]++;return(({_id,albumName,image})=>{cov_1lk2x9fibn().f[24]++;cov_1lk2x9fibn().s[53]++;return{_id,albumName,image};})(album);}));cov_1lk2x9fibn().s[54]++;return Object.assign(artist,{Albums:albums});}));cov_1lk2x9fibn().s[55]++;return Promise.resolve((await Promise.all(promises)));};cov_1lk2x9fibn().s[56]++;var GetSimplifiedArtist=function(artist){cov_1lk2x9fibn().f[25]++;cov_1lk2x9fibn().s[57]++;console.log("beysimplifyartist");cov_1lk2x9fibn().s[58]++;console.log(artist.image);cov_1lk2x9fibn().s[59]++;return(({_id,artistName,image,Albums,Tracks})=>{cov_1lk2x9fibn().f[26]++;cov_1lk2x9fibn().s[60]++;return{_id,artistName,image,Albums,Tracks};})(artist);};cov_1lk2x9fibn().s[61]++;module.exports={addartist,SearchInArtists,artist,GetArtistById,GetArtistObjectArray};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGlzdFNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImFydGlzdCIsImFsYnVtIiwidHJhY2siLCJHZXRUcmFja3NPZkFydGlzdHMiLCJpZCIsImZpbmQiLCJhcnRpc3RJZCIsIkdldEFsYnVtc09mQXJ0aXN0cyIsImFkZGFydGlzdCIsIkVtYWlsIiwiUGFzc3dvcmQiLCJBcnRpc3RuYW1lIiwiQWJvdXQiLCJHZW5yZXMiLCJhcnRpc3QxIiwiZW1haWwiLCJwYXNzd29yZCIsImFydGlzdE5hbWUiLCJhYm91dCIsImdlbnJlcyIsImNvbnNvbGUiLCJsb2ciLCJzYXZlIiwidGhlbiIsInJlcyIsIl9pZCIsImVyciIsIkdldEFydGlzdE9iamVjdEFycmF5Iiwid29yZHRvc2VhcmNoIiwiJG9wdGlvbnMiLCJTZWFyY2hJbkFydGlzdHMiLCJhcnRpc3RzIiwibWFwIiwidmFsdWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhdGNoIiwicmVqZWN0IiwiR2V0QXJ0aXN0QnlJZCIsImZpbmRCeUlkIiwiQXJ0IiwibGVuZ3RoIiwiR2V0U2ltcGxpZmllZEFydGlzdCIsIkFkZFRyYWNrcyIsInByb21pc2VzIiwiVHJhY2tzIiwidHJhY2tzIiwidHJhY2tOYW1lIiwiaW1hZ2UiLCJPYmplY3QiLCJhc3NpZ24iLCJhbGwiLCJBZGRBbGJ1bXMiLCJBbGJ1bXMiLCJhbGJ1bXMiLCJhbGJ1bU5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoieTBSQUFBO0FBQ0EsR0FBSSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMscUJBQUQsQ0FBdEIsQ0FBSixDQUNBLEdBQUksQ0FBRUMsTUFBRiwyQkFBYUQsT0FBTyxDQUFDLHdCQUFELENBQXBCLENBQUosQ0FBcUQ7QUFFckQsR0FBSSxDQUFFRSxLQUFGLDJCQUFZRixPQUFPLENBQUMsc0JBQUQsQ0FBbkIsQ0FBSixDQUNBLEdBQUksQ0FBRUcsS0FBRiwyQkFBWUgsT0FBTyxDQUFD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Q0FBWixDQUh5Qyx5QkFJekMsTUFBT2dELENBQUFBLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjbEQsTUFBZCxDQUFzQixDQUFFcUQsTUFBTSxDQUFFQyxNQUFWLENBQXRCLENBQVAsQ0FHSCxDQVBnQixDQUFILENBQWQsQ0FGcUMseUJBVXJDLE1BQU9wQixDQUFBQSxPQUFPLENBQUNDLE9BQVIsRUFBZ0IsS0FBTUQsQ0FBQUEsT0FBTyxDQUFDaUIsR0FBUixDQUFZUCxRQUFaLENBQXRCLEVBQVAsQ0FFSCxDQVpELEMseUJBYUEsR0FBSUYsQ0FBQUEsbUJBQW1CLENBQUcsU0FBVTFDLE1BQVYsQ0FBa0IsbURBQ3hDb0IsT0FBTyxDQUFDQyxHQUFSLENBQVksbUJBQVosRUFEd0MseUJBRXhDRCxPQUFPLENBQUNDLEdBQVIsQ0FBWXJCLE1BQU0sQ0FBQ2dELEtBQW5CLEVBRndDLHlCQUd4QyxNQUFRLENBQUMsQ0FBQyxDQUFFdkIsR0FBRixDQUFNUixVQUFOLENBQWlCK0IsS0FBakIsQ0FBdUJLLE1BQXZCLENBQThCUixNQUE5QixDQUFELEdBQTZDLDBEQUFFcEIsR0FBRixDQUFPUixVQUFQLENBQW1CK0IsS0FBbkIsQ0FBeUJLLE1BQXpCLENBQWdDUixNQUFoQyxFQUF1QyxDQUFyRixFQUF3RjdDLE1BQXhGLENBQVIsQ0FFSCxDQUxELEMseUJBTUF3RCxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDYmpELFNBRGEsQ0FFYnNCLGVBRmEsQ0FHYjlCLE1BSGEsQ0FJYnNDLGFBSmEsQ0FLYlgsb0JBTGEsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBKYXZhU2NyaXB0IHNvdXJjZSBjb2RlXHJcbnZhciB7IG1vbmdvb3NlIH0gPSByZXF1aXJlKFwiLi8uLi9kYi9tb25nb29zZS5qc1wiKTsgXHJcbnZhciB7IGFydGlzdCB9ID0gcmVxdWlyZShcIi4vLi4vbW9kZWxzL2FydGlzdHMuanNcIik7ICAvL2FydGlzdHMgbW9kZWxcclxuXHJcbnZhciB7IGFsYnVtIH0gPSByZXF1aXJlKFwiLi8uLi9tb2RlbHMvYWxidW0uanNcIik7XHJcbnZhciB7IHRyYWNrIH0gPSByZXF1aXJlKFwiLi8uLi9tb2RlbHMvdHJhY2suanNcIik7Ly90cmFjayBtb2RlbFxyXG52YXIgR2V0VHJhY2tzT2ZBcnRpc3RzID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICByZXR1cm4gdHJhY2suZmluZCh7IGFydGlzdElkOiBpZCB9KTtcclxufVxyXG52YXIgR2V0QWxidW1zT2ZBcnRpc3RzID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICByZXR1cm4gYWxidW0uZmluZCh7IGFydGlzdElkOiBpZCB9KTtcclxufVxyXG5cclxuXHJcbnZhciBhZGRhcnRpc3QgPSAoRW1haWwsIFBhc3N3b3JkLCBBcnRpc3RuYW1lLCBBYm91dCwgR2VucmVzKSA9PiB7XHJcbiAgICB2YXIgYXJ0aXN0MSA9IG5ldyBhcnRpc3Qoe1xyXG4gICAgICAgIGVtYWlsOiBFbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogUGFzc3dvcmQsXHJcbiAgICAgICAgYXJ0aXN0TmFtZTogQXJ0aXN0bmFtZSxcclxuICAgICAgICBhYm91dDogQWJvdXQsXHJcbiAgICAgICAgZ2VucmVzOiBHZW5yZXNcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coJ2RhNWFsJyk7XHJcbiAgICAvL1NBVklORyBBTkQgUkVUVVJOSU5HIElEIE9GIFRIRSBORVcgQVJUSVNUXHJcbiAgICBhcnRpc3QxLnNhdmUoKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMuX2lkKTtcclxuICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG52YXIgR2V0QXJ0aXN0T2JqZWN0QXJyYXkgPSBmdW5jdGlvbiAod29yZHRvc2VhcmNoKSB7XHJcbiAgICAvL3JldHVybiBhcnRpc3QuZmluZCh7IGFydGlzdE5hbWU6IHdvcmR0b3NlYXJjaCB9KTtcclxuICAgIHJldHVybiBhcnRpc3QuZmluZCh7ICdhcnRpc3ROYW1lJzogeyAnJHJlZ2V4Jzogd29yZHRvc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSk7XHJcblxyXG4gICAgXHJcbn1cclxudmFyIFNlYXJjaEluQXJ0aXN0cyA9IGZ1bmN0aW9uICh3b3JkdG9zZWFyY2gpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiRDVhbFwiKTtcclxuICAgIHJldHVybiBHZXRBcnRpc3RPYmplY3RBcnJheSh3b3JkdG9zZWFyY2gpLnRoZW4oKGFydGlzdHMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImlqZ2lmamdmXCIgKyBhcnRpc3RzLm1hcChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlLl9pZCB9KSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhcnRpc3RzLm1hcChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlLl9pZCB9KSk7XHJcbiAgICB9XHJcbiAgICApLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcclxuICAgIH0pXHJcbn1cclxudmFyIEdldEFydGlzdEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgIGNvbnNvbGUubG9nKGlkKTtcclxuICAgIGNvbnNvbGUubG9nKGFydGlzdC5maW5kQnlJZChpZCkuYXJ0aXN0TmFtZSk7XHJcbiAgICByZXR1cm4gYXJ0aXN0LmZpbmRCeUlkKGlkKS50aGVuKChBcnQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhBcnQuYXJ0aXN0TmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIEFydC5hcnRpc3ROYW1lO1xyXG5cclxuICAgIH0pXHJcbiAgICBcclxuXHJcbn1cclxuXHJcbnZhciBTZWFyY2hJbkFydGlzdHMgPSBmdW5jdGlvbiAod29yZHRvc2VhcmNoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImFkYWRhZGFkYWRhZGFkYWRhZGFkYWRhZGFkYWRhZGFcIik7XHJcbiAgICByZXR1cm4gR2V0QXJ0aXN0T2JqZWN0QXJyYXkod29yZHRvc2VhcmNoKS50aGVuKGFzeW5jIChhcnRpc3RzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coMSk7XHJcbiAgICAgICAgaWYgKGFydGlzdHMubGVuZ3RoID09PSAwKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuICAgICAgICBjb25zb2xlLmxvZygyKTtcclxuXHJcbiAgICAgICAgLy9jb25zdCBBcnRpc3RzV2l0aFRyYWNrcyA9IGF3YWl0IEFkZFRyYWNrcyhhcnRpc3RzKTtcclxuXHJcbiAgICAgICAgLy9jb25zdCBBcnRpc3RzID0gYXdhaXQgQWRkQWxidW1zKEFydGlzdHNXaXRoVHJhY2tzKTtcclxuXHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXJ0aXN0cy5tYXAoYXJ0aXN0ID0+IEdldFNpbXBsaWZpZWRBcnRpc3QoYXJ0aXN0KSkpO1xyXG5cclxuXHJcblxyXG5cclxuICAgIH0pXHJcbiAgICAgICAgLy8gcmV0dXJuIFByb21pc2UucmVzb2x2ZShhbGJ1bXMpO1xyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pXHJcblxyXG59XHJcbnZhciBBZGRUcmFja3MgPSBhc3luYyBmdW5jdGlvbiAoYXJ0aXN0cykge1xyXG5cclxuICAgIGNvbnN0IHByb21pc2VzID0gYXJ0aXN0cy5tYXAoYXN5bmMgYXJ0aXN0ID0+IHtcclxuXHJcbiAgICAgICAgY29uc3QgVHJhY2tzID0gYXdhaXQgR2V0VHJhY2tzT2ZBcnRpc3RzKGFydGlzdC5faWQpO1xyXG4gICAgICAgIGNvbnN0IHRyYWNrcz0gYXdhaXQgVHJhY2tzLm1hcCh0cmFjayA9PiAoKCh7IF9pZCwgdHJhY2tOYW1lLCBpbWFnZX0pID0+ICh7IF9pZCwgdHJhY2tOYW1lLCBpbWFnZX0pKSh0cmFjaykpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYXJ0aXN0LCB7IFRyYWNrczp0cmFja3MgfSlcclxuXHJcblxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKSk7XHJcblxyXG59XHJcbnZhciBBZGRBbGJ1bXMgPSBhc3luYyBmdW5jdGlvbiAoYXJ0aXN0cykge1xyXG5cclxuICAgIGNvbnN0IHByb21pc2VzID0gYXJ0aXN0cy5tYXAoYXN5bmMgYXJ0aXN0ID0+IHtcclxuXHJcbiAgICAgICAgY29uc3QgQWxidW1zID0gYXdhaXQgR2V0QWxidW1zT2ZBcnRpc3RzKGFydGlzdC5faWQpO1xyXG4gICAgICAgIGNvbnN0IGFsYnVtcz0gYXdhaXQgQWxidW1zLm1hcChhbGJ1bSA9PiAoKCh7IF9pZCwgYWxidW1OYW1lLCBpbWFnZX0pID0+ICh7IF9pZCwgYWxidW1OYW1lLCBpbWFnZX0pKShhbGJ1bSkpKTtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihhcnRpc3QsIHsgQWxidW1zOiBhbGJ1bXMgfSlcclxuXHJcblxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKSk7XHJcblxyXG59XHJcbnZhciBHZXRTaW1wbGlmaWVkQXJ0aXN0ID0gZnVuY3Rpb24gKGFydGlzdCkge1xyXG4gICAgY29uc29sZS5sb2coXCJiZXlzaW1wbGlmeWFydGlzdFwiKTtcclxuICAgIGNvbnNvbGUubG9nKGFydGlzdC5pbWFnZSk7XHJcbiAgICByZXR1cm4gKCgoeyBfaWQsYXJ0aXN0TmFtZSxpbWFnZSxBbGJ1bXMsVHJhY2tzIH0pID0+ICh7IF9pZCwgYXJ0aXN0TmFtZSwgaW1hZ2UsQWxidW1zLFRyYWNrc30pKShhcnRpc3QpKTtcclxuXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBhZGRhcnRpc3QsXHJcbiAgICBTZWFyY2hJbkFydGlzdHMsXHJcbiAgICBhcnRpc3QsXHJcbiAgICBHZXRBcnRpc3RCeUlkLFxyXG4gICAgR2V0QXJ0aXN0T2JqZWN0QXJyYXlcclxuXHJcbn1cclxuXHJcbiJdfQ==