function cov_2inndilki1(){var path="C:\\Users\\Dell\\Desktop\\new\\Controllers\\SearchController.js";var hash="8eb3159886a5abe4e16392a42ea69a658858818d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\new\\Controllers\\SearchController.js",statementMap:{"0":{start:{line:2,column:19},end:{line:2,column:49}},"1":{start:{line:4,column:14},end:{line:4,column:32}},"2":{start:{line:5,column:15},end:{line:5,column:24}},"3":{start:{line:7,column:8},end:{line:7,column:25}},"4":{start:{line:10,column:12},end:{line:10,column:35}},"5":{start:{line:15,column:22},end:{line:15,column:60}},"6":{start:{line:16,column:23},end:{line:16,column:62}},"7":{start:{line:17,column:22},end:{line:17,column:60}},"8":{start:{line:18,column:25},end:{line:18,column:66}},"9":{start:{line:19,column:21},end:{line:19,column:58}},"10":{start:{line:22,column:29},end:{line:22,column:75}},"11":{start:{line:25,column:0},end:{line:49,column:6}},"12":{start:{line:26,column:31},end:{line:26,column:45}},"13":{start:{line:27,column:12},end:{line:27,column:38}},"14":{start:{line:29,column:12},end:{line:46,column:60}},"15":{start:{line:30,column:16},end:{line:44,column:64}},"16":{start:{line:31,column:20},end:{line:43,column:68}},"17":{start:{line:32,column:24},end:{line:32,column:56}},"18":{start:{line:33,column:24},end:{line:41,column:72}},"19":{start:{line:34,column:28},end:{line:34,column:59}},"20":{start:{line:36,column:28},end:{line:40,column:77}},"21":{start:{line:37,column:32},end:{line:37,column:67}},"22":{start:{line:39,column:33},end:{line:39,column:128}},"23":{start:{line:40,column:49},end:{line:40,column:74}},"24":{start:{line:41,column:44},end:{line:41,column:69}},"25":{start:{line:43,column:40},end:{line:43,column:65}},"26":{start:{line:44,column:36},end:{line:44,column:61}},"27":{start:{line:46,column:32},end:{line:46,column:57}},"28":{start:{line:116,column:4},end:{line:116,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:35},end:{line:49,column:5}},line:25},"1":{name:"(anonymous_1)",decl:{start:{line:29,column:62},end:{line:29,column:63}},loc:{start:{line:29,column:75},end:{line:46,column:13}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:30,column:72},end:{line:30,column:73}},loc:{start:{line:30,column:84},end:{line:44,column:17}},line:30},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:77},end:{line:31,column:78}},loc:{start:{line:31,column:89},end:{line:43,column:21}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:70},end:{line:33,column:71}},loc:{start:{line:33,column:81},end:{line:41,column:25}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:36,column:82},end:{line:36,column:83}},loc:{start:{line:36,column:97},end:{line:40,column:30}},line:36},"6":{name:"(anonymous_6)",decl:{start:{line:40,column:38},end:{line:40,column:39}},loc:{start:{line:40,column:47},end:{line:40,column:76}},line:40},"7":{name:"(anonymous_7)",decl:{start:{line:41,column:33},end:{line:41,column:34}},loc:{start:{line:41,column:42},end:{line:41,column:71}},line:41},"8":{name:"(anonymous_8)",decl:{start:{line:43,column:29},end:{line:43,column:30}},loc:{start:{line:43,column:38},end:{line:43,column:67}},line:43},"9":{name:"(anonymous_9)",decl:{start:{line:44,column:25},end:{line:44,column:26}},loc:{start:{line:44,column:34},end:{line:44,column:63}},line:44},"10":{name:"(anonymous_10)",decl:{start:{line:46,column:21},end:{line:46,column:22}},loc:{start:{line:46,column:30},end:{line:46,column:59}},line:46}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8eb3159886a5abe4e16392a42ea69a658858818d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2inndilki1=function(){return actualCoverage;};return actualCoverage;}cov_2inndilki1();// JavaScript source code
var{mongoose}=(cov_2inndilki1().s[0]++,require("./../db/mongoose.js"));//var bodyparser = require('body-parser');
var express=(cov_2inndilki1().s[1]++,require('express'));const router=(cov_2inndilki1().s[2]++,express());var _=(cov_2inndilki1().s[3]++,require('lodash'));//var rand=Math.floor((Math.random() * 100) + 54); //random confirmation code
const jwt=(cov_2inndilki1().s[4]++,require('jsonwebtoken'));/*var { album } = require("../models/album.js");
var { artist } = require("../models/artists.js");
const { track } = require("./../models/track");*/const trackservices=(cov_2inndilki1().s[5]++,require("./../Services/TrackServices"));const artistservices=(cov_2inndilki1().s[6]++,require("./../Services/ArtistServices"));const albumservices=(cov_2inndilki1().s[7]++,require("./../Services/AlbumServices"));const playlistservices=(cov_2inndilki1().s[8]++,require("./../Services/PlaylistServices"));const userservices=(cov_2inndilki1().s[9]++,require("./../Services/UserServices"));var AuthenticationServices=(cov_2inndilki1().s[10]++,require("./../Services/AuthenticationService"));//{ $regex: "s", $options: "i" }
//AuthenticationServices.AuthenticateAllUsers
cov_2inndilki1().s[11]++;router.get('/Search',(req,res)=>{cov_2inndilki1().f[0]++;var wordtosearch=(cov_2inndilki1().s[12]++,req.query.word);cov_2inndilki1().s[13]++;console.log(wordtosearch);//Return array of tracks
cov_2inndilki1().s[14]++;artistservices.SearchInArtists(wordtosearch).then(Artists=>{cov_2inndilki1().f[1]++;cov_2inndilki1().s[15]++;albumservices.SearchInAlbums(wordtosearch,Artists).then(Albums=>{cov_2inndilki1().f[2]++;cov_2inndilki1().s[16]++;trackservices.SearchInTracks(wordtosearch,Artists).then(Tracks=>{cov_2inndilki1().f[3]++;cov_2inndilki1().s[17]++;console.log("5alas 2el tracks");cov_2inndilki1().s[18]++;userservices.SearchInUsers(wordtosearch).then(Users=>{cov_2inndilki1().f[4]++;cov_2inndilki1().s[19]++;console.log("5alas 2el Users");cov_2inndilki1().s[20]++;playlistservices.SearchInPlaylists(wordtosearch).then(Playlists=>{cov_2inndilki1().f[5]++;cov_2inndilki1().s[21]++;console.log("5alas 2el Playlists");cov_2inndilki1().s[22]++;res.send({Artists:Artists,Albums:Albums,Tracks:Tracks,Playlists:Playlists,Users:Users});}).catch(err=>{cov_2inndilki1().f[6]++;cov_2inndilki1().s[23]++;res.status(400).send(err);});}).catch(err=>{cov_2inndilki1().f[7]++;cov_2inndilki1().s[24]++;res.status(400).send(err);});}).catch(err=>{cov_2inndilki1().f[8]++;cov_2inndilki1().s[25]++;res.status(400).send(err);});}).catch(err=>{cov_2inndilki1().f[9]++;cov_2inndilki1().s[26]++;res.status(400).send(err);});}).catch(err=>{cov_2inndilki1().f[10]++;cov_2inndilki1().s[27]++;res.status(400).send(err);});});// Get User Profile Request
/*app.get('/Search', (req, res) => {
    var token = req.header('x-auth');
    try {
        jwt.verify(token, 'secretkeyforuser')

        var wordtosearch = req.query.word;
        console.log(wordtosearch);
        //Return array of tracks
        artistservices.SearchInArtists(wordtosearch).then((Artists) => {
            albumservices.SearchInAlbums(wordtosearch).then((Albums) => {
                trackservices.SearchInTracks(wordtosearch).then((Tracks) => {
                    console.log("fkdsffdfkdlsfksl");
                    res.send({ artists: Artists, Albums: Albums, Tracks: Tracks });
                }).catch((err) => { res.status(404).send(err) })
            }).catch((err) => { res.status(404).send(err) })

        }).catch((err) => { res.status(404).send(err) })
    }s
    catch (error) {
        console.log("enta hena ezayyyy");
        try {
            console.log("da5a5aalapd");
            jwt.verify(token, 'secretkeyforartist')
            var wordtosearch = req.query.word;
            console.log(wordtosearch);
            //Return array of tracks
            artistservices.SearchInArtists(wordtosearch).then((Artists) => {
                albumservices.SearchInAlbums(wordtosearch).then((Albums) => {
                    trackservices.SearchInTracks(wordtosearch).then((Tracks) => {
                        console.log("fkdsffdfkdlsfksl");
                        res.send({ artists: Artists, Albums: Albums, Tracks: Tracks });
                    }).catch((err) => { res.status(400).send(err) })
                }).catch((err) => { res.status(400).send(err) })

            }).catch((err) => { res.status(400).send(err) })
        }
        catch (err) {
            console.log(err);
            return res.status(401).send("Token is not valid");
        }
    } 
    })   */ /* */ /* try {
        console.log({ artists: artistservices.SearchInArtists(wordtosearch), albums: albumservices.SearchInAlbums(wordtosearch), tracks: trackservices.SearchInTracks(wordtosearch) });
        res.send("")
    }
    catch (err) { res.status(404).send(err) }
    console.log("taba3");
    
   // res.send("dlfksdl");
  /*  track.find({ trackName: wordtosearch }).then((err, tracks) => {
        console.log(tracks);
        var trackids = tracks.map(function (value) { return value._id });
        res.status(200).send(tracksids);

    }).catch((err) => {
        console.log(err);
        res.status(404).send(err);

    })*/cov_2inndilki1().s[28]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlYXJjaENvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiZXhwcmVzcyIsInJvdXRlciIsIl8iLCJqd3QiLCJ0cmFja3NlcnZpY2VzIiwiYXJ0aXN0c2VydmljZXMiLCJhbGJ1bXNlcnZpY2VzIiwicGxheWxpc3RzZXJ2aWNlcyIsInVzZXJzZXJ2aWNlcyIsIkF1dGhlbnRpY2F0aW9uU2VydmljZXMiLCJnZXQiLCJyZXEiLCJyZXMiLCJ3b3JkdG9zZWFyY2giLCJxdWVyeSIsIndvcmQiLCJjb25zb2xlIiwibG9nIiwiU2VhcmNoSW5BcnRpc3RzIiwidGhlbiIsIkFydGlzdHMiLCJTZWFyY2hJbkFsYnVtcyIsIkFsYnVtcyIsIlNlYXJjaEluVHJhY2tzIiwiVHJhY2tzIiwiU2VhcmNoSW5Vc2VycyIsIlVzZXJzIiwiU2VhcmNoSW5QbGF5bGlzdHMiLCJQbGF5bGlzdHMiLCJzZW5kIiwiY2F0Y2giLCJlcnIiLCJzdGF0dXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoic29JQUFBO0FBQ0EsR0FBSSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMscUJBQUQsQ0FBdEIsQ0FBSixDQUNBO0FBQ0EsR0FBSUMsQ0FBQUEsT0FBTywwQkFBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFYLENBQ0EsS0FBTUUsQ0FBQUEsTUFBTSwwQkFBR0QsT0FBTyxFQUFWLENBQVosQ0FFQSxHQUFJRSxDQUFBQSxDQUFDLDBCQUFHSCxPQUFPLENBQUMsUUFBRCxDQUFWLENBQUwsQ0FDQTtBQUVBLEtBQU1JLENBQUFBLEdBQUcsMEJBQUdKLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUVBOztpREFHQSxLQUFNSyxDQUFBQSxhQUFhLDBCQUFHTCxPQUFPLENBQUMsNkJBQUQsQ0FBVixDQUFuQixDQUNBLEtBQU1NLENBQUFBLGNBQWMsMEJBQUdOLE9BQU8sQ0FBQyw4QkFBRCxDQUFWLENBQXBCLENBQ0EsS0FBTU8sQ0FBQUEsYUFBYSwwQkFBR1AsT0FBTyxDQUFDLDZCQUFELENBQVYsQ0FBbkIsQ0FDQSxLQUFNUSxDQUFBQSxnQkFBZ0IsMEJBQUdSLE9BQU8sQ0FBQyxnQ0FBRCxDQUFWLENBQXRCLENBQ0EsS0FBTVMsQ0FBQUEsWUFBWSwwQkFBR1QsT0FBTyxDQUFDLDRCQUFELENBQVYsQ0FBbEIsQ0FHQSxHQUFJVSxDQUFBQSxzQkFBc0IsMkJBQUdWLE9BQU8sQ0FBQyxxQ0FBRCxDQUFWLENBQTFCLENBQ0E7QUFDQTt5QkFDQUUsTUFBTSxDQUFDUyxHQUFQLENBQVcsU0FBWCxDQUFxQixDQUFDQyxHQUFELENBQU1DLEdBQU4sR0FBYyx5QkFDdkIsR0FBSUMsQ0FBQUEsWUFBWSwyQkFBR0YsR0FBRyxDQUFDRyxLQUFKLENBQVVDLElBQWIsQ0FBaEIsQ0FEdUIseUJBRXZCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUosWUFBWixFQUNBO0FBSHVCLHlCQUl2QlIsY0FBYyxDQUFDYSxlQUFmLENBQStCTCxZQUEvQixFQUE2Q00sSUFBN0MsQ0FBbURDLE9BQUQsRUFBYSxrREFDM0RkLGFBQWEsQ0FBQ2UsY0FBZCxDQUE2QlIsWUFBN0IsQ0FBMENPLE9BQTFDLEVBQW1ERCxJQUFuRCxDQUF5REcsTUFBRCxFQUFZLGtEQUNoRWxCLGFBQWEsQ0FBQ21CLGNBQWQsQ0FBNkJWLFlBQTdCLENBQTJDTyxPQUEzQyxFQUFvREQsSUFBcEQsQ0FBMERLLE1BQUQsRUFBWSxrREFDakVSLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtCQUFaLEVBRGlFLHlCQUVqRVQsWUFBWSxDQUFDaUIsYUFBYixDQUEyQlosWUFBM0IsRUFBeUNNLElBQXpDLENBQStDTyxLQUFELEVBQVcsa0RBQ3JEVixPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQkFBWixFQURxRCx5QkFHckRWLGdCQUFnQixDQUFDb0IsaUJBQWpCLENBQW1DZCxZQUFuQyxFQUFpRE0sSUFBakQsQ0FBdURTLFNBQUQsRUFBZSxrREFDakVaLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHFCQUFaLEVBRGlFLHlCQUdoRUwsR0FBRyxDQUFDaUIsSUFBSixDQUFTLENBQUVULE9BQU8sQ0FBRUEsT0FBWCxDQUFvQkUsTUFBTSxDQUFFQSxNQUE1QixDQUFvQ0UsTUFBTSxDQUFFQSxNQUE1QyxDQUFtREksU0FBUyxDQUFDQSxTQUE3RCxDQUF1RUYsS0FBSyxDQUFDQSxLQUE3RSxDQUFULEVBQ0gsQ0FKRixFQUlJSSxLQUpKLENBSVdDLEdBQUQsRUFBUyxrREFBRW5CLEdBQUcsQ0FBQ29CLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQkUsR0FBckIsRUFBMkIsQ0FKaEQsRUFLSCxDQVJELEVBUUdELEtBUkgsQ0FRVUMsR0FBRCxFQUFTLGtEQUFFbkIsR0FBRyxDQUFDb0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JILElBQWhCLENBQXFCRSxHQUFyQixFQUEyQixDQVIvQyxFQVVILENBWkQsRUFZR0QsS0FaSCxDQVlVQyxHQUFELEVBQVMsa0RBQUVuQixHQUFHLENBQUNvQixNQUFKLENBQVcsR0FBWCxFQUFnQkgsSUFBaEIsQ0FBcUJFLEdBQXJCLEVBQTJCLENBWi9DLEVBYUgsQ0FkRCxFQWNHRCxLQWRILENBY1VDLEdBQUQsRUFBUyxrREFBRW5CLEdBQUcsQ0FBQ29CLE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQkUsR0FBckIsRUFBMkIsQ0FkL0MsRUFnQkgsQ0FqQkQsRUFpQkdELEtBakJILENBaUJVQyxHQUFELEVBQVMsbURBQUVuQixHQUFHLENBQUNvQixNQUFKLENBQVcsR0FBWCxFQUFnQkgsSUFBaEIsQ0FBcUJFLEdBQXJCLEVBQTJCLENBakIvQyxFQW9CUCxDQXhCTCxFQXlCQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQTJDQyxLLENBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQXNCRkUsTUFBTSxDQUFDQyxPQUFQLENBQWVqQyxNQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSmF2YVNjcmlwdCBzb3VyY2UgY29kZVxyXG52YXIgeyBtb25nb29zZSB9ID0gcmVxdWlyZShcIi4vLi4vZGIvbW9uZ29vc2UuanNcIik7XHJcbi8vdmFyIGJvZHlwYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcygpO1xyXG5cclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuLy92YXIgcmFuZD1NYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTAwKSArIDU0KTsgLy9yYW5kb20gY29uZmlybWF0aW9uIGNvZGVcclxuXHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5cclxuLyp2YXIgeyBhbGJ1bSB9ID0gcmVxdWlyZShcIi4uL21vZGVscy9hbGJ1bS5qc1wiKTtcclxudmFyIHsgYXJ0aXN0IH0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL2FydGlzdHMuanNcIik7XHJcbmNvbnN0IHsgdHJhY2sgfSA9IHJlcXVpcmUoXCIuLy4uL21vZGVscy90cmFja1wiKTsqL1xyXG5jb25zdCB0cmFja3NlcnZpY2VzID0gcmVxdWlyZShcIi4vLi4vU2VydmljZXMvVHJhY2tTZXJ2aWNlc1wiKTtcclxuY29uc3QgYXJ0aXN0c2VydmljZXMgPSByZXF1aXJlKFwiLi8uLi9TZXJ2aWNlcy9BcnRpc3RTZXJ2aWNlc1wiKTtcclxuY29uc3QgYWxidW1zZXJ2aWNlcyA9IHJlcXVpcmUoXCIuLy4uL1NlcnZpY2VzL0FsYnVtU2VydmljZXNcIik7XHJcbmNvbnN0IHBsYXlsaXN0c2VydmljZXMgPSByZXF1aXJlKFwiLi8uLi9TZXJ2aWNlcy9QbGF5bGlzdFNlcnZpY2VzXCIpO1xyXG5jb25zdCB1c2Vyc2VydmljZXMgPSByZXF1aXJlKFwiLi8uLi9TZXJ2aWNlcy9Vc2VyU2VydmljZXNcIik7XHJcblxyXG5cclxudmFyIEF1dGhlbnRpY2F0aW9uU2VydmljZXMgPSByZXF1aXJlKFwiLi8uLi9TZXJ2aWNlcy9BdXRoZW50aWNhdGlvblNlcnZpY2VcIik7XHJcbi8veyAkcmVnZXg6IFwic1wiLCAkb3B0aW9uczogXCJpXCIgfVxyXG4vL0F1dGhlbnRpY2F0aW9uU2VydmljZXMuQXV0aGVudGljYXRlQWxsVXNlcnNcclxucm91dGVyLmdldCgnL1NlYXJjaCcsKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciB3b3JkdG9zZWFyY2ggPSByZXEucXVlcnkud29yZDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cod29yZHRvc2VhcmNoKTtcclxuICAgICAgICAgICAgLy9SZXR1cm4gYXJyYXkgb2YgdHJhY2tzXHJcbiAgICAgICAgICAgIGFydGlzdHNlcnZpY2VzLlNlYXJjaEluQXJ0aXN0cyh3b3JkdG9zZWFyY2gpLnRoZW4oKEFydGlzdHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGFsYnVtc2VydmljZXMuU2VhcmNoSW5BbGJ1bXMod29yZHRvc2VhcmNoLEFydGlzdHMpLnRoZW4oKEFsYnVtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrc2VydmljZXMuU2VhcmNoSW5UcmFja3Mod29yZHRvc2VhcmNoLCBBcnRpc3RzKS50aGVuKChUcmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI1YWxhcyAyZWwgdHJhY2tzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2Vyc2VydmljZXMuU2VhcmNoSW5Vc2Vycyh3b3JkdG9zZWFyY2gpLnRoZW4oKFVzZXJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjVhbGFzIDJlbCBVc2Vyc1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdHNlcnZpY2VzLlNlYXJjaEluUGxheWxpc3RzKHdvcmR0b3NlYXJjaCkudGhlbigoUGxheWxpc3RzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI1YWxhcyAyZWwgUGxheWxpc3RzXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBBcnRpc3RzOiBBcnRpc3RzLCBBbGJ1bXM6IEFsYnVtcywgVHJhY2tzOiBUcmFja3MsUGxheWxpc3RzOlBsYXlsaXN0cyxVc2VyczpVc2VycyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycikgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4geyByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsgcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyKSB9KVxyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4geyByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpIH0pXHJcblxyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycikgfSlcclxuICAgICBcclxuICBcclxuICAgIH0pICAgXHJcbi8vIEdldCBVc2VyIFByb2ZpbGUgUmVxdWVzdFxyXG4vKmFwcC5nZXQoJy9TZWFyY2gnLCAocmVxLCByZXMpID0+IHtcclxuICAgIHZhciB0b2tlbiA9IHJlcS5oZWFkZXIoJ3gtYXV0aCcpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCAnc2VjcmV0a2V5Zm9ydXNlcicpXHJcblxyXG4gICAgICAgIHZhciB3b3JkdG9zZWFyY2ggPSByZXEucXVlcnkud29yZDtcclxuICAgICAgICBjb25zb2xlLmxvZyh3b3JkdG9zZWFyY2gpO1xyXG4gICAgICAgIC8vUmV0dXJuIGFycmF5IG9mIHRyYWNrc1xyXG4gICAgICAgIGFydGlzdHNlcnZpY2VzLlNlYXJjaEluQXJ0aXN0cyh3b3JkdG9zZWFyY2gpLnRoZW4oKEFydGlzdHMpID0+IHtcclxuICAgICAgICAgICAgYWxidW1zZXJ2aWNlcy5TZWFyY2hJbkFsYnVtcyh3b3JkdG9zZWFyY2gpLnRoZW4oKEFsYnVtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tzZXJ2aWNlcy5TZWFyY2hJblRyYWNrcyh3b3JkdG9zZWFyY2gpLnRoZW4oKFRyYWNrcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmtkc2ZmZGZrZGxzZmtzbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7IGFydGlzdHM6IEFydGlzdHMsIEFsYnVtczogQWxidW1zLCBUcmFja3M6IFRyYWNrcyB9KTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsgcmVzLnN0YXR1cyg0MDQpLnNlbmQoZXJyKSB9KVxyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7IHJlcy5zdGF0dXMoNDA0KS5zZW5kKGVycikgfSlcclxuXHJcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4geyByZXMuc3RhdHVzKDQwNCkuc2VuZChlcnIpIH0pXHJcbiAgICB9c1xyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJlbnRhIGhlbmEgZXpheXl5eVwiKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRhNWE1YWFsYXBkXCIpO1xyXG4gICAgICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCAnc2VjcmV0a2V5Zm9yYXJ0aXN0JylcclxuICAgICAgICAgICAgdmFyIHdvcmR0b3NlYXJjaCA9IHJlcS5xdWVyeS53b3JkO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3b3JkdG9zZWFyY2gpO1xyXG4gICAgICAgICAgICAvL1JldHVybiBhcnJheSBvZiB0cmFja3NcclxuICAgICAgICAgICAgYXJ0aXN0c2VydmljZXMuU2VhcmNoSW5BcnRpc3RzKHdvcmR0b3NlYXJjaCkudGhlbigoQXJ0aXN0cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxidW1zZXJ2aWNlcy5TZWFyY2hJbkFsYnVtcyh3b3JkdG9zZWFyY2gpLnRoZW4oKEFsYnVtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrc2VydmljZXMuU2VhcmNoSW5UcmFja3Mod29yZHRvc2VhcmNoKS50aGVuKChUcmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJma2RzZmZkZmtkbHNma3NsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7IGFydGlzdHM6IEFydGlzdHMsIEFsYnVtczogQWxidW1zLCBUcmFja3M6IFRyYWNrcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycikgfSlcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsgcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyKSB9KVxyXG5cclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4geyByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKFwiVG9rZW4gaXMgbm90IHZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0gXHJcbiAgICB9KSAgICovXHJcblxyXG4gLyogKi8vKiB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHsgYXJ0aXN0czogYXJ0aXN0c2VydmljZXMuU2VhcmNoSW5BcnRpc3RzKHdvcmR0b3NlYXJjaCksIGFsYnVtczogYWxidW1zZXJ2aWNlcy5TZWFyY2hJbkFsYnVtcyh3b3JkdG9zZWFyY2gpLCB0cmFja3M6IHRyYWNrc2VydmljZXMuU2VhcmNoSW5UcmFja3Mod29yZHRvc2VhcmNoKSB9KTtcclxuICAgICAgICByZXMuc2VuZChcIlwiKVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikgeyByZXMuc3RhdHVzKDQwNCkuc2VuZChlcnIpIH1cclxuICAgIGNvbnNvbGUubG9nKFwidGFiYTNcIik7XHJcbiAgICBcclxuICAgLy8gcmVzLnNlbmQoXCJkbGZrc2RsXCIpO1xyXG4gIC8qICB0cmFjay5maW5kKHsgdHJhY2tOYW1lOiB3b3JkdG9zZWFyY2ggfSkudGhlbigoZXJyLCB0cmFja3MpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0cmFja3MpO1xyXG4gICAgICAgIHZhciB0cmFja2lkcyA9IHRyYWNrcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZS5faWQgfSk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodHJhY2tzaWRzKTtcclxuXHJcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZChlcnIpO1xyXG5cclxuICAgIH0pKi9cclxuXHJcblxyXG5cclxuICAgIFxyXG4gICAgbW9kdWxlLmV4cG9ydHM9cm91dGVyO1xyXG4iXX0=