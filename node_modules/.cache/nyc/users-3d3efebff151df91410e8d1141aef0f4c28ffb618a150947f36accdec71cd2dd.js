function cov_1w1y9gqlhv(){var path="G:\\SWbackend\\Integrated\\Backend-team\\models\\users.js";var hash="9b660936270d3a5501eb2f0a1f21bf7793869b57";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"G:\\SWbackend\\Integrated\\Backend-team\\models\\users.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:4,column:15},end:{line:4,column:20}},"4":{start:{line:5,column:18},end:{line:5,column:38}},"5":{start:{line:6,column:31},end:{line:6,column:53}},"6":{start:{line:8,column:22},end:{line:8,column:50}},"7":{start:{line:11,column:17},end:{line:78,column:2}},"8":{start:{line:81,column:0},end:{line:105,column:2}},"9":{start:{line:82,column:4},end:{line:82,column:29}},"10":{start:{line:83,column:15},end:{line:83,column:19}},"11":{start:{line:84,column:4},end:{line:84,column:30}},"12":{start:{line:85,column:4},end:{line:103,column:7}},"13":{start:{line:86,column:8},end:{line:86,column:34}},"14":{start:{line:87,column:8},end:{line:91,column:9}},"15":{start:{line:88,column:12},end:{line:88,column:36}},"16":{start:{line:89,column:12},end:{line:89,column:36}},"17":{start:{line:92,column:8},end:{line:102,column:10}},"18":{start:{line:93,column:12},end:{line:101,column:15}},"19":{start:{line:94,column:16},end:{line:100,column:17}},"20":{start:{line:95,column:20},end:{line:95,column:43}},"21":{start:{line:96,column:20},end:{line:96,column:34}},"22":{start:{line:98,column:20},end:{line:98,column:53}},"23":{start:{line:99,column:20},end:{line:99,column:29}},"24":{start:{line:107,column:0},end:{line:118,column:1}},"25":{start:{line:108,column:15},end:{line:108,column:19}},"26":{start:{line:109,column:17},end:{line:109,column:23}},"27":{start:{line:111,column:16},end:{line:111,column:96}},"28":{start:{line:113,column:4},end:{line:117,column:7}},"29":{start:{line:115,column:8},end:{line:115,column:23}},"30":{start:{line:120,column:0},end:{line:133,column:2}},"31":{start:{line:121,column:15},end:{line:121,column:19}},"32":{start:{line:124,column:4},end:{line:128,column:5}},"33":{start:{line:125,column:8},end:{line:125,column:57}},"34":{start:{line:127,column:7},end:{line:127,column:31}},"35":{start:{line:129,column:4},end:{line:131,column:7}},"36":{start:{line:135,column:0},end:{line:156,column:2}},"37":{start:{line:136,column:15},end:{line:136,column:19}},"38":{start:{line:139,column:4},end:{line:143,column:5}},"39":{start:{line:140,column:8},end:{line:140,column:57}},"40":{start:{line:142,column:7},end:{line:142,column:31}},"41":{start:{line:146,column:4},end:{line:153,column:3}},"42":{start:{line:177,column:0},end:{line:190,column:5}},"43":{start:{line:178,column:13},end:{line:178,column:17}},"44":{start:{line:179,column:15},end:{line:179,column:22}},"45":{start:{line:180,column:14},end:{line:180,column:78}},"46":{start:{line:181,column:4},end:{line:181,column:26}},"47":{start:{line:182,column:4},end:{line:182,column:22}},"48":{start:{line:183,column:4},end:{line:188,column:6}},"49":{start:{line:184,column:8},end:{line:187,column:11}},"50":{start:{line:185,column:12},end:{line:185,column:27}},"51":{start:{line:194,column:4},end:{line:210,column:6}},"52":{start:{line:195,column:19},end:{line:195,column:23}},"53":{start:{line:197,column:14},end:{line:197,column:19}},"54":{start:{line:198,column:8},end:{line:202,column:9}},"55":{start:{line:199,column:12},end:{line:199,column:61}},"56":{start:{line:201,column:11},end:{line:201,column:35}},"57":{start:{line:203,column:8},end:{line:208,column:11}},"58":{start:{line:213,column:4},end:{line:216,column:6}},"59":{start:{line:214,column:19},end:{line:214,column:23}},"60":{start:{line:215,column:8},end:{line:215,column:46}},"61":{start:{line:224,column:15},end:{line:224,column:50}},"62":{start:{line:228,column:0},end:{line:230,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:81,column:39},end:{line:81,column:40}},loc:{start:{line:81,column:66},end:{line:105,column:1}},line:81},"1":{name:"(anonymous_1)",decl:{start:{line:85,column:40},end:{line:85,column:41}},loc:{start:{line:85,column:50},end:{line:103,column:5}},line:85},"2":{name:"(anonymous_2)",decl:{start:{line:92,column:27},end:{line:92,column:28}},loc:{start:{line:92,column:48},end:{line:102,column:9}},line:92},"3":{name:"(anonymous_3)",decl:{start:{line:93,column:52},end:{line:93,column:53}},loc:{start:{line:93,column:66},end:{line:101,column:13}},line:93},"4":{name:"(anonymous_4)",decl:{start:{line:107,column:39},end:{line:107,column:40}},loc:{start:{line:107,column:51},end:{line:118,column:1}},line:107},"5":{name:"(anonymous_5)",decl:{start:{line:113,column:23},end:{line:113,column:24}},loc:{start:{line:113,column:44},end:{line:117,column:5}},line:113},"6":{name:"(anonymous_6)",decl:{start:{line:120,column:33},end:{line:120,column:34}},loc:{start:{line:120,column:50},end:{line:133,column:1}},line:120},"7":{name:"(anonymous_7)",decl:{start:{line:135,column:37},end:{line:135,column:38}},loc:{start:{line:135,column:54},end:{line:156,column:1}},line:135},"8":{name:"(anonymous_8)",decl:{start:{line:177,column:38},end:{line:177,column:39}},loc:{start:{line:177,column:48},end:{line:190,column:5}},line:177},"9":{name:"(anonymous_9)",decl:{start:{line:183,column:28},end:{line:183,column:29}},loc:{start:{line:183,column:32},end:{line:188,column:5}},line:183},"10":{name:"(anonymous_10)",decl:{start:{line:184,column:27},end:{line:184,column:28}},loc:{start:{line:184,column:48},end:{line:187,column:9}},line:184},"11":{name:"(anonymous_11)",decl:{start:{line:194,column:42},end:{line:194,column:43}},loc:{start:{line:194,column:59},end:{line:210,column:5}},line:194},"12":{name:"(anonymous_12)",decl:{start:{line:213,column:37},end:{line:213,column:38}},loc:{start:{line:213,column:57},end:{line:216,column:5}},line:213}},branchMap:{"0":{loc:{start:{line:87,column:8},end:{line:91,column:9}},type:"if",locations:[{start:{line:87,column:8},end:{line:91,column:9}},{start:{line:87,column:8},end:{line:91,column:9}}],line:87},"1":{loc:{start:{line:94,column:16},end:{line:100,column:17}},type:"if",locations:[{start:{line:94,column:16},end:{line:100,column:17}},{start:{line:94,column:16},end:{line:100,column:17}}],line:94}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9b660936270d3a5501eb2f0a1f21bf7793869b57"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1w1y9gqlhv=function(){return actualCoverage;};return actualCoverage;}cov_1w1y9gqlhv();const mongoose=(cov_1w1y9gqlhv().s[0]++,require("mongoose"));const jwt=(cov_1w1y9gqlhv().s[1]++,require('jsonwebtoken'));const bcrypt=(cov_1w1y9gqlhv().s[2]++,require('bcryptjs'));var password=(cov_1w1y9gqlhv().s[3]++,"abc");const validator=(cov_1w1y9gqlhv().s[4]++,require('validator'));var{images,ImagesSchema}=(cov_1w1y9gqlhv().s[5]++,require("./images.js"));// images model
const defaultModule=(cov_1w1y9gqlhv().s[6]++,require("./../defaultimage"));var UserSchema=(cov_1w1y9gqlhv().s[7]++,new mongoose.Schema({userName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,required:true,trim:true,minlength:1,unique:true,validate:{validator:validator.isEmail,message:'{value} is not a valid email'}},password:{type:String,required:true,trim:true,minlength:4},isPremium:{type:Boolean,default:false},isActive:{type:Boolean,default:false},gender:{type:String,required:true,trim:true,minlength:1,maxlength:1,enum:["M","F"]},birthDate:{type:Date,required:true,min:'1920-12-31',max:'2005-12-31'},resetToken:{type:String,default:undefined},image:{type:ImagesSchema,required:true,default:defaultModule.defaultImage._doc},likedTracks:[{type:mongoose.Schema.Types.ObjectId,ref:"track"}]}));cov_1w1y9gqlhv().s[8]++;UserSchema.statics.findByCredentials=function(email,password){cov_1w1y9gqlhv().f[0]++;cov_1w1y9gqlhv().s[9]++;console.log("2elgedeed");var User=(cov_1w1y9gqlhv().s[10]++,this);cov_1w1y9gqlhv().s[11]++;console.log("2elgedeed2");cov_1w1y9gqlhv().s[12]++;return User.findOne({email}).then(user=>{cov_1w1y9gqlhv().f[1]++;cov_1w1y9gqlhv().s[13]++;console.log("2elgedeed3");cov_1w1y9gqlhv().s[14]++;if(!user){cov_1w1y9gqlhv().b[0][0]++;cov_1w1y9gqlhv().s[15]++;console.log("not user");cov_1w1y9gqlhv().s[16]++;return Promise.reject();}else{cov_1w1y9gqlhv().b[0][1]++;}cov_1w1y9gqlhv().s[17]++;return new Promise((resolve,reject)=>{cov_1w1y9gqlhv().f[2]++;cov_1w1y9gqlhv().s[18]++;bcrypt.compare(password,user.password,(err,res)=>{cov_1w1y9gqlhv().f[3]++;cov_1w1y9gqlhv().s[19]++;if(res){cov_1w1y9gqlhv().b[1][0]++;cov_1w1y9gqlhv().s[20]++;console.log("feh3ade");cov_1w1y9gqlhv().s[21]++;resolve(user);}else{cov_1w1y9gqlhv().b[1][1]++;cov_1w1y9gqlhv().s[22]++;console.log("Passwordincorrect");cov_1w1y9gqlhv().s[23]++;reject();}});});});};cov_1w1y9gqlhv().s[24]++;UserSchema.methods.generateAuthToken=function(){cov_1w1y9gqlhv().f[4]++;var user=(cov_1w1y9gqlhv().s[25]++,this);var access=(cov_1w1y9gqlhv().s[26]++,'auth');//console.log('hena');
var token=(cov_1w1y9gqlhv().s[27]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser').toString());//console.log('henahena');
cov_1w1y9gqlhv().s[28]++;return new Promise((resolve,reject)=>{cov_1w1y9gqlhv().f[5]++;cov_1w1y9gqlhv().s[29]++;//console.log('henahenahena');
resolve(token);});};cov_1w1y9gqlhv().s[30]++;UserSchema.statics.findByToken=function(token){cov_1w1y9gqlhv().f[6]++;var User=(cov_1w1y9gqlhv().s[31]++,this);var decoded;cov_1w1y9gqlhv().s[32]++;try{cov_1w1y9gqlhv().s[33]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_1w1y9gqlhv().s[34]++;return Promise.reject();}cov_1w1y9gqlhv().s[35]++;return User.findOne({_id:decoded._id});};cov_1w1y9gqlhv().s[36]++;UserSchema.statics.ActivateByToken=function(token){cov_1w1y9gqlhv().f[7]++;var User=(cov_1w1y9gqlhv().s[37]++,this);var decoded;cov_1w1y9gqlhv().s[38]++;try{cov_1w1y9gqlhv().s[39]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_1w1y9gqlhv().s[40]++;return Promise.reject();}cov_1w1y9gqlhv().s[41]++;return User.findOneAndUpdate({_id:decoded._id},{isActive:true});};/*bcrypt.genSalt(10, (err, salt) => {
    bcrypt.hash(password, salt, (err, hash) => {
        console.log(hash);
        var user1 = new User({
            email: "ayamahmoudabdelfatah99@gmail.com",
            password: hash,
            userName: "hamadaaa  ",
            country: "  Egypt"
        });
        user1.save().then((res) => {
            console.log(res._id);
        }, (err) => {
            console.log(err);
        });

    });
});*/ ////monica////////
cov_1w1y9gqlhv().s[42]++;UserSchema.methods.generateResetToken=function(){cov_1w1y9gqlhv().f[8]++;var user=(cov_1w1y9gqlhv().s[43]++,this);var access=(cov_1w1y9gqlhv().s[44]++,"reset");var token=(cov_1w1y9gqlhv().s[45]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser'));cov_1w1y9gqlhv().s[46]++;user.resetToken=token;cov_1w1y9gqlhv().s[47]++;console.log(token);cov_1w1y9gqlhv().s[48]++;return user.save().then(()=>{cov_1w1y9gqlhv().f[9]++;cov_1w1y9gqlhv().s[49]++;return new Promise((resolve,reject)=>{cov_1w1y9gqlhv().f[10]++;cov_1w1y9gqlhv().s[50]++;resolve(token);});});};cov_1w1y9gqlhv().s[51]++;UserSchema.statics.checkTokenAndFind=function(token){cov_1w1y9gqlhv().f[11]++;var User=(cov_1w1y9gqlhv().s[52]++,this);var decoded;var t=(cov_1w1y9gqlhv().s[53]++,token);cov_1w1y9gqlhv().s[54]++;try{cov_1w1y9gqlhv().s[55]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_1w1y9gqlhv().s[56]++;return Promise.reject();}cov_1w1y9gqlhv().s[57]++;return User.findOne({_id:decoded._id,resetToken:t});};cov_1w1y9gqlhv().s[58]++;UserSchema.statics.findByEmail=function(reqEmail){cov_1w1y9gqlhv().f[12]++;var User=(cov_1w1y9gqlhv().s[59]++,this);cov_1w1y9gqlhv().s[60]++;return User.findOne({email:reqEmail});};var User=(cov_1w1y9gqlhv().s[61]++,mongoose.model('Users',UserSchema));cov_1w1y9gqlhv().s[62]++;module.exports={User};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImp3dCIsImJjcnlwdCIsInBhc3N3b3JkIiwidmFsaWRhdG9yIiwiaW1hZ2VzIiwiSW1hZ2VzU2NoZW1hIiwiZGVmYXVsdE1vZHVsZSIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VyTmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInRyaW0iLCJ1bmlxdWUiLCJlbWFpbCIsInZhbGlkYXRlIiwiaXNFbWFpbCIsIm1lc3NhZ2UiLCJpc1ByZW1pdW0iLCJCb29sZWFuIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiZ2VuZGVyIiwibWF4bGVuZ3RoIiwiZW51bSIsImJpcnRoRGF0ZSIsIkRhdGUiLCJtaW4iLCJtYXgiLCJyZXNldFRva2VuIiwidW5kZWZpbmVkIiwiaW1hZ2UiLCJkZWZhdWx0SW1hZ2UiLCJfZG9jIiwibGlrZWRUcmFja3MiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwic3RhdGljcyIsImZpbmRCeUNyZWRlbnRpYWxzIiwiY29uc29sZSIsImxvZyIsIlVzZXIiLCJmaW5kT25lIiwidGhlbiIsInVzZXIiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzb2x2ZSIsImNvbXBhcmUiLCJlcnIiLCJyZXMiLCJtZXRob2RzIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJhY2Nlc3MiLCJ0b2tlbiIsInNpZ24iLCJfaWQiLCJ0b0hleFN0cmluZyIsInRvU3RyaW5nIiwiZmluZEJ5VG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiZSIsIkFjdGl2YXRlQnlUb2tlbiIsImZpbmRPbmVBbmRVcGRhdGUiLCJnZW5lcmF0ZVJlc2V0VG9rZW4iLCJzYXZlIiwiY2hlY2tUb2tlbkFuZEZpbmQiLCJ0IiwiZmluZEJ5RW1haWwiLCJyZXFFbWFpbCIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjhnT0FBQSxLQUFNQSxDQUFBQSxRQUFRLDBCQUFH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QVUsMEJBQ1QsTUFBT2pCLENBQUFBLE9BQU8sQ0FBQ0MsTUFBUixFQUFQLENBQ0YsQ0FSa0QseUJBU25ELE1BQU9MLENBQUFBLElBQUksQ0FBQ0MsT0FBTCxDQUFhLENBQ25CYyxHQUFHLENBQUNJLE9BQU8sQ0FBQ0osR0FETyxDQUduQjVCLFVBQVUsQ0FBQ3dDLENBSFEsQ0FBYixDQUFQLENBT0gsQ0FoQkQsQyx5QkFtQkFoRSxVQUFVLENBQUNpQyxPQUFYLENBQW1CZ0MsV0FBbkIsQ0FBaUMsU0FBVUMsUUFBVixDQUFvQiwwQkFDakQsR0FBSTdCLENBQUFBLElBQUksMkJBQUcsSUFBSCxDQUFSLENBRGlELHlCQUVqRCxNQUFPQSxDQUFBQSxJQUFJLENBQUNDLE9BQUwsQ0FBYSxDQUFDN0IsS0FBSyxDQUFDeUQsUUFBUCxDQUFiLENBQVAsQ0FDSCxDQUhELENBV0EsR0FBSTdCLENBQUFBLElBQUksMkJBQUc5QyxRQUFRLENBQUM0RSxLQUFULENBQWUsT0FBZixDQUF3Qm5FLFVBQXhCLENBQUgsQ0FBUixDLHlCQUlKb0UsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JoQyxJQURhLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpO1xyXG52YXIgcGFzc3dvcmQgPSBcImFiY1wiO1xyXG5jb25zdCB2YWxpZGF0b3IgPSByZXF1aXJlKCd2YWxpZGF0b3InKTtcclxudmFyIHsgaW1hZ2VzLCBJbWFnZXNTY2hlbWEgfSA9IHJlcXVpcmUoXCIuL2ltYWdlcy5qc1wiKTsgLy8gaW1hZ2VzIG1vZGVsXHJcblxyXG5jb25zdCBkZWZhdWx0TW9kdWxlID0gcmVxdWlyZShcIi4vLi4vZGVmYXVsdGltYWdlXCIpO1xyXG5cclxuXHJcbnZhciBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICB1c2VyTmFtZToge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDEsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGVtYWlsOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIHRyaW06IHRydWUsXHJcbiAgICAgICAgbWlubGVuZ3RoOiAxLFxyXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcclxuXHRcdHZhbGlkYXRlOntcclxuXHRcdFx0dmFsaWRhdG9yOiB2YWxpZGF0b3IuaXNFbWFpbCxcclxuXHRcdFx0bWVzc2FnZTogJ3t2YWx1ZX0gaXMgbm90IGEgdmFsaWQgZW1haWwnXHJcblx0XHR9XHJcbiAgICB9LFxyXG4gICAgcGFzc3dvcmQ6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDQsXHJcbiAgICB9LFxyXG4gICAgaXNQcmVtaXVtOiB7XHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGlzQWN0aXZlOiB7XHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGdlbmRlcjoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB0cmltOiB0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDogMSxcclxuICAgICAgICBtYXhsZW5ndGg6IDEsXHJcbiAgICAgICAgZW51bTogW1wiTVwiLCBcIkZcIl0sXHJcbiAgICB9LFxyXG4gICAgYmlydGhEYXRlOiB7XHJcbiAgICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBtaW46ICcxOTIwLTEyLTMxJyxcclxuICAgICAgICBtYXg6ICcyMDA1LTEyLTMxJ1xyXG4gICAgfSxcclxuICAgIHJlc2V0VG9rZW46XHJcbiAgICAge1xyXG4gICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgIGRlZmF1bHQ6dW5kZWZpbmVkXHJcbiAgICB9LFxyXG4gICAgaW1hZ2U6IHtcclxuICAgICAgICB0eXBlOiBJbWFnZXNTY2hlbWEsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgZGVmYXVsdDogZGVmYXVsdE1vZHVsZS5kZWZhdWx0SW1hZ2UuX2RvY1xyXG4gICAgfSxcclxuXHJcbiAgICBsaWtlZFRyYWNrczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgICAgICByZWY6IFwidHJhY2tcIlxyXG4gICAgICAgIH1cclxuICAgIF1cclxuXHJcbn0pO1xyXG5cclxuXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlDcmVkZW50aWFscyA9IGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkXCIpO1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWQyXCIpO1xyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIjJlbGdlZGVlZDNcIik7XHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm90IHVzZXJcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQsIChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmVoM2FkZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3N3b3JkaW5jb3JyZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuVXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlQXV0aFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGFjY2VzcyA9ICdhdXRoJztcclxuICAgIC8vY29uc29sZS5sb2coJ2hlbmEnKTtcclxuICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsgX2lkOiB1c2VyLl9pZC50b0hleFN0cmluZygpLCBhY2Nlc3MgfSwgJ3NlY3JldGtleWZvcnVzZXInKS50b1N0cmluZygpO1xyXG4gICAgLy9jb25zb2xlLmxvZygnaGVuYWhlbmEnKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGVuYWhlbmFoZW5hJyk7XHJcbiAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBVc2VyLmZpbmRPbmUoe1xyXG4gICAgIF9pZDpkZWNvZGVkLl9pZFxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLkFjdGl2YXRlQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcclxuXHR7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9LFxyXG5cdHtcclxuXHRcdGlzQWN0aXZlOnRydWVcclxuXHR9XHJcblx0KTtcclxuXHJcblxyXG59O1xyXG5cclxuLypiY3J5cHQuZ2VuU2FsdCgxMCwgKGVyciwgc2FsdCkgPT4ge1xyXG4gICAgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQsIChlcnIsIGhhc2gpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhoYXNoKTtcclxuICAgICAgICB2YXIgdXNlcjEgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIGVtYWlsOiBcImF5YW1haG1vdWRhYmRlbGZhdGFoOTlAZ21haWwuY29tXCIsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogXCJoYW1hZGFhYSAgXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwiICBFZ3lwdFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdXNlcjEuc2F2ZSgpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuX2lkKTtcclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbn0pOyovXHJcbi8vLy9tb25pY2EvLy8vLy8vL1xyXG5cclxuVXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlUmVzZXRUb2tlbj1mdW5jdGlvbigpe1xyXG4gICAgdmFyIHVzZXI9dGhpcztcclxuICAgIHZhciBhY2Nlc3M9XCJyZXNldFwiO1xyXG4gICAgdmFyIHRva2VuPWp3dC5zaWduKHtfaWQ6dXNlci5faWQudG9IZXhTdHJpbmcoKSxhY2Nlc3N9LCdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB1c2VyLnJlc2V0VG9rZW49dG9rZW47XHJcbiAgICBjb25zb2xlLmxvZyh0b2tlbilcclxuICAgIHJldHVybiB1c2VyLnNhdmUoKS50aGVuKCgpPT57XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBVc2VyU2NoZW1hLnN0YXRpY3MuY2hlY2tUb2tlbkFuZEZpbmQ9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgICAgICB2YXIgZGVjb2RlZDtcclxuICAgICAgICB2YXIgdD10b2tlbjtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5maW5kT25lKHtcclxuICAgICAgICAgX2lkOmRlY29kZWQuX2lkLFxyXG5cclxuICAgICAgICAgcmVzZXRUb2tlbjp0XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuICAgIFVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlFbWFpbCA9IGZ1bmN0aW9uIChyZXFFbWFpbCkge1xyXG4gICAgICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgICAgICByZXR1cm4gVXNlci5maW5kT25lKHtlbWFpbDpyZXFFbWFpbH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB2YXIgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VycycsIFVzZXJTY2hlbWEpO1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIFVzZXJcclxufTtcclxuIl19