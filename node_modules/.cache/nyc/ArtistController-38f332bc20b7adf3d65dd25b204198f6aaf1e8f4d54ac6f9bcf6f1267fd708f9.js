function cov_1tlvrtmhut(){var path="G:\\SWbackend\\Integrated\\Backend-team\\Controllers\\ArtistController.js";var hash="7854926faeaf4d4ec51cf7bb9ed3bcfba0de68b7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"G:\\SWbackend\\Integrated\\Backend-team\\Controllers\\ArtistController.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:19},end:{line:2,column:47}},"2":{start:{line:3,column:17},end:{line:3,column:48}},"3":{start:{line:4,column:15},end:{line:4,column:44}},"4":{start:{line:5,column:8},end:{line:5,column:25}},"5":{start:{line:7,column:15},end:{line:7,column:32}},"6":{start:{line:8,column:17},end:{line:8,column:38}},"7":{start:{line:10,column:21},end:{line:10,column:39}},"8":{start:{line:11,column:12},end:{line:11,column:35}},"9":{start:{line:13,column:15},end:{line:13,column:31}},"10":{start:{line:14,column:29},end:{line:14,column:75}},"11":{start:{line:17,column:20},end:{line:23,column:2}},"12":{start:{line:30,column:0},end:{line:45,column:3}},"13":{start:{line:31,column:4},end:{line:31,column:30}},"14":{start:{line:33,column:4},end:{line:33,column:23}},"15":{start:{line:34,column:4},end:{line:43,column:5}},"16":{start:{line:35,column:8},end:{line:35,column:50}},"17":{start:{line:38,column:8},end:{line:42,column:49}},"18":{start:{line:39,column:12},end:{line:39,column:80}},"19":{start:{line:39,column:27},end:{line:39,column:78}},"20":{start:{line:40,column:12},end:{line:40,column:32}},"21":{start:{line:42,column:24},end:{line:42,column:47}},"22":{start:{line:48,column:0},end:{line:75,column:3}},"23":{start:{line:49,column:4},end:{line:49,column:25}},"24":{start:{line:50,column:4},end:{line:50,column:32}},"25":{start:{line:51,column:15},end:{line:51,column:54}},"26":{start:{line:52,column:4},end:{line:52,column:19}},"27":{start:{line:55,column:2},end:{line:73,column:7}},"28":{start:{line:56,column:8},end:{line:56,column:23}},"29":{start:{line:57,column:2},end:{line:68,column:2}},"30":{start:{line:59,column:8},end:{line:63,column:11}},"31":{start:{line:60,column:12},end:{line:60,column:27}},"32":{start:{line:61,column:12},end:{line:61,column:53}},"33":{start:{line:62,column:12},end:{line:62,column:27}},"34":{start:{line:67,column:2},end:{line:67,column:93}},"35":{start:{line:71,column:8},end:{line:71,column:23}},"36":{start:{line:72,column:8},end:{line:72,column:70}},"37":{start:{line:101,column:0},end:{line:160,column:3}},"38":{start:{line:102,column:4},end:{line:159,column:5}},"39":{start:{line:103,column:21},end:{line:103,column:43}},"40":{start:{line:104,column:27},end:{line:104,column:69}},"41":{start:{line:106,column:21},end:{line:113,column:14}},"42":{start:{line:114,column:8},end:{line:114,column:32}},"43":{start:{line:115,column:8},end:{line:150,column:14}},"44":{start:{line:116,column:12},end:{line:116,column:32}},"45":{start:{line:120,column:14},end:{line:120,column:20}},"46":{start:{line:121,column:13},end:{line:121,column:103}},"47":{start:{line:122,column:2},end:{line:122,column:20}},"48":{start:{line:124,column:11},end:{line:124,column:26}},"49":{start:{line:125,column:11},end:{line:125,column:61}},"50":{start:{line:126,column:2},end:{line:126,column:20}},"51":{start:{line:127,column:18},end:{line:131,column:4}},"52":{start:{line:132,column:2},end:{line:132,column:27}},"53":{start:{line:133,column:2},end:{line:142,column:3}},"54":{start:{line:134,column:3},end:{line:140,column:5}},"55":{start:{line:135,column:4},end:{line:135,column:23}},"56":{start:{line:136,column:3},end:{line:136,column:20}},"57":{start:{line:138,column:4},end:{line:138,column:53}},"58":{start:{line:139,column:3},end:{line:139,column:19}},"59":{start:{line:144,column:12},end:{line:144,column:107}},"60":{start:{line:147,column:16},end:{line:147,column:33}},"61":{start:{line:148,column:16},end:{line:148,column:80}},"62":{start:{line:156,column:8},end:{line:156,column:25}},"63":{start:{line:157,column:8},end:{line:157,column:34}},"64":{start:{line:181,column:0},end:{line:192,column:2}},"65":{start:{line:182,column:3},end:{line:191,column:6}},"66":{start:{line:183,column:8},end:{line:186,column:9}},"67":{start:{line:184,column:3},end:{line:184,column:37}},"68":{start:{line:185,column:12},end:{line:185,column:36}},"69":{start:{line:188,column:2},end:{line:188,column:56}},"70":{start:{line:190,column:8},end:{line:190,column:31}},"71":{start:{line:270,column:0},end:{line:317,column:2}},"72":{start:{line:272,column:13},end:{line:272,column:14}},"73":{start:{line:273,column:14},end:{line:273,column:34}},"74":{start:{line:275,column:4},end:{line:315,column:6}},"75":{start:{line:277,column:8},end:{line:282,column:6}},"76":{start:{line:278,column:12},end:{line:278,column:32}},"77":{start:{line:279,column:13},end:{line:279,column:19}},"78":{start:{line:280,column:12},end:{line:280,column:51}},"79":{start:{line:284,column:13},end:{line:284,column:24}},"80":{start:{line:286,column:28},end:{line:286,column:32}},"81":{start:{line:288,column:4},end:{line:288,column:75}},"82":{start:{line:288,column:23},end:{line:288,column:74}},"83":{start:{line:290,column:4},end:{line:309,column:5}},"84":{start:{line:290,column:14},end:{line:290,column:15}},"85":{start:{line:292,column:4},end:{line:295,column:5}},"86":{start:{line:294,column:8},end:{line:294,column:50}},"87":{start:{line:297,column:4},end:{line:306,column:43}},"88":{start:{line:299,column:7},end:{line:303,column:8}},"89":{start:{line:305,column:7},end:{line:305,column:90}},"90":{start:{line:306,column:18},end:{line:306,column:41}},"91":{start:{line:310,column:0},end:{line:310,column:30}},"92":{start:{line:314,column:8},end:{line:314,column:60}},"93":{start:{line:322,column:0},end:{line:322,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:30,column:72},end:{line:30,column:73}},loc:{start:{line:30,column:86},end:{line:45,column:1}},line:30},"1":{name:"(anonymous_1)",decl:{start:{line:38,column:33},end:{line:38,column:34}},loc:{start:{line:38,column:45},end:{line:42,column:9}},line:38},"2":{name:"(anonymous_2)",decl:{start:{line:42,column:17},end:{line:42,column:18}},loc:{start:{line:42,column:24},end:{line:42,column:47}},line:42},"3":{name:"(anonymous_3)",decl:{start:{line:48,column:30},end:{line:48,column:31}},loc:{start:{line:48,column:44},end:{line:75,column:1}},line:48},"4":{name:"(anonymous_4)",decl:{start:{line:55,column:59},end:{line:55,column:60}},loc:{start:{line:55,column:71},end:{line:70,column:5}},line:55},"5":{name:"(anonymous_5)",decl:{start:{line:59,column:47},end:{line:59,column:48}},loc:{start:{line:59,column:58},end:{line:63,column:9}},line:59},"6":{name:"(anonymous_6)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:20},end:{line:73,column:5}},line:70},"7":{name:"(anonymous_7)",decl:{start:{line:101,column:31},end:{line:101,column:32}},loc:{start:{line:101,column:51},end:{line:160,column:1}},line:101},"8":{name:"(anonymous_8)",decl:{start:{line:115,column:27},end:{line:115,column:28}},loc:{start:{line:115,column:36},end:{line:145,column:9}},line:115},"9":{name:"(anonymous_9)",decl:{start:{line:133,column:38},end:{line:133,column:39}},loc:{start:{line:133,column:63},end:{line:142,column:1}},line:133},"10":{name:"(anonymous_10)",decl:{start:{line:146,column:12},end:{line:146,column:13}},loc:{start:{line:146,column:21},end:{line:150,column:13}},line:146},"11":{name:"(anonymous_11)",decl:{start:{line:181,column:36},end:{line:181,column:37}},loc:{start:{line:181,column:49},end:{line:192,column:1}},line:181},"12":{name:"(anonymous_12)",decl:{start:{line:182,column:48},end:{line:182,column:49}},loc:{start:{line:182,column:63},end:{line:189,column:5}},line:182},"13":{name:"(anonymous_13)",decl:{start:{line:189,column:13},end:{line:189,column:14}},loc:{start:{line:189,column:20},end:{line:191,column:5}},line:189},"14":{name:"(anonymous_14)",decl:{start:{line:270,column:22},end:{line:270,column:23}},loc:{start:{line:270,column:39},end:{line:317,column:1}},line:270},"15":{name:"(anonymous_15)",decl:{start:{line:275,column:33},end:{line:275,column:34}},loc:{start:{line:275,column:46},end:{line:312,column:7}},line:275},"16":{name:"(anonymous_16)",decl:{start:{line:297,column:47},end:{line:297,column:48}},loc:{start:{line:298,column:4},end:{line:306,column:5}},line:298},"17":{name:"(anonymous_17)",decl:{start:{line:306,column:13},end:{line:306,column:14}},loc:{start:{line:306,column:18},end:{line:306,column:41}},line:306},"18":{name:"(anonymous_18)",decl:{start:{line:312,column:15},end:{line:312,column:16}},loc:{start:{line:312,column:20},end:{line:315,column:5}},line:312}},branchMap:{"0":{loc:{start:{line:34,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:43,column:5}},{start:{line:34,column:4},end:{line:43,column:5}}],line:34},"1":{loc:{start:{line:39,column:12},end:{line:39,column:80}},type:"if",locations:[{start:{line:39,column:12},end:{line:39,column:80}},{start:{line:39,column:12},end:{line:39,column:80}}],line:39},"2":{loc:{start:{line:57,column:2},end:{line:68,column:2}},type:"if",locations:[{start:{line:57,column:2},end:{line:68,column:2}},{start:{line:57,column:2},end:{line:68,column:2}}],line:57},"3":{loc:{start:{line:134,column:3},end:{line:140,column:5}},type:"if",locations:[{start:{line:134,column:3},end:{line:140,column:5}},{start:{line:134,column:3},end:{line:140,column:5}}],line:134},"4":{loc:{start:{line:183,column:8},end:{line:186,column:9}},type:"if",locations:[{start:{line:183,column:8},end:{line:186,column:9}},{start:{line:183,column:8},end:{line:186,column:9}}],line:183},"5":{loc:{start:{line:277,column:8},end:{line:282,column:6}},type:"if",locations:[{start:{line:277,column:8},end:{line:282,column:6}},{start:{line:277,column:8},end:{line:282,column:6}}],line:277},"6":{loc:{start:{line:288,column:4},end:{line:288,column:75}},type:"if",locations:[{start:{line:288,column:4},end:{line:288,column:75}},{start:{line:288,column:4},end:{line:288,column:75}}],line:288},"7":{loc:{start:{line:292,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:292,column:4},end:{line:295,column:5}},{start:{line:292,column:4},end:{line:295,column:5}}],line:292},"8":{loc:{start:{line:299,column:7},end:{line:303,column:8}},type:"if",locations:[{start:{line:299,column:7},end:{line:303,column:8}},{start:{line:299,column:7},end:{line:303,column:8}}],line:299}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7854926faeaf4d4ec51cf7bb9ed3bcfba0de68b7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1tlvrtmhut=function(){return actualCoverage;};return actualCoverage;}cov_1tlvrtmhut();const express=(cov_1tlvrtmhut().s[0]++,require('express'));var{mongoose}=(cov_1tlvrtmhut().s[1]++,require("../db/mongoose.js"));var{artist}=(cov_1tlvrtmhut().s[2]++,require("../models/artists.js"));var{User}=(cov_1tlvrtmhut().s[3]++,require("../models/users.js"));var _=(cov_1tlvrtmhut().s[4]++,require('lodash'));//var bodyparser = require('body-parser');
const bcrypt=(cov_1tlvrtmhut().s[5]++,require('bcrypt'));var nodemailer=(cov_1tlvrtmhut().s[6]++,require("nodemailer"));const{ObjectID}=(cov_1tlvrtmhut().s[7]++,require('mongodb'));const jwt=(cov_1tlvrtmhut().s[8]++,require('jsonwebtoken'));const router=(cov_1tlvrtmhut().s[9]++,express.Router());var AuthenticationServices=(cov_1tlvrtmhut().s[10]++,require("./../Services/AuthenticationService"));var smtpTransport=(cov_1tlvrtmhut().s[11]++,nodemailer.createTransport({service:"Gmail",auth:{user:"sw.project.verify@gmail.com",pass:"abcd-1234"}}));//app.use(bodyparser.json());
//app.listen(3000, () => { console.log('started on port 3000'); });
cov_1tlvrtmhut().s[12]++;router.get('/artists/:id',AuthenticationServices.AuthenticateAllUsers,(req,res)=>{cov_1tlvrtmhut().f[0]++;cov_1tlvrtmhut().s[13]++;console.log(req.param.id);cov_1tlvrtmhut().s[14]++;id=req.params.id;cov_1tlvrtmhut().s[15]++;if(!ObjectID.isValid(id)){cov_1tlvrtmhut().b[0][0]++;cov_1tlvrtmhut().s[16]++;return res.status(404).send("invalid id");}else{cov_1tlvrtmhut().b[0][1]++;cov_1tlvrtmhut().s[17]++;artist.findById(id).then(artist=>{cov_1tlvrtmhut().f[1]++;cov_1tlvrtmhut().s[18]++;if(!artist){cov_1tlvrtmhut().b[1][0]++;cov_1tlvrtmhut().s[19]++;return res.status(404).send("can not find artist");}else{cov_1tlvrtmhut().b[1][1]++;}cov_1tlvrtmhut().s[20]++;res.send({artist});}).catch(e=>{cov_1tlvrtmhut().f[2]++;cov_1tlvrtmhut().s[21]++;return res.status(400).send(e);});}});cov_1tlvrtmhut().s[22]++;router.post('/artists/login',(req,res)=>{cov_1tlvrtmhut().f[3]++;cov_1tlvrtmhut().s[23]++;console.log("email");cov_1tlvrtmhut().s[24]++;console.log(req.body.email);var body=(cov_1tlvrtmhut().s[25]++,_.pick(req.body,['email','password']));cov_1tlvrtmhut().s[26]++;console.log(2);cov_1tlvrtmhut().s[27]++;artist.findByCredentials(body.email,body.password).then(artist=>{cov_1tlvrtmhut().f[4]++;cov_1tlvrtmhut().s[28]++;console.log(3);cov_1tlvrtmhut().s[29]++;if(artist.isActive==true){cov_1tlvrtmhut().b[2][0]++;cov_1tlvrtmhut().s[30]++;return artist.generateAuthToken().then(token=>{cov_1tlvrtmhut().f[5]++;cov_1tlvrtmhut().s[31]++;console.log(4);cov_1tlvrtmhut().s[32]++;res.header('x-auth',token).send(artist);cov_1tlvrtmhut().s[33]++;console.log(5);});}else{cov_1tlvrtmhut().b[2][1]++;cov_1tlvrtmhut().s[34]++;res.status(403).send("Please go to your inbox and click the link to activate your Email.");}}).catch(e=>{cov_1tlvrtmhut().f[6]++;cov_1tlvrtmhut().s[35]++;console.log(e);cov_1tlvrtmhut().s[36]++;res.status(401).send("Either email or passwrod is incorrect");});});//SIGNUP FOR THE ARTISTS
/**
 * @api {post} api/artists/signup             Create a new artist
 * @apiName SignUp Request for artists
 * @apiGroup Artists 
 * 
 * @apiParam {String} artistName    Unique name of the artist
 * @apiParam {String} email         email of the artist
 * @apiParam {String} password      password of the artist
 * @apiParam  {Srting} about        A minimum of 100 characters that describe the artist
 *
 * @apiSuccess  (200) Artist added Successfully as inActive. Waiting for Email Confirmation
 * @apiSuccessExample {json} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *        "Artist added Successfully as inActive. Waiting for Email Confirmation "
 *     }
 * @apiError (409)  Conflict. the Artist already exists: duplicate artistName or email
 * @apiError (500) Internal Server Error 
 * @apiErrorExample {string} Conflict Error-Response:
 *       "artistName and/or Email already exists "
 */cov_1tlvrtmhut().s[37]++;router.post('/artists/signup',async(req,res)=>{cov_1tlvrtmhut().f[7]++;cov_1tlvrtmhut().s[38]++;try{const salt=(cov_1tlvrtmhut().s[39]++,await bcrypt.genSalt());const hashedPass=(cov_1tlvrtmhut().s[40]++,await bcrypt.hash(req.body.password,salt));var newacc=(cov_1tlvrtmhut().s[41]++,new artist({artistName:req.body.artistName,email:req.body.email,password:hashedPass,about:req.body.about}));cov_1tlvrtmhut().s[42]++;console.log('2et3amal');cov_1tlvrtmhut().s[43]++;newacc.save().then(doc=>{cov_1tlvrtmhut().f[8]++;cov_1tlvrtmhut().s[44]++;console.log("skod");var access=(cov_1tlvrtmhut().s[45]++,'auth');var code=(cov_1tlvrtmhut().s[46]++,jwt.sign({_id:newacc._id.toHexString(),access},'secretkeyforartist',{expiresIn:'1d'}));cov_1tlvrtmhut().s[47]++;console.log(code);var host=(cov_1tlvrtmhut().s[48]++,req.get('host'));var link=(cov_1tlvrtmhut().s[49]++,"http://"+req.get('host')+"/artists/confirm/"+code);cov_1tlvrtmhut().s[50]++;console.log(link);var mailOptions=(cov_1tlvrtmhut().s[51]++,{to:req.body.email,subject:"Please confirm your Email account",html:"Hello,<br> Please Click on the link to verify your email.<br><a href="+link+">Click here to verify</a>"});cov_1tlvrtmhut().s[52]++;console.log(mailOptions);cov_1tlvrtmhut().s[53]++;smtpTransport.sendMail(mailOptions,function(error,response){cov_1tlvrtmhut().f[9]++;cov_1tlvrtmhut().s[54]++;if(error){cov_1tlvrtmhut().b[3][0]++;cov_1tlvrtmhut().s[55]++;console.log(error);cov_1tlvrtmhut().s[56]++;res.end("error");}else{cov_1tlvrtmhut().b[3][1]++;cov_1tlvrtmhut().s[57]++;console.log("Message sent: "+response.message);cov_1tlvrtmhut().s[58]++;res.end("sent");}});cov_1tlvrtmhut().s[59]++;res.status(200).send("Artist added Successfully as inActive. Waiting for Email Confirmation ");},err=>{cov_1tlvrtmhut().f[10]++;cov_1tlvrtmhut().s[60]++;console.log(err);cov_1tlvrtmhut().s[61]++;res.status(409).send("artistName and/or Email already exists ");});}catch(err){cov_1tlvrtmhut().s[62]++;console.log(err);cov_1tlvrtmhut().s[63]++;res.status(500).send(err);}});//CONFIRMATION OF ARTIST SIGNUP 
/**
 * @api {get} api/artists/confirm/:code      SignUp Confrimation 
 * @apiName SignUp Confirmed for artists
 * @apiGroup Artists
 * 
 * @apiParam {String} code    artist-specific code to activate his account
 * 
 * @apiSuccess  (200) artist was activated successfully
 * @apiSuccessExample {json} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *       "Email confirmed successfully!"
 *     }
 * @apiError (404)  artist not found.
 * @apiError (401) Unauthorized. Recieved a corrupted code. 
 * 
 */cov_1tlvrtmhut().s[64]++;router.get('/artists/confirm/:code',(req,res)=>{cov_1tlvrtmhut().f[11]++;cov_1tlvrtmhut().s[65]++;artist.ActivateByToken(req.params.code).then(activated=>{cov_1tlvrtmhut().f[12]++;cov_1tlvrtmhut().s[66]++;if(!activated){cov_1tlvrtmhut().b[4][0]++;cov_1tlvrtmhut().s[67]++;res.status(404).send("not found");cov_1tlvrtmhut().s[68]++;return Promise.reject();}else{cov_1tlvrtmhut().b[4][1]++;}cov_1tlvrtmhut().s[69]++;res.status(200).send("Email confirmed successfully!");}).catch(e=>{cov_1tlvrtmhut().f[13]++;cov_1tlvrtmhut().s[70]++;res.status(401).send();});});/**
 * @api {get} /api/artists Get several Artists
 * @apiName GetSeveralArtists
 * @apiGroup Artists
 *
 * @apiHeader {string}  x-auth          Authorization Required. A valid access token.
 * 
 * @apiParam {string[]}        ids array of each Artist's unique ID.
 *
 * @apiSuccess {Artist[]}          artists An array of Artist objects containing the full details of each  Artist.
 * 
 * @apiSuccessExample {JSON} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *     [
    {
        "artistName": "HAmo Beeka",
        "genres": [
            "sha3by",
            "R&B"
        ],
        "about": "Adele Laurie Blue Adkins (born May 5, 1988) is a British singer-songwriter \nwho has sold millions of albums worldwide and won a total of 15 Grammys as well as an Oscar.\n     Adele's first two albums, 19 and 21, earned her critical praise and a level of\n      commercial success unsurpassed among her peers.",
        "rating": -1
    },
    {
        "artistName": "Adele",
        "genres": [
            "pop",
            "R&B"
        ],
        "about": "Adele Laurie Blue Adkins (born May 5, 1988) is a British singer-songwriter \n    who has sold millions of albums worldwide and won a total of 15 Grammys as well as an Oscar.\n     Adele's first two albums, 19 and 21, earned her critical praise and a level of\n      commercial success unsurpassed among her peers.",
        "rating": 4
    },
    {
        "artistName": "Eminem",
        "genres": [
            "Trap",
            "Jazz",
            "pop",
            "Rap"
        ],
        "about": "Marshall Bruce Mathers III (born October 17, 1972), known professionally as Eminem\n     (/ˌɛmɪˈnɛm/; often stylized as EMINƎM), is an American rapper, songwriter, record producer, \n     record executive and actor. He is one of the most successful musical artists of the 21st century.",
        "rating": 4.6
    }
]
}
 * @apiError ArtistNotFound The id of the Artist was not found.
 *
 * @apiErrorExample {string} AuthError-Response:
 *     HTTP/1.1 401  Not Found
 *     {
 *       "authentication failed"
 *     }
 *     
 *     @apiError Exceeded 5o ids 
 *
 * @apiErrorExample {string}      BadRequest-Response:
 *     HTTP/1.1 400 Bad Request
 *     {
 *       "maximum 50 ids"
 *     }
 * 
 *     @apiError invalid id
 *
 * @apiErrorExample {string}       forbidden-Response:
 *     HTTP/1.1 403 forbidden
 *     {
 *       "invalid id"
 *     }
 * 
 * 
 * 
 */cov_1tlvrtmhut().s[71]++;router.get('/artists',async(req,res)=>{cov_1tlvrtmhut().f[14]++;var flag=(cov_1tlvrtmhut().s[72]++,1);var token=(cov_1tlvrtmhut().s[73]++,req.header('x-auth'));cov_1tlvrtmhut().s[74]++;User.findByToken(token).then(async user=>{cov_1tlvrtmhut().f[15]++;cov_1tlvrtmhut().s[75]++;if(!user){cov_1tlvrtmhut().b[5][0]++;cov_1tlvrtmhut().s[76]++;console.log('eeee');cov_1tlvrtmhut().s[77]++;flag=0;cov_1tlvrtmhut().s[78]++;Promise.reject("authenticaton failed");//return res.status(401).send('authentication failed')
}else{cov_1tlvrtmhut().b[5][1]++;};var arr=(cov_1tlvrtmhut().s[79]++,req.body.id);var returnedArtistArray=(cov_1tlvrtmhut().s[80]++,[{}]);cov_1tlvrtmhut().s[81]++;if(arr.length>50){cov_1tlvrtmhut().b[6][0]++;cov_1tlvrtmhut().s[82]++;return res.status(400).send("maximum 50 Ids only");}else{cov_1tlvrtmhut().b[6][1]++;}cov_1tlvrtmhut().s[83]++;for(var i=(cov_1tlvrtmhut().s[84]++,0);i<arr.length;i++){cov_1tlvrtmhut().s[85]++;if(!ObjectID.isValid(arr[i])){cov_1tlvrtmhut().b[7][0]++;cov_1tlvrtmhut().s[86]++;return res.status(403).send("invalid id");}else{cov_1tlvrtmhut().b[7][1]++;}cov_1tlvrtmhut().s[87]++;await artist.findById(req.body.id[i]).then(artists=>{cov_1tlvrtmhut().f[16]++;cov_1tlvrtmhut().s[88]++;if(!artists)//{return res.status(404).send("can not find artist");}
{cov_1tlvrtmhut().b[8][0]++;}else{cov_1tlvrtmhut().b[8][1]++;}cov_1tlvrtmhut().s[89]++;returnedArtistArray[i]=_.pick(artists,['artistName','genres','about','rating']);;}).catch(e=>{cov_1tlvrtmhut().f[17]++;cov_1tlvrtmhut().s[90]++;return res.status(400).send(e);});}cov_1tlvrtmhut().s[91]++;res.send(returnedArtistArray);}).catch(e=>{cov_1tlvrtmhut().f[18]++;cov_1tlvrtmhut().s[92]++;return res.status(401).send("authentication failed");});});cov_1tlvrtmhut().s[93]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGlzdENvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJtb25nb29zZSIsImFydGlzdCIsIlVzZXIiLCJfIiwiYmNyeXB0Iiwibm9kZW1haWxlciIsIk9iamVjdElEIiwiand0Iiwicm91dGVyIiwiUm91dGVyIiwiQXV0aGVudGljYXRpb25TZXJ2aWNlcyIsInNtdHBUcmFuc3BvcnQiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiZ2V0IiwiQXV0aGVudGljYXRlQWxsVXNlcnMiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwicGFyYW0iLCJpZCIsInBhcmFtcyIsImlzVmFsaWQiLCJzdGF0dXMiLCJzZW5kIiwiZmluZEJ5SWQiLCJ0aGVuIiwiY2F0Y2giLCJlIiwicG9zdCIsImJvZHkiLCJlbWFpbCIsInBpY2siLCJmaW5kQnlDcmVkZW50aWFscyIsInBhc3N3b3JkIiwiaXNBY3RpdmUiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsInRva2VuIiwiaGVhZGVyIiwic2FsdCIsImdlblNhbHQiLCJoYXNoZWRQYXNzIiwiaGFzaCIsIm5ld2FjYyIsImFydGlzdE5hbWUiLCJhYm91dCIsInNhdmUiLCJkb2MiLCJhY2Nlc3MiLCJjb2RlIiwic2lnbiIsIl9pZCIsInRvSGV4U3RyaW5nIiwiZXhwaXJlc0luIiwiaG9zdCIsImxpbmsiLCJtYWlsT3B0aW9ucyIsInRvIiwic3ViamVjdCIsImh0bWwiLCJzZW5kTWFpbCIsImVycm9yIiwicmVzcG9uc2UiLCJlbmQiLCJtZXNzYWdlIiwiZXJyIiwiQWN0aXZhdGVCeVRva2VuIiwiYWN0aXZhdGVkIiwiUHJvbWlzZSIsInJlamVjdCIsImZsYWciLCJmaW5kQnlUb2tlbiIsImFyciIsInJldHVybmVkQXJ0aXN0QXJyYXkiLCJsZW5ndGgiLCJpIiwiYXJ0aXN0cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI4MFdBQUEsS0FBTUEs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Q0FDckYsQ0FUSyxFQVNIakQsS0FURyxDQVNJQyxDQUFELEVBQUsseURBQUFaLENBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCSSxDQUFyQixFQUF1QixDQVQvQixDQUFOLENBWUMsQ0FsQ3lDLHlCQW1DOUNaLEdBQUcsQ0FBQ1EsSUFBSixDQUFTaUQsbUJBQVQsRUFFTyxDQXJDSCxFQXFDSzlDLEtBckNMLENBcUNZQyxDQUFELEVBQUssbURBRVosTUFBT1osQ0FBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsdUJBQXJCLENBQVAsQ0FDSCxDQXhDRCxFQTBDSCxDQS9DRCxFLHlCQW9EQXFELE1BQU0sQ0FBQ0MsT0FBUCxDQUFnQjFFLE1BQWhCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxudmFyIHsgbW9uZ29vc2UgfSA9IHJlcXVpcmUoXCIuLi9kYi9tb25nb29zZS5qc1wiKTtcclxudmFyIHsgYXJ0aXN0IH0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL2FydGlzdHMuanNcIik7XHJcbnZhciB7IFVzZXIgfSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlcnMuanNcIik7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbi8vdmFyIGJvZHlwYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcclxudmFyIG5vZGVtYWlsZXIgPSByZXF1aXJlKFwibm9kZW1haWxlclwiKTtcclxuXHJcbmNvbnN0IHsgT2JqZWN0SUQgfSA9IHJlcXVpcmUoJ21vbmdvZGInKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG52YXIgQXV0aGVudGljYXRpb25TZXJ2aWNlcyA9IHJlcXVpcmUoXCIuLy4uL1NlcnZpY2VzL0F1dGhlbnRpY2F0aW9uU2VydmljZVwiKTtcclxuXHJcblxyXG52YXIgc210cFRyYW5zcG9ydCA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgIHNlcnZpY2U6IFwiR21haWxcIixcclxuICAgIGF1dGg6IHtcclxuICAgICAgICB1c2VyOiBcInN3LnByb2plY3QudmVyaWZ5QGdtYWlsLmNvbVwiLFxyXG4gICAgICAgIHBhc3M6IFwiYWJjZC0xMjM0XCJcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuLy9hcHAudXNlKGJvZHlwYXJzZXIuanNvbigpKTtcclxuXHJcbi8vYXBwLmxpc3RlbigzMDAwLCAoKSA9PiB7IGNvbnNvbGUubG9nKCdzdGFydGVkIG9uIHBvcnQgMzAwMCcpOyB9KTtcclxuXHJcbnJvdXRlci5nZXQoJy9hcnRpc3RzLzppZCcsIEF1dGhlbnRpY2F0aW9uU2VydmljZXMuQXV0aGVudGljYXRlQWxsVXNlcnMsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVxLnBhcmFtLmlkKTtcclxuXHJcbiAgICBpZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQoaWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiaW52YWxpZCBpZFwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFydGlzdC5maW5kQnlJZChpZCkudGhlbigoYXJ0aXN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYXJ0aXN0KSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZChcImNhbiBub3QgZmluZCBhcnRpc3RcIik7IH1cclxuICAgICAgICAgICAgcmVzLnNlbmQoeyBhcnRpc3QgfSlcclxuXHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpKTtcclxuICAgIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcbnJvdXRlci5wb3N0KCcvYXJ0aXN0cy9sb2dpbicsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJlbWFpbFwiKTtcclxuICAgIGNvbnNvbGUubG9nKHJlcS5ib2R5LmVtYWlsKTtcclxuICAgIHZhciBib2R5ID0gXy5waWNrKHJlcS5ib2R5LCBbJ2VtYWlsJywgJ3Bhc3N3b3JkJ10pO1xyXG4gICAgY29uc29sZS5sb2coMik7XHJcblx0XHJcblx0XHJcblx0XHRhcnRpc3QuZmluZEJ5Q3JlZGVudGlhbHMoYm9keS5lbWFpbCwgYm9keS5wYXNzd29yZCkudGhlbigoYXJ0aXN0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coMyk7XHJcblx0XHRpZihhcnRpc3QuaXNBY3RpdmU9PXRydWUpXHJcblx0e1xyXG4gICAgICAgIHJldHVybiBhcnRpc3QuZ2VuZXJhdGVBdXRoVG9rZW4oKS50aGVuKCh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyg0KTtcclxuICAgICAgICAgICAgcmVzLmhlYWRlcigneC1hdXRoJywgdG9rZW4pLnNlbmQoYXJ0aXN0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coNSk7XHJcbiAgICAgICAgfSk7XHJcblx0fVx0XHJcblx0ZWxzZVxyXG5cdHtcclxuXHRcdHJlcy5zdGF0dXMoNDAzKS5zZW5kKFwiUGxlYXNlIGdvIHRvIHlvdXIgaW5ib3ggYW5kIGNsaWNrIHRoZSBsaW5rIHRvIGFjdGl2YXRlIHlvdXIgRW1haWwuXCIpO1xyXG5cdH1cclxuXHRcdFxyXG4gICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZChcIkVpdGhlciBlbWFpbCBvciBwYXNzd3JvZCBpcyBpbmNvcnJlY3RcIik7XHJcbiAgICB9KTtcclxuXHJcbn0pO1xyXG5cclxuXHJcbiAvL1NJR05VUCBGT1IgVEhFIEFSVElTVFNcclxuICAvKipcclxuICogQGFwaSB7cG9zdH0gYXBpL2FydGlzdHMvc2lnbnVwICAgICAgICAgICAgIENyZWF0ZSBhIG5ldyBhcnRpc3RcclxuICogQGFwaU5hbWUgU2lnblVwIFJlcXVlc3QgZm9yIGFydGlzdHNcclxuICogQGFwaUdyb3VwIEFydGlzdHMgXHJcbiAqIFxyXG4gKiBAYXBpUGFyYW0ge1N0cmluZ30gYXJ0aXN0TmFtZSAgICBVbmlxdWUgbmFtZSBvZiB0aGUgYXJ0aXN0XHJcbiAqIEBhcGlQYXJhbSB7U3RyaW5nfSBlbWFpbCAgICAgICAgIGVtYWlsIG9mIHRoZSBhcnRpc3RcclxuICogQGFwaVBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkICAgICAgcGFzc3dvcmQgb2YgdGhlIGFydGlzdFxyXG4gKiBAYXBpUGFyYW0gIHtTcnRpbmd9IGFib3V0ICAgICAgICBBIG1pbmltdW0gb2YgMTAwIGNoYXJhY3RlcnMgdGhhdCBkZXNjcmliZSB0aGUgYXJ0aXN0XHJcbiAqXHJcbiAqIEBhcGlTdWNjZXNzICAoMjAwKSBBcnRpc3QgYWRkZWQgU3VjY2Vzc2Z1bGx5IGFzIGluQWN0aXZlLiBXYWl0aW5nIGZvciBFbWFpbCBDb25maXJtYXRpb25cclxuICogQGFwaVN1Y2Nlc3NFeGFtcGxlIHtqc29ufSBTdWNjZXNzLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgMjAwIE9LXHJcbiAqICAgICB7XHJcbiAqICAgICAgICBcIkFydGlzdCBhZGRlZCBTdWNjZXNzZnVsbHkgYXMgaW5BY3RpdmUuIFdhaXRpbmcgZm9yIEVtYWlsIENvbmZpcm1hdGlvbiBcIlxyXG4gKiAgICAgfVxyXG4gKiBAYXBpRXJyb3IgKDQwOSkgIENvbmZsaWN0LiB0aGUgQXJ0aXN0IGFscmVhZHkgZXhpc3RzOiBkdXBsaWNhdGUgYXJ0aXN0TmFtZSBvciBlbWFpbFxyXG4gKiBAYXBpRXJyb3IgKDUwMCkgSW50ZXJuYWwgU2VydmVyIEVycm9yIFxyXG4gKiBAYXBpRXJyb3JFeGFtcGxlIHtzdHJpbmd9IENvbmZsaWN0IEVycm9yLVJlc3BvbnNlOlxyXG4gKiAgICAgICBcImFydGlzdE5hbWUgYW5kL29yIEVtYWlsIGFscmVhZHkgZXhpc3RzIFwiXHJcbiAqL1xyXG5cclxucm91dGVyLnBvc3QoJy9hcnRpc3RzL3NpZ251cCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoKTtcclxuICAgICAgICBjb25zdCBoYXNoZWRQYXNzID0gYXdhaXQgYmNyeXB0Lmhhc2gocmVxLmJvZHkucGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgICBcclxuICAgICAgICB2YXIgbmV3YWNjID0gbmV3IGFydGlzdChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICBhcnRpc3ROYW1lOiByZXEuYm9keS5hcnRpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzLFxyXG4gICAgICAgICAgICAgICBhYm91dDogcmVxLmJvZHkuYWJvdXQsXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnMmV0M2FtYWwnKTtcclxuICAgICAgICBuZXdhY2Muc2F2ZSgpLnRoZW4oKGRvYykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNrb2RcIik7XHJcblx0XHJcblx0XHJcblx0XHRcclxuXHRcdHZhciBhY2Nlc3M9ICdhdXRoJztcdFx0XHJcblx0XHR2YXIgY29kZSA9IGp3dC5zaWduKHsgX2lkOiBuZXdhY2MuX2lkLnRvSGV4U3RyaW5nKCksIGFjY2VzcyB9LCAnc2VjcmV0a2V5Zm9yYXJ0aXN0Jyx7ZXhwaXJlc0luOicxZCd9KTtcclxuXHRcdGNvbnNvbGUubG9nKGNvZGUpO1xyXG5cdFx0XHJcblx0XHR2YXIgaG9zdD1yZXEuZ2V0KCdob3N0Jyk7XHJcblx0XHR2YXIgbGluaz1cImh0dHA6Ly9cIityZXEuZ2V0KCdob3N0JykrXCIvYXJ0aXN0cy9jb25maXJtL1wiK2NvZGU7XHJcblx0XHRjb25zb2xlLmxvZyhsaW5rKTtcclxuXHRcdHZhciBtYWlsT3B0aW9ucz17XHJcblx0XHRcdHRvIDogcmVxLmJvZHkuZW1haWwsXHJcblx0XHRcdHN1YmplY3QgOiBcIlBsZWFzZSBjb25maXJtIHlvdXIgRW1haWwgYWNjb3VudFwiLFxyXG5cdFx0XHRodG1sIDogXCJIZWxsbyw8YnI+IFBsZWFzZSBDbGljayBvbiB0aGUgbGluayB0byB2ZXJpZnkgeW91ciBlbWFpbC48YnI+PGEgaHJlZj1cIitsaW5rK1wiPkNsaWNrIGhlcmUgdG8gdmVyaWZ5PC9hPlwiXHJcblx0XHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKG1haWxPcHRpb25zKTtcclxuXHRcdHNtdHBUcmFuc3BvcnQuc2VuZE1haWwobWFpbE9wdGlvbnMsIGZ1bmN0aW9uKGVycm9yLCByZXNwb25zZSl7XHJcblx0XHQgaWYoZXJyb3Ipe1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0cmVzLmVuZChcImVycm9yXCIpO1xyXG5cdFx0IH1lbHNle1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiTWVzc2FnZSBzZW50OiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xyXG5cdFx0XHRyZXMuZW5kKFwic2VudFwiKTtcclxuXHRcdFx0IH1cclxuXHRcdFx0IFxyXG59KTtcclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiQXJ0aXN0IGFkZGVkIFN1Y2Nlc3NmdWxseSBhcyBpbkFjdGl2ZS4gV2FpdGluZyBmb3IgRW1haWwgQ29uZmlybWF0aW9uIFwiKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDkpLnNlbmQoXCJhcnRpc3ROYW1lIGFuZC9vciBFbWFpbCBhbHJlYWR5IGV4aXN0cyBcIik7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjYXRjaChlcnIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59KTtcclxuXHJcbiAvL0NPTkZJUk1BVElPTiBPRiBBUlRJU1QgU0lHTlVQIFxyXG4vKipcclxuICogQGFwaSB7Z2V0fSBhcGkvYXJ0aXN0cy9jb25maXJtLzpjb2RlICAgICAgU2lnblVwIENvbmZyaW1hdGlvbiBcclxuICogQGFwaU5hbWUgU2lnblVwIENvbmZpcm1lZCBmb3IgYXJ0aXN0c1xyXG4gKiBAYXBpR3JvdXAgQXJ0aXN0c1xyXG4gKiBcclxuICogQGFwaVBhcmFtIHtTdHJpbmd9IGNvZGUgICAgYXJ0aXN0LXNwZWNpZmljIGNvZGUgdG8gYWN0aXZhdGUgaGlzIGFjY291bnRcclxuICogXHJcbiAqIEBhcGlTdWNjZXNzICAoMjAwKSBhcnRpc3Qgd2FzIGFjdGl2YXRlZCBzdWNjZXNzZnVsbHlcclxuICogQGFwaVN1Y2Nlc3NFeGFtcGxlIHtqc29ufSBTdWNjZXNzLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgMjAwIE9LXHJcbiAqICAgICB7XHJcbiAqICAgICAgIFwiRW1haWwgY29uZmlybWVkIHN1Y2Nlc3NmdWxseSFcIlxyXG4gKiAgICAgfVxyXG4gKiBAYXBpRXJyb3IgKDQwNCkgIGFydGlzdCBub3QgZm91bmQuXHJcbiAqIEBhcGlFcnJvciAoNDAxKSBVbmF1dGhvcml6ZWQuIFJlY2lldmVkIGEgY29ycnVwdGVkIGNvZGUuIFxyXG4gKiBcclxuICovXHJcblxyXG5yb3V0ZXIuZ2V0KCcvYXJ0aXN0cy9jb25maXJtLzpjb2RlJywocmVxLHJlcykgPT4ge1xyXG4gICBhcnRpc3QuQWN0aXZhdGVCeVRva2VuKHJlcS5wYXJhbXMuY29kZSkudGhlbigoYWN0aXZhdGVkKSA9PiB7XHJcbiAgICAgICAgaWYoIWFjdGl2YXRlZCl7XHJcblx0XHRcdHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwibm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgICAgICB9XHJcblx0XHJcblx0XHRyZXMuc3RhdHVzKDIwMCkuc2VuZChcIkVtYWlsIGNvbmZpcm1lZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCgpO1xyXG4gICAgfSlcclxufSlcdFx0XHJcblxyXG5cclxuLyoqXHJcbiAqIEBhcGkge2dldH0gL2FwaS9hcnRpc3RzIEdldCBzZXZlcmFsIEFydGlzdHNcclxuICogQGFwaU5hbWUgR2V0U2V2ZXJhbEFydGlzdHNcclxuICogQGFwaUdyb3VwIEFydGlzdHNcclxuICpcclxuICogQGFwaUhlYWRlciB7c3RyaW5nfSAgeC1hdXRoICAgICAgICAgIEF1dGhvcml6YXRpb24gUmVxdWlyZWQuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxyXG4gKiBcclxuICogQGFwaVBhcmFtIHtzdHJpbmdbXX0gICAgICAgIGlkcyBhcnJheSBvZiBlYWNoIEFydGlzdCdzIHVuaXF1ZSBJRC5cclxuICpcclxuICogQGFwaVN1Y2Nlc3Mge0FydGlzdFtdfSAgICAgICAgICBhcnRpc3RzIEFuIGFycmF5IG9mIEFydGlzdCBvYmplY3RzIGNvbnRhaW5pbmcgdGhlIGZ1bGwgZGV0YWlscyBvZiBlYWNoICBBcnRpc3QuXHJcbiAqIFxyXG4gKiBAYXBpU3VjY2Vzc0V4YW1wbGUge0pTT059IFN1Y2Nlc3MtUmVzcG9uc2U6XHJcbiAqICAgICBIVFRQLzEuMSAyMDAgT0tcclxuICogICAgIHtcclxuICogICAgIFtcclxuICAgIHtcclxuICAgICAgICBcImFydGlzdE5hbWVcIjogXCJIQW1vIEJlZWthXCIsXHJcbiAgICAgICAgXCJnZW5yZXNcIjogW1xyXG4gICAgICAgICAgICBcInNoYTNieVwiLFxyXG4gICAgICAgICAgICBcIlImQlwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBcImFib3V0XCI6IFwiQWRlbGUgTGF1cmllIEJsdWUgQWRraW5zIChib3JuIE1heSA1LCAxOTg4KSBpcyBhIEJyaXRpc2ggc2luZ2VyLXNvbmd3cml0ZXIgXFxud2hvIGhhcyBzb2xkIG1pbGxpb25zIG9mIGFsYnVtcyB3b3JsZHdpZGUgYW5kIHdvbiBhIHRvdGFsIG9mIDE1IEdyYW1teXMgYXMgd2VsbCBhcyBhbiBPc2Nhci5cXG4gICAgIEFkZWxlJ3MgZmlyc3QgdHdvIGFsYnVtcywgMTkgYW5kIDIxLCBlYXJuZWQgaGVyIGNyaXRpY2FsIHByYWlzZSBhbmQgYSBsZXZlbCBvZlxcbiAgICAgIGNvbW1lcmNpYWwgc3VjY2VzcyB1bnN1cnBhc3NlZCBhbW9uZyBoZXIgcGVlcnMuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogLTFcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJhcnRpc3ROYW1lXCI6IFwiQWRlbGVcIixcclxuICAgICAgICBcImdlbnJlc1wiOiBbXHJcbiAgICAgICAgICAgIFwicG9wXCIsXHJcbiAgICAgICAgICAgIFwiUiZCXCJcclxuICAgICAgICBdLFxyXG4gICAgICAgIFwiYWJvdXRcIjogXCJBZGVsZSBMYXVyaWUgQmx1ZSBBZGtpbnMgKGJvcm4gTWF5IDUsIDE5ODgpIGlzIGEgQnJpdGlzaCBzaW5nZXItc29uZ3dyaXRlciBcXG4gICAgd2hvIGhhcyBzb2xkIG1pbGxpb25zIG9mIGFsYnVtcyB3b3JsZHdpZGUgYW5kIHdvbiBhIHRvdGFsIG9mIDE1IEdyYW1teXMgYXMgd2VsbCBhcyBhbiBPc2Nhci5cXG4gICAgIEFkZWxlJ3MgZmlyc3QgdHdvIGFsYnVtcywgMTkgYW5kIDIxLCBlYXJuZWQgaGVyIGNyaXRpY2FsIHByYWlzZSBhbmQgYSBsZXZlbCBvZlxcbiAgICAgIGNvbW1lcmNpYWwgc3VjY2VzcyB1bnN1cnBhc3NlZCBhbW9uZyBoZXIgcGVlcnMuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogNFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImFydGlzdE5hbWVcIjogXCJFbWluZW1cIixcclxuICAgICAgICBcImdlbnJlc1wiOiBbXHJcbiAgICAgICAgICAgIFwiVHJhcFwiLFxyXG4gICAgICAgICAgICBcIkphenpcIixcclxuICAgICAgICAgICAgXCJwb3BcIixcclxuICAgICAgICAgICAgXCJSYXBcIlxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgXCJhYm91dFwiOiBcIk1hcnNoYWxsIEJydWNlIE1hdGhlcnMgSUlJIChib3JuIE9jdG9iZXIgMTcsIDE5NzIpLCBrbm93biBwcm9mZXNzaW9uYWxseSBhcyBFbWluZW1cXG4gICAgICgvy4zJm23JqsuIbsmbbS87IG9mdGVuIHN0eWxpemVkIGFzIEVNSU7Gjk0pLCBpcyBhbiBBbWVyaWNhbiByYXBwZXIsIHNvbmd3cml0ZXIsIHJlY29yZCBwcm9kdWNlciwgXFxuICAgICByZWNvcmQgZXhlY3V0aXZlIGFuZCBhY3Rvci4gSGUgaXMgb25lIG9mIHRoZSBtb3N0IHN1Y2Nlc3NmdWwgbXVzaWNhbCBhcnRpc3RzIG9mIHRoZSAyMXN0IGNlbnR1cnkuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogNC42XHJcbiAgICB9XHJcbl1cclxufVxyXG4gKiBAYXBpRXJyb3IgQXJ0aXN0Tm90Rm91bmQgVGhlIGlkIG9mIHRoZSBBcnRpc3Qgd2FzIG5vdCBmb3VuZC5cclxuICpcclxuICogQGFwaUVycm9yRXhhbXBsZSB7c3RyaW5nfSBBdXRoRXJyb3ItUmVzcG9uc2U6XHJcbiAqICAgICBIVFRQLzEuMSA0MDEgIE5vdCBGb3VuZFxyXG4gKiAgICAge1xyXG4gKiAgICAgICBcImF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiXHJcbiAqICAgICB9XHJcbiAqICAgICBcclxuICogICAgIEBhcGlFcnJvciBFeGNlZWRlZCA1byBpZHMgXHJcbiAqXHJcbiAqIEBhcGlFcnJvckV4YW1wbGUge3N0cmluZ30gICAgICBCYWRSZXF1ZXN0LVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgNDAwIEJhZCBSZXF1ZXN0XHJcbiAqICAgICB7XHJcbiAqICAgICAgIFwibWF4aW11bSA1MCBpZHNcIlxyXG4gKiAgICAgfVxyXG4gKiBcclxuICogICAgIEBhcGlFcnJvciBpbnZhbGlkIGlkXHJcbiAqXHJcbiAqIEBhcGlFcnJvckV4YW1wbGUge3N0cmluZ30gICAgICAgZm9yYmlkZGVuLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgNDAzIGZvcmJpZGRlblxyXG4gKiAgICAge1xyXG4gKiAgICAgICBcImludmFsaWQgaWRcIlxyXG4gKiAgICAgfVxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKi9cclxuXHJcblxyXG5yb3V0ZXIuZ2V0KCcvYXJ0aXN0cycsYXN5bmMgKHJlcSxyZXMpPT57XHJcblxyXG4gICAgdmFyIGZsYWc9MVxyXG4gICAgdmFyIHRva2VuPXJlcS5oZWFkZXIoJ3gtYXV0aCcpO1xyXG5cclxuICAgIFVzZXIuZmluZEJ5VG9rZW4odG9rZW4pLnRoZW4oYXN5bmModXNlcik9PntcclxuXHJcbiAgICAgICAgaWYoIXVzZXIpIHsgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlZWVlJyk7XHJcbiAgICAgICAgICAgICBmbGFnPTBcclxuICAgICAgICAgICAgUHJvbWlzZS5yZWplY3QoXCJhdXRoZW50aWNhdG9uIGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ2F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpXHJcbiAgICAgfTtcclxuXHJcbiAgICAgdmFyIGFycj1yZXEuYm9keS5pZDtcclxuICBcclxuICAgIHZhciByZXR1cm5lZEFydGlzdEFycmF5PVt7fV07XHJcblxyXG4gICAgaWYoYXJyLmxlbmd0aD41MCkge3JldHVybiAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJtYXhpbXVtIDUwIElkcyBvbmx5XCIpfVxyXG5cclxuICAgIGZvcih2YXIgaT0wO2k8YXJyLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICBpZighT2JqZWN0SUQuaXNWYWxpZChhcnJbaV0pKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZChcImludmFsaWQgaWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgYXJ0aXN0LmZpbmRCeUlkKHJlcS5ib2R5LmlkW2ldKS50aGVuKChhcnRpc3RzKT0+XHJcbiAgICB7XHJcbiAgICAgICBpZighYXJ0aXN0cykvL3tyZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJjYW4gbm90IGZpbmQgYXJ0aXN0XCIpO31cclxuICAgICAgIHtcclxuICAgICAgICAgXHJcblxyXG4gICAgICAgfSBcclxuICAgICAgIFxyXG4gICAgICAgcmV0dXJuZWRBcnRpc3RBcnJheVtpXT0gXy5waWNrKGFydGlzdHMsIFsnYXJ0aXN0TmFtZScsICdnZW5yZXMnLCdhYm91dCcsJ3JhdGluZyddKTs7XHJcbiAgICB9KS5jYXRjaCgoZSk9PnJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpKTtcclxuXHJcblxyXG4gICAgfVxyXG5yZXMuc2VuZChyZXR1cm5lZEFydGlzdEFycmF5KTtcclxuXHJcbiAgICAgIH0pLmNhdGNoKChlKT0+e1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZChcImF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKVxyXG4gICAgfSlcclxuXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cz0gcm91dGVyO1xyXG4iXX0=