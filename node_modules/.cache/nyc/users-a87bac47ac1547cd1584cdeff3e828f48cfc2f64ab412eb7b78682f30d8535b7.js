function cov_we4ngx9ln(){var path="C:\\Users\\Dell\\Desktop\\error\\models\\users.js";var hash="4ba71968eb6dad8dec665b49dcfe80cb9acf606b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\error\\models\\users.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:4,column:15},end:{line:4,column:20}},"4":{start:{line:5,column:17},end:{line:5,column:38}},"5":{start:{line:7,column:17},end:{line:63,column:2}},"6":{start:{line:66,column:0},end:{line:90,column:2}},"7":{start:{line:67,column:4},end:{line:67,column:29}},"8":{start:{line:68,column:15},end:{line:68,column:19}},"9":{start:{line:69,column:4},end:{line:69,column:30}},"10":{start:{line:70,column:4},end:{line:88,column:7}},"11":{start:{line:71,column:8},end:{line:71,column:34}},"12":{start:{line:72,column:8},end:{line:76,column:9}},"13":{start:{line:73,column:12},end:{line:73,column:36}},"14":{start:{line:74,column:12},end:{line:74,column:36}},"15":{start:{line:77,column:8},end:{line:87,column:10}},"16":{start:{line:78,column:12},end:{line:86,column:15}},"17":{start:{line:79,column:16},end:{line:85,column:17}},"18":{start:{line:80,column:20},end:{line:80,column:43}},"19":{start:{line:81,column:20},end:{line:81,column:34}},"20":{start:{line:83,column:20},end:{line:83,column:53}},"21":{start:{line:84,column:20},end:{line:84,column:29}},"22":{start:{line:92,column:0},end:{line:103,column:1}},"23":{start:{line:93,column:15},end:{line:93,column:19}},"24":{start:{line:94,column:17},end:{line:94,column:23}},"25":{start:{line:95,column:4},end:{line:95,column:24}},"26":{start:{line:96,column:16},end:{line:96,column:96}},"27":{start:{line:97,column:4},end:{line:97,column:28}},"28":{start:{line:98,column:4},end:{line:102,column:7}},"29":{start:{line:99,column:8},end:{line:99,column:36}},"30":{start:{line:100,column:8},end:{line:100,column:23}},"31":{start:{line:105,column:0},end:{line:118,column:2}},"32":{start:{line:106,column:15},end:{line:106,column:19}},"33":{start:{line:109,column:4},end:{line:113,column:5}},"34":{start:{line:110,column:8},end:{line:110,column:57}},"35":{start:{line:112,column:7},end:{line:112,column:31}},"36":{start:{line:114,column:4},end:{line:116,column:7}},"37":{start:{line:120,column:0},end:{line:141,column:2}},"38":{start:{line:121,column:15},end:{line:121,column:19}},"39":{start:{line:124,column:4},end:{line:128,column:5}},"40":{start:{line:125,column:8},end:{line:125,column:57}},"41":{start:{line:127,column:7},end:{line:127,column:31}},"42":{start:{line:131,column:4},end:{line:138,column:3}},"43":{start:{line:162,column:0},end:{line:175,column:5}},"44":{start:{line:163,column:13},end:{line:163,column:17}},"45":{start:{line:164,column:15},end:{line:164,column:22}},"46":{start:{line:165,column:14},end:{line:165,column:78}},"47":{start:{line:166,column:4},end:{line:166,column:26}},"48":{start:{line:167,column:4},end:{line:167,column:22}},"49":{start:{line:168,column:4},end:{line:173,column:6}},"50":{start:{line:169,column:8},end:{line:172,column:11}},"51":{start:{line:170,column:12},end:{line:170,column:27}},"52":{start:{line:179,column:4},end:{line:195,column:6}},"53":{start:{line:180,column:19},end:{line:180,column:23}},"54":{start:{line:182,column:14},end:{line:182,column:19}},"55":{start:{line:183,column:8},end:{line:187,column:9}},"56":{start:{line:184,column:12},end:{line:184,column:61}},"57":{start:{line:186,column:11},end:{line:186,column:35}},"58":{start:{line:188,column:8},end:{line:193,column:11}},"59":{start:{line:198,column:4},end:{line:201,column:6}},"60":{start:{line:199,column:19},end:{line:199,column:23}},"61":{start:{line:200,column:8},end:{line:200,column:46}},"62":{start:{line:209,column:15},end:{line:209,column:50}},"63":{start:{line:213,column:0},end:{line:215,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:66,column:39},end:{line:66,column:40}},loc:{start:{line:66,column:66},end:{line:90,column:1}},line:66},"1":{name:"(anonymous_1)",decl:{start:{line:70,column:40},end:{line:70,column:41}},loc:{start:{line:70,column:50},end:{line:88,column:5}},line:70},"2":{name:"(anonymous_2)",decl:{start:{line:77,column:27},end:{line:77,column:28}},loc:{start:{line:77,column:48},end:{line:87,column:9}},line:77},"3":{name:"(anonymous_3)",decl:{start:{line:78,column:52},end:{line:78,column:53}},loc:{start:{line:78,column:66},end:{line:86,column:13}},line:78},"4":{name:"(anonymous_4)",decl:{start:{line:92,column:39},end:{line:92,column:40}},loc:{start:{line:92,column:51},end:{line:103,column:1}},line:92},"5":{name:"(anonymous_5)",decl:{start:{line:98,column:23},end:{line:98,column:24}},loc:{start:{line:98,column:44},end:{line:102,column:5}},line:98},"6":{name:"(anonymous_6)",decl:{start:{line:105,column:33},end:{line:105,column:34}},loc:{start:{line:105,column:50},end:{line:118,column:1}},line:105},"7":{name:"(anonymous_7)",decl:{start:{line:120,column:37},end:{line:120,column:38}},loc:{start:{line:120,column:54},end:{line:141,column:1}},line:120},"8":{name:"(anonymous_8)",decl:{start:{line:162,column:38},end:{line:162,column:39}},loc:{start:{line:162,column:48},end:{line:175,column:5}},line:162},"9":{name:"(anonymous_9)",decl:{start:{line:168,column:28},end:{line:168,column:29}},loc:{start:{line:168,column:32},end:{line:173,column:5}},line:168},"10":{name:"(anonymous_10)",decl:{start:{line:169,column:27},end:{line:169,column:28}},loc:{start:{line:169,column:48},end:{line:172,column:9}},line:169},"11":{name:"(anonymous_11)",decl:{start:{line:179,column:42},end:{line:179,column:43}},loc:{start:{line:179,column:59},end:{line:195,column:5}},line:179},"12":{name:"(anonymous_12)",decl:{start:{line:198,column:37},end:{line:198,column:38}},loc:{start:{line:198,column:57},end:{line:201,column:5}},line:198}},branchMap:{"0":{loc:{start:{line:72,column:8},end:{line:76,column:9}},type:"if",locations:[{start:{line:72,column:8},end:{line:76,column:9}},{start:{line:72,column:8},end:{line:76,column:9}}],line:72},"1":{loc:{start:{line:79,column:16},end:{line:85,column:17}},type:"if",locations:[{start:{line:79,column:16},end:{line:85,column:17}},{start:{line:79,column:16},end:{line:85,column:17}}],line:79}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4ba71968eb6dad8dec665b49dcfe80cb9acf606b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_we4ngx9ln=function(){return actualCoverage;};return actualCoverage;}cov_we4ngx9ln();const mongoose=(cov_we4ngx9ln().s[0]++,require("mongoose"));const jwt=(cov_we4ngx9ln().s[1]++,require('jsonwebtoken'));const bcrypt=(cov_we4ngx9ln().s[2]++,require('bcryptjs'));var password=(cov_we4ngx9ln().s[3]++,"abc");const validator=(cov_we4ngx9ln().s[4]++,require('validator'));var UserSchema=(cov_we4ngx9ln().s[5]++,new mongoose.Schema({userName:{type:String,required:true,minlength:1,trim:true,unique:true},email:{type:String,required:true,trim:true,minlength:1,unique:true,validate:{validator:validator.isEmail,message:'{value} is not a valid email'}},password:{type:String,required:true,trim:true,minlength:4},isPremium:{type:Boolean,default:false},isActive:{type:Boolean,default:false},gender:{type:String,required:true,trim:true,minlength:1,maxlength:1,enum:["M","F"]},birthDate:{type:Date,required:true,min:'1920-12-31',max:'2005-12-31'},resetToken:{type:String,default:undefined}}));cov_we4ngx9ln().s[6]++;UserSchema.statics.findByCredentials=function(email,password){cov_we4ngx9ln().f[0]++;cov_we4ngx9ln().s[7]++;console.log("2elgedeed");var User=(cov_we4ngx9ln().s[8]++,this);cov_we4ngx9ln().s[9]++;console.log("2elgedeed2");cov_we4ngx9ln().s[10]++;return User.findOne({email}).then(user=>{cov_we4ngx9ln().f[1]++;cov_we4ngx9ln().s[11]++;console.log("2elgedeed3");cov_we4ngx9ln().s[12]++;if(!user){cov_we4ngx9ln().b[0][0]++;cov_we4ngx9ln().s[13]++;console.log("not user");cov_we4ngx9ln().s[14]++;return Promise.reject();}else{cov_we4ngx9ln().b[0][1]++;}cov_we4ngx9ln().s[15]++;return new Promise((resolve,reject)=>{cov_we4ngx9ln().f[2]++;cov_we4ngx9ln().s[16]++;bcrypt.compare(password,user.password,(err,res)=>{cov_we4ngx9ln().f[3]++;cov_we4ngx9ln().s[17]++;if(res){cov_we4ngx9ln().b[1][0]++;cov_we4ngx9ln().s[18]++;console.log("feh3ade");cov_we4ngx9ln().s[19]++;resolve(user);}else{cov_we4ngx9ln().b[1][1]++;cov_we4ngx9ln().s[20]++;console.log("Passwordincorrect");cov_we4ngx9ln().s[21]++;reject();}});});});};cov_we4ngx9ln().s[22]++;UserSchema.methods.generateAuthToken=function(){cov_we4ngx9ln().f[4]++;var user=(cov_we4ngx9ln().s[23]++,this);var access=(cov_we4ngx9ln().s[24]++,'auth');cov_we4ngx9ln().s[25]++;console.log('hena');var token=(cov_we4ngx9ln().s[26]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser').toString());cov_we4ngx9ln().s[27]++;console.log('henahena');cov_we4ngx9ln().s[28]++;return new Promise((resolve,reject)=>{cov_we4ngx9ln().f[5]++;cov_we4ngx9ln().s[29]++;console.log('henahenahena');cov_we4ngx9ln().s[30]++;resolve(token);});};cov_we4ngx9ln().s[31]++;UserSchema.statics.findByToken=function(token){cov_we4ngx9ln().f[6]++;var User=(cov_we4ngx9ln().s[32]++,this);var decoded;cov_we4ngx9ln().s[33]++;try{cov_we4ngx9ln().s[34]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_we4ngx9ln().s[35]++;return Promise.reject();}cov_we4ngx9ln().s[36]++;return User.findOne({_id:decoded._id});};cov_we4ngx9ln().s[37]++;UserSchema.statics.ActivateByToken=function(token){cov_we4ngx9ln().f[7]++;var User=(cov_we4ngx9ln().s[38]++,this);var decoded;cov_we4ngx9ln().s[39]++;try{cov_we4ngx9ln().s[40]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_we4ngx9ln().s[41]++;return Promise.reject();}cov_we4ngx9ln().s[42]++;return User.findOneAndUpdate({_id:decoded._id},{isActive:true});};/*bcrypt.genSalt(10, (err, salt) => {
    bcrypt.hash(password, salt, (err, hash) => {
        console.log(hash);
        var user1 = new User({
            email: "ayamahmoudabdelfatah99@gmail.com",
            password: hash,
            userName: "hamadaaa  ",
            country: "  Egypt"
        });
        user1.save().then((res) => {
            console.log(res._id);
        }, (err) => {
            console.log(err);
        });

    });
});*/ ////monica////////
cov_we4ngx9ln().s[43]++;UserSchema.methods.generateResetToken=function(){cov_we4ngx9ln().f[8]++;var user=(cov_we4ngx9ln().s[44]++,this);var access=(cov_we4ngx9ln().s[45]++,"reset");var token=(cov_we4ngx9ln().s[46]++,jwt.sign({_id:user._id.toHexString(),access},'secretkeyforuser'));cov_we4ngx9ln().s[47]++;user.resetToken=token;cov_we4ngx9ln().s[48]++;console.log(token);cov_we4ngx9ln().s[49]++;return user.save().then(()=>{cov_we4ngx9ln().f[9]++;cov_we4ngx9ln().s[50]++;return new Promise((resolve,reject)=>{cov_we4ngx9ln().f[10]++;cov_we4ngx9ln().s[51]++;resolve(token);});});};cov_we4ngx9ln().s[52]++;UserSchema.statics.checkTokenAndFind=function(token){cov_we4ngx9ln().f[11]++;var User=(cov_we4ngx9ln().s[53]++,this);var decoded;var t=(cov_we4ngx9ln().s[54]++,token);cov_we4ngx9ln().s[55]++;try{cov_we4ngx9ln().s[56]++;decoded=jwt.verify(token,'secretkeyforuser');}catch(e){cov_we4ngx9ln().s[57]++;return Promise.reject();}cov_we4ngx9ln().s[58]++;return User.findOne({_id:decoded._id,resetToken:t});};cov_we4ngx9ln().s[59]++;UserSchema.statics.findByEmail=function(reqEmail){cov_we4ngx9ln().f[12]++;var User=(cov_we4ngx9ln().s[60]++,this);cov_we4ngx9ln().s[61]++;return User.findOne({email:reqEmail});};var User=(cov_we4ngx9ln().s[62]++,mongoose.model('Users',UserSchema));cov_we4ngx9ln().s[63]++;module.exports={User};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImp3dCIsImJjcnlwdCIsInBhc3N3b3JkIiwidmFsaWRhdG9yIiwiVXNlclNjaGVtYSIsIlNjaGVtYSIsInVzZXJOYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWlubGVuZ3RoIiwidHJpbSIsInVuaXF1ZSIsImVtYWlsIiwidmFsaWRhdGUiLCJpc0VtYWlsIiwibWVzc2FnZSIsImlzUHJlbWl1bSIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiaXNBY3RpdmUiLCJnZW5kZXIiLCJtYXhsZW5ndGgiLCJlbnVtIiwiYmlydGhEYXRlIiwiRGF0ZSIsIm1pbiIsIm1heCIsInJlc2V0VG9rZW4iLCJ1bmRlZmluZWQiLCJzdGF0aWNzIiwiZmluZEJ5Q3JlZGVudGlhbHMiLCJjb25zb2xlIiwibG9nIiwiVXNlciIsImZpbmRPbmUiLCJ0aGVuIiwidXNlciIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNvbHZlIiwiY29tcGFyZSIsImVyciIsInJlcyIsIm1ldGhvZHMiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsImFjY2VzcyIsInRva2VuIiwic2lnbiIsIl9pZCIsInRvSGV4U3RyaW5nIiwidG9TdHJpbmciLCJmaW5kQnlUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlIiwiQWN0aXZhdGVCeVRva2VuIiwiZmluZE9uZUFuZFVwZGF0ZSIsImdlbmVyYXRlUmVzZXRUb2tlbiIsInNhdmUiLCJjaGVja1Rva2VuQW5kRmluZCIsInQiLCJmaW5kQnlFbWFpbCIsInJlcUVtYWlsIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiK2hPQUFBLEtBQU1BLENBQUFBLFFBQVEseUJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1DLENBQUFBLEdBQUcseUJBQUdELE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1FLENBQUFBLE1BQU0seUJBQUdG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RCxDQVdBLEdBQUk3QixDQUFBQSxJQUFJLDBCQUFHcEMsUUFBUSxDQUFDa0UsS0FBVCxDQUFlLE9BQWYsQ0FBd0I1RCxVQUF4QixDQUFILENBQVIsQyx3QkFJSjZELE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiaEMsSUFEYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxudmFyIHBhc3N3b3JkID0gXCJhYmNcIjtcclxuY29uc3QgdmFsaWRhdG9yPSByZXF1aXJlICgndmFsaWRhdG9yJyk7XHJcblxyXG52YXIgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgdXNlck5hbWU6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgbWlubGVuZ3RoOiAxLFxyXG4gICAgICAgIHRyaW06IHRydWUsXHJcbiAgICAgICAgdW5pcXVlOiB0cnVlXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB0cmltOiB0cnVlLFxyXG4gICAgICAgIG1pbmxlbmd0aDogMSxcclxuICAgICAgICB1bmlxdWU6IHRydWUsXHJcblx0XHR2YWxpZGF0ZTp7XHJcblx0XHRcdHZhbGlkYXRvcjogdmFsaWRhdG9yLmlzRW1haWwsXHJcblx0XHRcdG1lc3NhZ2U6ICd7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIGVtYWlsJ1xyXG5cdFx0fVxyXG4gICAgfSxcclxuICAgIHBhc3N3b3JkOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIHRyaW06IHRydWUsXHJcbiAgICAgICAgbWlubGVuZ3RoOiA0LFxyXG4gICAgfSxcclxuICAgIGlzUHJlbWl1bToge1xyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBpc0FjdGl2ZToge1xyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBnZW5kZXI6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6IDEsXHJcbiAgICAgICAgbWF4bGVuZ3RoOiAxLFxyXG4gICAgICAgIGVudW06IFtcIk1cIiwgXCJGXCJdLFxyXG4gICAgfSxcclxuICAgIGJpcnRoRGF0ZToge1xyXG4gICAgICAgIHR5cGU6IERhdGUsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgbWluOiAnMTkyMC0xMi0zMScsXHJcbiAgICAgICAgbWF4OiAnMjAwNS0xMi0zMSdcclxuICAgIH0sXHJcbiAgICByZXNldFRva2VuOlxyXG4gICAgIHtcclxuICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICBkZWZhdWx0OnVuZGVmaW5lZFxyXG4gICAgIH1cclxuXHJcblxyXG59KTtcclxuXHJcblxyXG5Vc2VyU2NoZW1hLnN0YXRpY3MuZmluZEJ5Q3JlZGVudGlhbHMgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIjJlbGdlZGVlZFwiKTtcclxuICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgIGNvbnNvbGUubG9nKFwiMmVsZ2VkZWVkMlwiKTtcclxuICAgIHJldHVybiBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KS50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCIyZWxnZWRlZWQzXCIpO1xyXG4gICAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCB1c2VyXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkLCAoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZlaDNhZGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzd29yZGluY29ycmVjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcblVzZXJTY2hlbWEubWV0aG9kcy5nZW5lcmF0ZUF1dGhUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB1c2VyID0gdGhpcztcclxuICAgIHZhciBhY2Nlc3MgPSAnYXV0aCc7XHJcbiAgICBjb25zb2xlLmxvZygnaGVuYScpO1xyXG4gICAgdmFyIHRva2VuID0gand0LnNpZ24oeyBfaWQ6IHVzZXIuX2lkLnRvSGV4U3RyaW5nKCksIGFjY2VzcyB9LCAnc2VjcmV0a2V5Zm9ydXNlcicpLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zb2xlLmxvZygnaGVuYWhlbmEnKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2hlbmFoZW5haGVuYScpO1xyXG4gICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG5cclxuICAgIH0pO1xyXG59XHJcblxyXG5Vc2VyU2NoZW1hLnN0YXRpY3MuZmluZEJ5VG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBVc2VyID0gdGhpcztcclxuICAgIHZhciBkZWNvZGVkO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4gLCAnc2VjcmV0a2V5Zm9ydXNlcicpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gVXNlci5maW5kT25lKHtcclxuICAgICBfaWQ6ZGVjb2RlZC5faWRcclxuICAgIH0pOyAgICBcclxuICAgIFxyXG59O1xyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLkFjdGl2YXRlQnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIFVzZXIgPSB0aGlzO1xyXG4gICAgdmFyIGRlY29kZWQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiAsICdzZWNyZXRrZXlmb3J1c2VyJyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuXHRcdFx0XHJcblxyXG4gICAgcmV0dXJuIFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcclxuXHR7XHJcbiAgICAgX2lkOmRlY29kZWQuX2lkXHJcbiAgICB9LFxyXG5cdHtcclxuXHRcdGlzQWN0aXZlOnRydWVcclxuXHR9XHJcblx0KTsgXHJcblx0XHJcbiAgICBcclxufTtcclxuXHJcbi8qYmNyeXB0LmdlblNhbHQoMTAsIChlcnIsIHNhbHQpID0+IHtcclxuICAgIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0LCAoZXJyLCBoYXNoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaGFzaCk7XHJcbiAgICAgICAgdmFyIHVzZXIxID0gbmV3IFVzZXIoe1xyXG4gICAgICAgICAgICBlbWFpbDogXCJheWFtYWhtb3VkYWJkZWxmYXRhaDk5QGdtYWlsLmNvbVwiLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogaGFzaCxcclxuICAgICAgICAgICAgdXNlck5hbWU6IFwiaGFtYWRhYWEgIFwiLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBcIiAgRWd5cHRcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVzZXIxLnNhdmUoKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLl9pZCk7XHJcbiAgICAgICAgfSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG59KTsqL1xyXG4vLy8vbW9uaWNhLy8vLy8vLy9cclxuXHJcblVzZXJTY2hlbWEubWV0aG9kcy5nZW5lcmF0ZVJlc2V0VG9rZW49ZnVuY3Rpb24oKXtcclxuICAgIHZhciB1c2VyPXRoaXM7XHJcbiAgICB2YXIgYWNjZXNzPVwicmVzZXRcIjtcclxuICAgIHZhciB0b2tlbj1qd3Quc2lnbih7X2lkOnVzZXIuX2lkLnRvSGV4U3RyaW5nKCksYWNjZXNzfSwnc2VjcmV0a2V5Zm9ydXNlcicpO1xyXG4gICAgdXNlci5yZXNldFRva2VuPXRva2VuO1xyXG4gICAgY29uc29sZS5sb2codG9rZW4pXHJcbiAgICByZXR1cm4gdXNlci5zYXZlKCkudGhlbigoKT0+e1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIFxyXG4gICAgVXNlclNjaGVtYS5zdGF0aWNzLmNoZWNrVG9rZW5BbmRGaW5kPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICB2YXIgVXNlciA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRlY29kZWQ7XHJcbiAgICAgICAgdmFyIHQ9dG9rZW47XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4gLCAnc2VjcmV0a2V5Zm9ydXNlcicpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7XHJcbiAgICAgICAgIF9pZDpkZWNvZGVkLl9pZCxcclxuXHJcbiAgICAgICAgIHJlc2V0VG9rZW46dFxyXG5cclxuICAgICAgICB9KTsgICAgXHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBVc2VyU2NoZW1hLnN0YXRpY3MuZmluZEJ5RW1haWwgPSBmdW5jdGlvbiAocmVxRW1haWwpIHtcclxuICAgICAgICB2YXIgVXNlciA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFVzZXIuZmluZE9uZSh7ZW1haWw6cmVxRW1haWx9KTsgIFxyXG4gICAgfTtcclxuICAgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgdmFyIFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcnMnLCBVc2VyU2NoZW1hKTtcclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBVc2VyXHJcbn07XHJcbiJdfQ==