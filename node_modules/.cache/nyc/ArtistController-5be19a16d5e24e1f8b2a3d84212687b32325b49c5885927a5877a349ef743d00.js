function cov_mh7yjjexf(){var path="C:\\Users\\Dell\\Desktop\\new\\Controllers\\ArtistController.js";var hash="7ddbe5dca1838665dedac7a884485c7a2ed8bcac";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Dell\\Desktop\\new\\Controllers\\ArtistController.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:19},end:{line:2,column:47}},"2":{start:{line:3,column:17},end:{line:3,column:48}},"3":{start:{line:4,column:15},end:{line:4,column:44}},"4":{start:{line:5,column:8},end:{line:5,column:25}},"5":{start:{line:7,column:15},end:{line:7,column:32}},"6":{start:{line:8,column:17},end:{line:8,column:38}},"7":{start:{line:10,column:21},end:{line:10,column:39}},"8":{start:{line:11,column:12},end:{line:11,column:35}},"9":{start:{line:13,column:15},end:{line:13,column:31}},"10":{start:{line:14,column:29},end:{line:14,column:75}},"11":{start:{line:17,column:18},end:{line:17,column:70}},"12":{start:{line:18,column:11},end:{line:18,column:67}},"13":{start:{line:19,column:24},end:{line:19,column:83}},"14":{start:{line:20,column:22},end:{line:20,column:80}},"15":{start:{line:24,column:20},end:{line:30,column:2}},"16":{start:{line:34,column:0},end:{line:34,column:113}},"17":{start:{line:37,column:0},end:{line:52,column:3}},"18":{start:{line:38,column:4},end:{line:38,column:30}},"19":{start:{line:40,column:4},end:{line:40,column:23}},"20":{start:{line:41,column:4},end:{line:50,column:5}},"21":{start:{line:42,column:8},end:{line:42,column:50}},"22":{start:{line:45,column:8},end:{line:49,column:49}},"23":{start:{line:46,column:12},end:{line:46,column:80}},"24":{start:{line:46,column:27},end:{line:46,column:78}},"25":{start:{line:47,column:12},end:{line:47,column:32}},"26":{start:{line:49,column:24},end:{line:49,column:47}},"27":{start:{line:55,column:0},end:{line:82,column:3}},"28":{start:{line:56,column:4},end:{line:56,column:25}},"29":{start:{line:57,column:4},end:{line:57,column:32}},"30":{start:{line:58,column:15},end:{line:58,column:54}},"31":{start:{line:59,column:4},end:{line:59,column:19}},"32":{start:{line:62,column:2},end:{line:80,column:7}},"33":{start:{line:63,column:8},end:{line:63,column:23}},"34":{start:{line:64,column:2},end:{line:75,column:2}},"35":{start:{line:66,column:8},end:{line:70,column:11}},"36":{start:{line:67,column:12},end:{line:67,column:27}},"37":{start:{line:68,column:12},end:{line:68,column:53}},"38":{start:{line:69,column:12},end:{line:69,column:27}},"39":{start:{line:74,column:2},end:{line:74,column:93}},"40":{start:{line:78,column:8},end:{line:78,column:23}},"41":{start:{line:79,column:8},end:{line:79,column:70}},"42":{start:{line:108,column:0},end:{line:167,column:3}},"43":{start:{line:109,column:4},end:{line:166,column:5}},"44":{start:{line:110,column:21},end:{line:110,column:43}},"45":{start:{line:111,column:27},end:{line:111,column:69}},"46":{start:{line:113,column:21},end:{line:120,column:14}},"47":{start:{line:121,column:8},end:{line:121,column:32}},"48":{start:{line:122,column:8},end:{line:157,column:14}},"49":{start:{line:123,column:12},end:{line:123,column:32}},"50":{start:{line:127,column:14},end:{line:127,column:20}},"51":{start:{line:128,column:13},end:{line:128,column:103}},"52":{start:{line:129,column:2},end:{line:129,column:20}},"53":{start:{line:131,column:11},end:{line:131,column:26}},"54":{start:{line:132,column:11},end:{line:132,column:61}},"55":{start:{line:133,column:2},end:{line:133,column:20}},"56":{start:{line:134,column:18},end:{line:138,column:4}},"57":{start:{line:139,column:2},end:{line:139,column:27}},"58":{start:{line:140,column:2},end:{line:149,column:3}},"59":{start:{line:141,column:3},end:{line:147,column:5}},"60":{start:{line:142,column:4},end:{line:142,column:23}},"61":{start:{line:143,column:3},end:{line:143,column:20}},"62":{start:{line:145,column:4},end:{line:145,column:53}},"63":{start:{line:146,column:3},end:{line:146,column:19}},"64":{start:{line:151,column:12},end:{line:151,column:107}},"65":{start:{line:154,column:16},end:{line:154,column:33}},"66":{start:{line:155,column:16},end:{line:155,column:80}},"67":{start:{line:163,column:8},end:{line:163,column:25}},"68":{start:{line:164,column:8},end:{line:164,column:34}},"69":{start:{line:188,column:0},end:{line:199,column:2}},"70":{start:{line:189,column:3},end:{line:198,column:6}},"71":{start:{line:190,column:8},end:{line:193,column:9}},"72":{start:{line:191,column:3},end:{line:191,column:37}},"73":{start:{line:192,column:12},end:{line:192,column:36}},"74":{start:{line:195,column:2},end:{line:195,column:56}},"75":{start:{line:197,column:8},end:{line:197,column:31}},"76":{start:{line:277,column:0},end:{line:324,column:2}},"77":{start:{line:279,column:13},end:{line:279,column:14}},"78":{start:{line:280,column:14},end:{line:280,column:34}},"79":{start:{line:282,column:4},end:{line:322,column:6}},"80":{start:{line:284,column:8},end:{line:289,column:6}},"81":{start:{line:285,column:12},end:{line:285,column:32}},"82":{start:{line:286,column:13},end:{line:286,column:19}},"83":{start:{line:287,column:12},end:{line:287,column:51}},"84":{start:{line:291,column:13},end:{line:291,column:24}},"85":{start:{line:293,column:28},end:{line:293,column:32}},"86":{start:{line:295,column:4},end:{line:295,column:75}},"87":{start:{line:295,column:23},end:{line:295,column:74}},"88":{start:{line:297,column:4},end:{line:316,column:5}},"89":{start:{line:297,column:14},end:{line:297,column:15}},"90":{start:{line:299,column:4},end:{line:302,column:5}},"91":{start:{line:301,column:8},end:{line:301,column:50}},"92":{start:{line:304,column:4},end:{line:313,column:43}},"93":{start:{line:306,column:7},end:{line:310,column:8}},"94":{start:{line:312,column:7},end:{line:312,column:90}},"95":{start:{line:313,column:18},end:{line:313,column:41}},"96":{start:{line:317,column:0},end:{line:317,column:30}},"97":{start:{line:321,column:8},end:{line:321,column:60}},"98":{start:{line:329,column:0},end:{line:329,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:37,column:72},end:{line:37,column:73}},loc:{start:{line:37,column:86},end:{line:52,column:1}},line:37},"1":{name:"(anonymous_1)",decl:{start:{line:45,column:33},end:{line:45,column:34}},loc:{start:{line:45,column:45},end:{line:49,column:9}},line:45},"2":{name:"(anonymous_2)",decl:{start:{line:49,column:17},end:{line:49,column:18}},loc:{start:{line:49,column:24},end:{line:49,column:47}},line:49},"3":{name:"(anonymous_3)",decl:{start:{line:55,column:30},end:{line:55,column:31}},loc:{start:{line:55,column:44},end:{line:82,column:1}},line:55},"4":{name:"(anonymous_4)",decl:{start:{line:62,column:59},end:{line:62,column:60}},loc:{start:{line:62,column:71},end:{line:77,column:5}},line:62},"5":{name:"(anonymous_5)",decl:{start:{line:66,column:47},end:{line:66,column:48}},loc:{start:{line:66,column:58},end:{line:70,column:9}},line:66},"6":{name:"(anonymous_6)",decl:{start:{line:77,column:13},end:{line:77,column:14}},loc:{start:{line:77,column:20},end:{line:80,column:5}},line:77},"7":{name:"(anonymous_7)",decl:{start:{line:108,column:31},end:{line:108,column:32}},loc:{start:{line:108,column:51},end:{line:167,column:1}},line:108},"8":{name:"(anonymous_8)",decl:{start:{line:122,column:27},end:{line:122,column:28}},loc:{start:{line:122,column:36},end:{line:152,column:9}},line:122},"9":{name:"(anonymous_9)",decl:{start:{line:140,column:38},end:{line:140,column:39}},loc:{start:{line:140,column:63},end:{line:149,column:1}},line:140},"10":{name:"(anonymous_10)",decl:{start:{line:153,column:12},end:{line:153,column:13}},loc:{start:{line:153,column:21},end:{line:157,column:13}},line:153},"11":{name:"(anonymous_11)",decl:{start:{line:188,column:36},end:{line:188,column:37}},loc:{start:{line:188,column:49},end:{line:199,column:1}},line:188},"12":{name:"(anonymous_12)",decl:{start:{line:189,column:48},end:{line:189,column:49}},loc:{start:{line:189,column:63},end:{line:196,column:5}},line:189},"13":{name:"(anonymous_13)",decl:{start:{line:196,column:13},end:{line:196,column:14}},loc:{start:{line:196,column:20},end:{line:198,column:5}},line:196},"14":{name:"(anonymous_14)",decl:{start:{line:277,column:22},end:{line:277,column:23}},loc:{start:{line:277,column:39},end:{line:324,column:1}},line:277},"15":{name:"(anonymous_15)",decl:{start:{line:282,column:33},end:{line:282,column:34}},loc:{start:{line:282,column:46},end:{line:319,column:7}},line:282},"16":{name:"(anonymous_16)",decl:{start:{line:304,column:47},end:{line:304,column:48}},loc:{start:{line:305,column:4},end:{line:313,column:5}},line:305},"17":{name:"(anonymous_17)",decl:{start:{line:313,column:13},end:{line:313,column:14}},loc:{start:{line:313,column:18},end:{line:313,column:41}},line:313},"18":{name:"(anonymous_18)",decl:{start:{line:319,column:15},end:{line:319,column:16}},loc:{start:{line:319,column:20},end:{line:322,column:5}},line:319}},branchMap:{"0":{loc:{start:{line:41,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:50,column:5}},{start:{line:41,column:4},end:{line:50,column:5}}],line:41},"1":{loc:{start:{line:46,column:12},end:{line:46,column:80}},type:"if",locations:[{start:{line:46,column:12},end:{line:46,column:80}},{start:{line:46,column:12},end:{line:46,column:80}}],line:46},"2":{loc:{start:{line:64,column:2},end:{line:75,column:2}},type:"if",locations:[{start:{line:64,column:2},end:{line:75,column:2}},{start:{line:64,column:2},end:{line:75,column:2}}],line:64},"3":{loc:{start:{line:141,column:3},end:{line:147,column:5}},type:"if",locations:[{start:{line:141,column:3},end:{line:147,column:5}},{start:{line:141,column:3},end:{line:147,column:5}}],line:141},"4":{loc:{start:{line:190,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:190,column:8},end:{line:193,column:9}},{start:{line:190,column:8},end:{line:193,column:9}}],line:190},"5":{loc:{start:{line:284,column:8},end:{line:289,column:6}},type:"if",locations:[{start:{line:284,column:8},end:{line:289,column:6}},{start:{line:284,column:8},end:{line:289,column:6}}],line:284},"6":{loc:{start:{line:295,column:4},end:{line:295,column:75}},type:"if",locations:[{start:{line:295,column:4},end:{line:295,column:75}},{start:{line:295,column:4},end:{line:295,column:75}}],line:295},"7":{loc:{start:{line:299,column:4},end:{line:302,column:5}},type:"if",locations:[{start:{line:299,column:4},end:{line:302,column:5}},{start:{line:299,column:4},end:{line:302,column:5}}],line:299},"8":{loc:{start:{line:306,column:7},end:{line:310,column:8}},type:"if",locations:[{start:{line:306,column:7},end:{line:310,column:8}},{start:{line:306,column:7},end:{line:310,column:8}}],line:306}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ddbe5dca1838665dedac7a884485c7a2ed8bcac"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_mh7yjjexf=function(){return actualCoverage;};return actualCoverage;}cov_mh7yjjexf();const express=(cov_mh7yjjexf().s[0]++,require('express'));var{mongoose}=(cov_mh7yjjexf().s[1]++,require("../db/mongoose.js"));var{artist}=(cov_mh7yjjexf().s[2]++,require("../models/artists.js"));var{User}=(cov_mh7yjjexf().s[3]++,require("../models/users.js"));var _=(cov_mh7yjjexf().s[4]++,require('lodash'));//var bodyparser = require('body-parser');
const bcrypt=(cov_mh7yjjexf().s[5]++,require('bcrypt'));var nodemailer=(cov_mh7yjjexf().s[6]++,require("nodemailer"));const{ObjectID}=(cov_mh7yjjexf().s[7]++,require('mongodb'));const jwt=(cov_mh7yjjexf().s[8]++,require('jsonwebtoken'));const router=(cov_mh7yjjexf().s[9]++,express.Router());var AuthenticationServices=(cov_mh7yjjexf().s[10]++,require("./../Services/AuthenticationService"));//edit image imports
var uploadImagefn=(cov_mh7yjjexf().s[11]++,require("./../Services/ImageService.js").upLoadPhoto);var upload=(cov_mh7yjjexf().s[12]++,require("./../Services/ImageService.js").UploadUserPhoto);var AuthenticateArtist=(cov_mh7yjjexf().s[13]++,require("./../Services/ImageService.js").AuthenticateArtist);var AssignArtistImage=(cov_mh7yjjexf().s[14]++,require("./../Services/ImageService.js").AssignArtistImage);var smtpTransport=(cov_mh7yjjexf().s[15]++,nodemailer.createTransport({service:"Gmail",auth:{user:"sw.project.verify@gmail.com",pass:"abcd-1234"}}));//EDIT ARTIST PROFILE PICTURE REQUEST
cov_mh7yjjexf().s[16]++;router.post("/artists/profilepicture",AuthenticateArtist,upload,reSizeUserImage,uploadImagefn,AssignArtistImage);/////////////////
cov_mh7yjjexf().s[17]++;router.get('/artists/:id',AuthenticationServices.AuthenticateAllUsers,(req,res)=>{cov_mh7yjjexf().f[0]++;cov_mh7yjjexf().s[18]++;console.log(req.param.id);cov_mh7yjjexf().s[19]++;id=req.params.id;cov_mh7yjjexf().s[20]++;if(!ObjectID.isValid(id)){cov_mh7yjjexf().b[0][0]++;cov_mh7yjjexf().s[21]++;return res.status(404).send("invalid id");}else{cov_mh7yjjexf().b[0][1]++;cov_mh7yjjexf().s[22]++;artist.findById(id).then(artist=>{cov_mh7yjjexf().f[1]++;cov_mh7yjjexf().s[23]++;if(!artist){cov_mh7yjjexf().b[1][0]++;cov_mh7yjjexf().s[24]++;return res.status(404).send("can not find artist");}else{cov_mh7yjjexf().b[1][1]++;}cov_mh7yjjexf().s[25]++;res.send({artist});}).catch(e=>{cov_mh7yjjexf().f[2]++;cov_mh7yjjexf().s[26]++;return res.status(400).send(e);});}});cov_mh7yjjexf().s[27]++;router.post('/artists/login',(req,res)=>{cov_mh7yjjexf().f[3]++;cov_mh7yjjexf().s[28]++;console.log("email");cov_mh7yjjexf().s[29]++;console.log(req.body.email);var body=(cov_mh7yjjexf().s[30]++,_.pick(req.body,['email','password']));cov_mh7yjjexf().s[31]++;console.log(2);cov_mh7yjjexf().s[32]++;artist.findByCredentials(body.email,body.password).then(artist=>{cov_mh7yjjexf().f[4]++;cov_mh7yjjexf().s[33]++;console.log(3);cov_mh7yjjexf().s[34]++;if(artist.isActive==true){cov_mh7yjjexf().b[2][0]++;cov_mh7yjjexf().s[35]++;return artist.generateAuthToken().then(token=>{cov_mh7yjjexf().f[5]++;cov_mh7yjjexf().s[36]++;console.log(4);cov_mh7yjjexf().s[37]++;res.header('x-auth',token).send(artist);cov_mh7yjjexf().s[38]++;console.log(5);});}else{cov_mh7yjjexf().b[2][1]++;cov_mh7yjjexf().s[39]++;res.status(403).send("Please go to your inbox and click the link to activate your Email.");}}).catch(e=>{cov_mh7yjjexf().f[6]++;cov_mh7yjjexf().s[40]++;console.log(e);cov_mh7yjjexf().s[41]++;res.status(401).send("Either email or passwrod is incorrect");});});//SIGNUP FOR THE ARTISTS
/**
 * @api {post} api/artists/signup             Create a new artist
 * @apiName SignUp Request for artists
 * @apiGroup Artists 
 * 
 * @apiParam {String} artistName    Unique name of the artist
 * @apiParam {String} email         email of the artist
 * @apiParam {String} password      password of the artist
 * @apiParam  {Srting} about        A minimum of 100 characters that describe the artist
 *
 * @apiSuccess  (200) Artist added Successfully as inActive. Waiting for Email Confirmation
 * @apiSuccessExample {json} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *        "Artist added Successfully as inActive. Waiting for Email Confirmation "
 *     }
 * @apiError (409)  Conflict. the Artist already exists: duplicate artistName or email
 * @apiError (500) Internal Server Error 
 * @apiErrorExample {string} Conflict Error-Response:
 *       "artistName and/or Email already exists "
 */cov_mh7yjjexf().s[42]++;router.post('/artists/signup',async(req,res)=>{cov_mh7yjjexf().f[7]++;cov_mh7yjjexf().s[43]++;try{const salt=(cov_mh7yjjexf().s[44]++,await bcrypt.genSalt());const hashedPass=(cov_mh7yjjexf().s[45]++,await bcrypt.hash(req.body.password,salt));var newacc=(cov_mh7yjjexf().s[46]++,new artist({artistName:req.body.artistName,email:req.body.email,password:hashedPass,about:req.body.about}));cov_mh7yjjexf().s[47]++;console.log('2et3amal');cov_mh7yjjexf().s[48]++;newacc.save().then(doc=>{cov_mh7yjjexf().f[8]++;cov_mh7yjjexf().s[49]++;console.log("skod");var access=(cov_mh7yjjexf().s[50]++,'auth');var code=(cov_mh7yjjexf().s[51]++,jwt.sign({_id:newacc._id.toHexString(),access},'secretkeyforartist',{expiresIn:'1d'}));cov_mh7yjjexf().s[52]++;console.log(code);var host=(cov_mh7yjjexf().s[53]++,req.get('host'));var link=(cov_mh7yjjexf().s[54]++,"http://"+req.get('host')+"/artists/confirm/"+code);cov_mh7yjjexf().s[55]++;console.log(link);var mailOptions=(cov_mh7yjjexf().s[56]++,{to:req.body.email,subject:"Please confirm your Email account",html:"Hello,<br> Please Click on the link to verify your email.<br><a href="+link+">Click here to verify</a>"});cov_mh7yjjexf().s[57]++;console.log(mailOptions);cov_mh7yjjexf().s[58]++;smtpTransport.sendMail(mailOptions,function(error,response){cov_mh7yjjexf().f[9]++;cov_mh7yjjexf().s[59]++;if(error){cov_mh7yjjexf().b[3][0]++;cov_mh7yjjexf().s[60]++;console.log(error);cov_mh7yjjexf().s[61]++;res.end("error");}else{cov_mh7yjjexf().b[3][1]++;cov_mh7yjjexf().s[62]++;console.log("Message sent: "+response.message);cov_mh7yjjexf().s[63]++;res.end("sent");}});cov_mh7yjjexf().s[64]++;res.status(200).send("Artist added Successfully as inActive. Waiting for Email Confirmation ");},err=>{cov_mh7yjjexf().f[10]++;cov_mh7yjjexf().s[65]++;console.log(err);cov_mh7yjjexf().s[66]++;res.status(409).send("artistName and/or Email already exists ");});}catch(err){cov_mh7yjjexf().s[67]++;console.log(err);cov_mh7yjjexf().s[68]++;res.status(500).send(err);}});//CONFIRMATION OF ARTIST SIGNUP 
/**
 * @api {get} api/artists/confirm/:code      SignUp Confrimation 
 * @apiName SignUp Confirmed for artists
 * @apiGroup Artists
 * 
 * @apiParam {String} code    artist-specific code to activate his account
 * 
 * @apiSuccess  (200) artist was activated successfully
 * @apiSuccessExample {json} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *       "Email confirmed successfully!"
 *     }
 * @apiError (404)  artist not found.
 * @apiError (401) Unauthorized. Recieved a corrupted code. 
 * 
 */cov_mh7yjjexf().s[69]++;router.get('/artists/confirm/:code',(req,res)=>{cov_mh7yjjexf().f[11]++;cov_mh7yjjexf().s[70]++;artist.ActivateByToken(req.params.code).then(activated=>{cov_mh7yjjexf().f[12]++;cov_mh7yjjexf().s[71]++;if(!activated){cov_mh7yjjexf().b[4][0]++;cov_mh7yjjexf().s[72]++;res.status(404).send("not found");cov_mh7yjjexf().s[73]++;return Promise.reject();}else{cov_mh7yjjexf().b[4][1]++;}cov_mh7yjjexf().s[74]++;res.status(200).send("Email confirmed successfully!");}).catch(e=>{cov_mh7yjjexf().f[13]++;cov_mh7yjjexf().s[75]++;res.status(401).send();});});/**
 * @api {get} /api/artists Get several Artists
 * @apiName GetSeveralArtists
 * @apiGroup Artists
 *
 * @apiHeader {string}  x-auth          Authorization Required. A valid access token.
 * 
 * @apiParam {string[]}        ids array of each Artist's unique ID.
 *
 * @apiSuccess {Artist[]}          artists An array of Artist objects containing the full details of each  Artist.
 * 
 * @apiSuccessExample {JSON} Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *     [
    {
        "artistName": "HAmo Beeka",
        "genres": [
            "sha3by",
            "R&B"
        ],
        "about": "Adele Laurie Blue Adkins (born May 5, 1988) is a British singer-songwriter \nwho has sold millions of albums worldwide and won a total of 15 Grammys as well as an Oscar.\n     Adele's first two albums, 19 and 21, earned her critical praise and a level of\n      commercial success unsurpassed among her peers.",
        "rating": -1
    },
    {
        "artistName": "Adele",
        "genres": [
            "pop",
            "R&B"
        ],
        "about": "Adele Laurie Blue Adkins (born May 5, 1988) is a British singer-songwriter \n    who has sold millions of albums worldwide and won a total of 15 Grammys as well as an Oscar.\n     Adele's first two albums, 19 and 21, earned her critical praise and a level of\n      commercial success unsurpassed among her peers.",
        "rating": 4
    },
    {
        "artistName": "Eminem",
        "genres": [
            "Trap",
            "Jazz",
            "pop",
            "Rap"
        ],
        "about": "Marshall Bruce Mathers III (born October 17, 1972), known professionally as Eminem\n     (/ˌɛmɪˈnɛm/; often stylized as EMINƎM), is an American rapper, songwriter, record producer, \n     record executive and actor. He is one of the most successful musical artists of the 21st century.",
        "rating": 4.6
    }
]
}
 * @apiError ArtistNotFound The id of the Artist was not found.
 *
 * @apiErrorExample {string} AuthError-Response:
 *     HTTP/1.1 401  Not Found
 *     {
 *       "authentication failed"
 *     }
 *     
 *     @apiError Exceeded 5o ids 
 *
 * @apiErrorExample {string}      BadRequest-Response:
 *     HTTP/1.1 400 Bad Request
 *     {
 *       "maximum 50 ids"
 *     }
 * 
 *     @apiError invalid id
 *
 * @apiErrorExample {string}       forbidden-Response:
 *     HTTP/1.1 403 forbidden
 *     {
 *       "invalid id"
 *     }
 * 
 * 
 * 
 */cov_mh7yjjexf().s[76]++;router.get('/artists',async(req,res)=>{cov_mh7yjjexf().f[14]++;var flag=(cov_mh7yjjexf().s[77]++,1);var token=(cov_mh7yjjexf().s[78]++,req.header('x-auth'));cov_mh7yjjexf().s[79]++;User.findByToken(token).then(async user=>{cov_mh7yjjexf().f[15]++;cov_mh7yjjexf().s[80]++;if(!user){cov_mh7yjjexf().b[5][0]++;cov_mh7yjjexf().s[81]++;console.log('eeee');cov_mh7yjjexf().s[82]++;flag=0;cov_mh7yjjexf().s[83]++;Promise.reject("authenticaton failed");//return res.status(401).send('authentication failed')
}else{cov_mh7yjjexf().b[5][1]++;};var arr=(cov_mh7yjjexf().s[84]++,req.body.id);var returnedArtistArray=(cov_mh7yjjexf().s[85]++,[{}]);cov_mh7yjjexf().s[86]++;if(arr.length>50){cov_mh7yjjexf().b[6][0]++;cov_mh7yjjexf().s[87]++;return res.status(400).send("maximum 50 Ids only");}else{cov_mh7yjjexf().b[6][1]++;}cov_mh7yjjexf().s[88]++;for(var i=(cov_mh7yjjexf().s[89]++,0);i<arr.length;i++){cov_mh7yjjexf().s[90]++;if(!ObjectID.isValid(arr[i])){cov_mh7yjjexf().b[7][0]++;cov_mh7yjjexf().s[91]++;return res.status(403).send("invalid id");}else{cov_mh7yjjexf().b[7][1]++;}cov_mh7yjjexf().s[92]++;await artist.findById(req.body.id[i]).then(artists=>{cov_mh7yjjexf().f[16]++;cov_mh7yjjexf().s[93]++;if(!artists)//{return res.status(404).send("can not find artist");}
{cov_mh7yjjexf().b[8][0]++;}else{cov_mh7yjjexf().b[8][1]++;}cov_mh7yjjexf().s[94]++;returnedArtistArray[i]=_.pick(artists,['artistName','genres','about','rating']);;}).catch(e=>{cov_mh7yjjexf().f[17]++;cov_mh7yjjexf().s[95]++;return res.status(400).send(e);});}cov_mh7yjjexf().s[96]++;res.send(returnedArtistArray);}).catch(e=>{cov_mh7yjjexf().f[18]++;cov_mh7yjjexf().s[97]++;return res.status(401).send("authentication failed");});});cov_mh7yjjexf().s[98]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGlzdENvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJtb25nb29zZSIsImFydGlzdCIsIlVzZXIiLCJfIiwiYmNyeXB0Iiwibm9kZW1haWxlciIsIk9iamVjdElEIiwiand0Iiwicm91dGVyIiwiUm91dGVyIiwiQXV0aGVudGljYXRpb25TZXJ2aWNlcyIsInVwbG9hZEltYWdlZm4iLCJ1cExvYWRQaG90byIsInVwbG9hZCIsIlVwbG9hZFVzZXJQaG90byIsIkF1dGhlbnRpY2F0ZUFydGlzdCIsIkFzc2lnbkFydGlzdEltYWdlIiwic210cFRyYW5zcG9ydCIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInBhc3MiLCJwb3N0IiwicmVTaXplVXNlckltYWdlIiwiZ2V0IiwiQXV0aGVudGljYXRlQWxsVXNlcnMiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwicGFyYW0iLCJpZCIsInBhcmFtcyIsImlzVmFsaWQiLCJzdGF0dXMiLCJzZW5kIiwiZmluZEJ5SWQiLCJ0aGVuIiwiY2F0Y2giLCJlIiwiYm9keSIsImVtYWlsIiwicGljayIsImZpbmRCeUNyZWRlbnRpYWxzIiwicGFzc3dvcmQiLCJpc0FjdGl2ZSIsImdlbmVyYXRlQXV0aFRva2VuIiwidG9rZW4iLCJoZWFkZXIiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3MiLCJoYXNoIiwibmV3YWNjIiwiYXJ0aXN0TmFtZSIsImFib3V0Iiwic2F2ZSIsImRvYyIsImFjY2VzcyIsImNvZGUiLCJzaWduIiwiX2lkIiwidG9IZXhTdHJpbmciLCJleHBpcmVzSW4iLCJob3N0IiwibGluayIsIm1haWxPcHRpb25zIiwidG8iLCJzdWJqZWN0IiwiaHRtbCIsInNlbmRNYWlsIiwiZXJyb3IiLCJyZXNwb25zZSIsImVuZCIsIm1lc3NhZ2UiLCJlcnIiLCJBY3RpdmF0ZUJ5VG9rZW4iLCJhY3RpdmF0ZWQiLCJQcm9taXNlIiwicmVqZWN0IiwiZmxhZyIsImZpbmRCeVRva2VuIiwiYXJyIiwicmV0dXJuZWRBcnRpc3RBcnJheSIsImxlbmd0aCIsImkiLCJhcnRpc3RzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6InVuWEFBQSxLQUFNQSxDQUFBQSxPQUFPLHlCQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFWLENBQWIsQ0FDQSxHQUFJLENBQUVDLFFBQUYsMEJBQWVELE9BQU8sQ0FBQyxtQkFBRCxDQUF0QixDQUFKLENBQ0EsR0FBSSxDQUFFRSxNQUFGLDBCQUFhRixPQUFPLENBQUMsc0JBQUQsQ0FBcEIsQ0FBSixDQUNBLEdBQUksQ0FBRUcsSUFBRiwwQkFBV0gsT0FBTyxDQUFDLG9CQUFELENBQWxCLENBQUosQ0FDQSxHQUFJSSxDQUFBQSxDQUFDLHlCQUFHSixPQUFPLENBQUMsUUFBRCxDQUFWLENBQUwsQ0FDQTtBQUNBLEtBQU1LLENBQUFBLE1BQU0seUJBQUdMLE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEdBQUlNLENBQUFBLFVBQVUseUJBQUdOLE9BQU8sQ0FBQyxZQUFELENBQVYsQ0FBZCxDQUVBLEtBQU0sQ0FBRU8sUUFBRiwwQkFBZVAsT0FBTyxDQUFDLFNBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU1RLENBQUFBLEdBQUcseUJBQUdSLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUVBLEtBQU1TLENBQUFBLE1BQU0seUJBQUdWLE9BQU8sQ0FBQ1csTUFBUixFQUFILENBQVosQ0FDQSxHQUFJQyxDQUFBQSxzQkFBc0IsMEJBQUdYLE9BQU8sQ0FBQyxxQ0FBRCxDQUFWLENBQTFCLENBRUE7QUFDQSxHQUFJWSxDQUFBQSxhQUFhLDBCQUFDWixPQUFPLENBQUMsK0JBQUQsQ0FBUCxDQUF5Q2EsV0FBMUMsQ0FBakIsQ0FDQSxHQUFJQyxDQUFBQSxNQUFNLDBCQUFDZCxPQUFPLENBQUMsK0JBQUQsQ0FBUCxDQUF5Q2UsZUFBMUMsQ0FBVixDQUNBLEdBQUlDLENBQUFBLGtCQUFrQiwwQkFBRWhCLE9BQU8sQ0FBQywrQkFB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dWlyZSgnZXhwcmVzcycpO1xyXG52YXIgeyBtb25nb29zZSB9ID0gcmVxdWlyZShcIi4uL2RiL21vbmdvb3NlLmpzXCIpO1xyXG52YXIgeyBhcnRpc3QgfSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvYXJ0aXN0cy5qc1wiKTtcclxudmFyIHsgVXNlciB9ID0gcmVxdWlyZShcIi4uL21vZGVscy91c2Vycy5qc1wiKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuLy92YXIgYm9keXBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xyXG52YXIgbm9kZW1haWxlciA9IHJlcXVpcmUoXCJub2RlbWFpbGVyXCIpO1xyXG5cclxuY29uc3QgeyBPYmplY3RJRCB9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xyXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbnZhciBBdXRoZW50aWNhdGlvblNlcnZpY2VzID0gcmVxdWlyZShcIi4vLi4vU2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlXCIpO1xyXG5cclxuLy9lZGl0IGltYWdlIGltcG9ydHNcclxudmFyIHVwbG9hZEltYWdlZm49cmVxdWlyZShcIi4vLi4vU2VydmljZXMvSW1hZ2VTZXJ2aWNlLmpzXCIpLnVwTG9hZFBob3RvO1xyXG52YXIgdXBsb2FkPXJlcXVpcmUoXCIuLy4uL1NlcnZpY2VzL0ltYWdlU2VydmljZS5qc1wiKS5VcGxvYWRVc2VyUGhvdG87XHJcbnZhciBBdXRoZW50aWNhdGVBcnRpc3Q9IHJlcXVpcmUoXCIuLy4uL1NlcnZpY2VzL0ltYWdlU2VydmljZS5qc1wiKS5BdXRoZW50aWNhdGVBcnRpc3Q7XHJcbnZhciBBc3NpZ25BcnRpc3RJbWFnZT1yZXF1aXJlKFwiLi8uLi9TZXJ2aWNlcy9JbWFnZVNlcnZpY2UuanNcIikuQXNzaWduQXJ0aXN0SW1hZ2U7XHJcblxyXG5cclxuXHJcbnZhciBzbXRwVHJhbnNwb3J0ID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgc2VydmljZTogXCJHbWFpbFwiLFxyXG4gICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IFwic3cucHJvamVjdC52ZXJpZnlAZ21haWwuY29tXCIsXHJcbiAgICAgICAgcGFzczogXCJhYmNkLTEyMzRcIlxyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG4vL0VESVQgQVJUSVNUIFBST0ZJTEUgUElDVFVSRSBSRVFVRVNUXHJcbnJvdXRlci5wb3N0KFwiL2FydGlzdHMvcHJvZmlsZXBpY3R1cmVcIixBdXRoZW50aWNhdGVBcnRpc3QsdXBsb2FkLHJlU2l6ZVVzZXJJbWFnZSx1cGxvYWRJbWFnZWZuLEFzc2lnbkFydGlzdEltYWdlKTtcclxuLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbnJvdXRlci5nZXQoJy9hcnRpc3RzLzppZCcsIEF1dGhlbnRpY2F0aW9uU2VydmljZXMuQXV0aGVudGljYXRlQWxsVXNlcnMsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVxLnBhcmFtLmlkKTtcclxuXHJcbiAgICBpZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQoaWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiaW52YWxpZCBpZFwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFydGlzdC5maW5kQnlJZChpZCkudGhlbigoYXJ0aXN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYXJ0aXN0KSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZChcImNhbiBub3QgZmluZCBhcnRpc3RcIik7IH1cclxuICAgICAgICAgICAgcmVzLnNlbmQoeyBhcnRpc3QgfSlcclxuXHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpKTtcclxuICAgIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcbnJvdXRlci5wb3N0KCcvYXJ0aXN0cy9sb2dpbicsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJlbWFpbFwiKTtcclxuICAgIGNvbnNvbGUubG9nKHJlcS5ib2R5LmVtYWlsKTtcclxuICAgIHZhciBib2R5ID0gXy5waWNrKHJlcS5ib2R5LCBbJ2VtYWlsJywgJ3Bhc3N3b3JkJ10pO1xyXG4gICAgY29uc29sZS5sb2coMik7XHJcblx0XHJcblx0XHJcblx0XHRhcnRpc3QuZmluZEJ5Q3JlZGVudGlhbHMoYm9keS5lbWFpbCwgYm9keS5wYXNzd29yZCkudGhlbigoYXJ0aXN0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coMyk7XHJcblx0XHRpZihhcnRpc3QuaXNBY3RpdmU9PXRydWUpXHJcblx0e1xyXG4gICAgICAgIHJldHVybiBhcnRpc3QuZ2VuZXJhdGVBdXRoVG9rZW4oKS50aGVuKCh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyg0KTtcclxuICAgICAgICAgICAgcmVzLmhlYWRlcigneC1hdXRoJywgdG9rZW4pLnNlbmQoYXJ0aXN0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coNSk7XHJcbiAgICAgICAgfSk7XHJcblx0fVx0XHJcblx0ZWxzZVxyXG5cdHtcclxuXHRcdHJlcy5zdGF0dXMoNDAzKS5zZW5kKFwiUGxlYXNlIGdvIHRvIHlvdXIgaW5ib3ggYW5kIGNsaWNrIHRoZSBsaW5rIHRvIGFjdGl2YXRlIHlvdXIgRW1haWwuXCIpO1xyXG5cdH1cclxuXHRcdFxyXG4gICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZChcIkVpdGhlciBlbWFpbCBvciBwYXNzd3JvZCBpcyBpbmNvcnJlY3RcIik7XHJcbiAgICB9KTtcclxuXHJcbn0pO1xyXG5cclxuXHJcbiAvL1NJR05VUCBGT1IgVEhFIEFSVElTVFNcclxuICAvKipcclxuICogQGFwaSB7cG9zdH0gYXBpL2FydGlzdHMvc2lnbnVwICAgICAgICAgICAgIENyZWF0ZSBhIG5ldyBhcnRpc3RcclxuICogQGFwaU5hbWUgU2lnblVwIFJlcXVlc3QgZm9yIGFydGlzdHNcclxuICogQGFwaUdyb3VwIEFydGlzdHMgXHJcbiAqIFxyXG4gKiBAYXBpUGFyYW0ge1N0cmluZ30gYXJ0aXN0TmFtZSAgICBVbmlxdWUgbmFtZSBvZiB0aGUgYXJ0aXN0XHJcbiAqIEBhcGlQYXJhbSB7U3RyaW5nfSBlbWFpbCAgICAgICAgIGVtYWlsIG9mIHRoZSBhcnRpc3RcclxuICogQGFwaVBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkICAgICAgcGFzc3dvcmQgb2YgdGhlIGFydGlzdFxyXG4gKiBAYXBpUGFyYW0gIHtTcnRpbmd9IGFib3V0ICAgICAgICBBIG1pbmltdW0gb2YgMTAwIGNoYXJhY3RlcnMgdGhhdCBkZXNjcmliZSB0aGUgYXJ0aXN0XHJcbiAqXHJcbiAqIEBhcGlTdWNjZXNzICAoMjAwKSBBcnRpc3QgYWRkZWQgU3VjY2Vzc2Z1bGx5IGFzIGluQWN0aXZlLiBXYWl0aW5nIGZvciBFbWFpbCBDb25maXJtYXRpb25cclxuICogQGFwaVN1Y2Nlc3NFeGFtcGxlIHtqc29ufSBTdWNjZXNzLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgMjAwIE9LXHJcbiAqICAgICB7XHJcbiAqICAgICAgICBcIkFydGlzdCBhZGRlZCBTdWNjZXNzZnVsbHkgYXMgaW5BY3RpdmUuIFdhaXRpbmcgZm9yIEVtYWlsIENvbmZpcm1hdGlvbiBcIlxyXG4gKiAgICAgfVxyXG4gKiBAYXBpRXJyb3IgKDQwOSkgIENvbmZsaWN0LiB0aGUgQXJ0aXN0IGFscmVhZHkgZXhpc3RzOiBkdXBsaWNhdGUgYXJ0aXN0TmFtZSBvciBlbWFpbFxyXG4gKiBAYXBpRXJyb3IgKDUwMCkgSW50ZXJuYWwgU2VydmVyIEVycm9yIFxyXG4gKiBAYXBpRXJyb3JFeGFtcGxlIHtzdHJpbmd9IENvbmZsaWN0IEVycm9yLVJlc3BvbnNlOlxyXG4gKiAgICAgICBcImFydGlzdE5hbWUgYW5kL29yIEVtYWlsIGFscmVhZHkgZXhpc3RzIFwiXHJcbiAqL1xyXG5cclxucm91dGVyLnBvc3QoJy9hcnRpc3RzL3NpZ251cCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoKTtcclxuICAgICAgICBjb25zdCBoYXNoZWRQYXNzID0gYXdhaXQgYmNyeXB0Lmhhc2gocmVxLmJvZHkucGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgICBcclxuICAgICAgICB2YXIgbmV3YWNjID0gbmV3IGFydGlzdChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICBhcnRpc3ROYW1lOiByZXEuYm9keS5hcnRpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzLFxyXG4gICAgICAgICAgICAgICBhYm91dDogcmVxLmJvZHkuYWJvdXQsXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnMmV0M2FtYWwnKTtcclxuICAgICAgICBuZXdhY2Muc2F2ZSgpLnRoZW4oKGRvYykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNrb2RcIik7XHJcblx0XHJcblx0XHJcblx0XHRcclxuXHRcdHZhciBhY2Nlc3M9ICdhdXRoJztcdFx0XHJcblx0XHR2YXIgY29kZSA9IGp3dC5zaWduKHsgX2lkOiBuZXdhY2MuX2lkLnRvSGV4U3RyaW5nKCksIGFjY2VzcyB9LCAnc2VjcmV0a2V5Zm9yYXJ0aXN0Jyx7ZXhwaXJlc0luOicxZCd9KTtcclxuXHRcdGNvbnNvbGUubG9nKGNvZGUpO1xyXG5cdFx0XHJcblx0XHR2YXIgaG9zdD1yZXEuZ2V0KCdob3N0Jyk7XHJcblx0XHR2YXIgbGluaz1cImh0dHA6Ly9cIityZXEuZ2V0KCdob3N0JykrXCIvYXJ0aXN0cy9jb25maXJtL1wiK2NvZGU7XHJcblx0XHRjb25zb2xlLmxvZyhsaW5rKTtcclxuXHRcdHZhciBtYWlsT3B0aW9ucz17XHJcblx0XHRcdHRvIDogcmVxLmJvZHkuZW1haWwsXHJcblx0XHRcdHN1YmplY3QgOiBcIlBsZWFzZSBjb25maXJtIHlvdXIgRW1haWwgYWNjb3VudFwiLFxyXG5cdFx0XHRodG1sIDogXCJIZWxsbyw8YnI+IFBsZWFzZSBDbGljayBvbiB0aGUgbGluayB0byB2ZXJpZnkgeW91ciBlbWFpbC48YnI+PGEgaHJlZj1cIitsaW5rK1wiPkNsaWNrIGhlcmUgdG8gdmVyaWZ5PC9hPlwiXHJcblx0XHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKG1haWxPcHRpb25zKTtcclxuXHRcdHNtdHBUcmFuc3BvcnQuc2VuZE1haWwobWFpbE9wdGlvbnMsIGZ1bmN0aW9uKGVycm9yLCByZXNwb25zZSl7XHJcblx0XHQgaWYoZXJyb3Ipe1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0cmVzLmVuZChcImVycm9yXCIpO1xyXG5cdFx0IH1lbHNle1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiTWVzc2FnZSBzZW50OiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xyXG5cdFx0XHRyZXMuZW5kKFwic2VudFwiKTtcclxuXHRcdFx0IH1cclxuXHRcdFx0IFxyXG59KTtcclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiQXJ0aXN0IGFkZGVkIFN1Y2Nlc3NmdWxseSBhcyBpbkFjdGl2ZS4gV2FpdGluZyBmb3IgRW1haWwgQ29uZmlybWF0aW9uIFwiKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDkpLnNlbmQoXCJhcnRpc3ROYW1lIGFuZC9vciBFbWFpbCBhbHJlYWR5IGV4aXN0cyBcIik7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjYXRjaChlcnIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59KTtcclxuXHJcbiAvL0NPTkZJUk1BVElPTiBPRiBBUlRJU1QgU0lHTlVQIFxyXG4vKipcclxuICogQGFwaSB7Z2V0fSBhcGkvYXJ0aXN0cy9jb25maXJtLzpjb2RlICAgICAgU2lnblVwIENvbmZyaW1hdGlvbiBcclxuICogQGFwaU5hbWUgU2lnblVwIENvbmZpcm1lZCBmb3IgYXJ0aXN0c1xyXG4gKiBAYXBpR3JvdXAgQXJ0aXN0c1xyXG4gKiBcclxuICogQGFwaVBhcmFtIHtTdHJpbmd9IGNvZGUgICAgYXJ0aXN0LXNwZWNpZmljIGNvZGUgdG8gYWN0aXZhdGUgaGlzIGFjY291bnRcclxuICogXHJcbiAqIEBhcGlTdWNjZXNzICAoMjAwKSBhcnRpc3Qgd2FzIGFjdGl2YXRlZCBzdWNjZXNzZnVsbHlcclxuICogQGFwaVN1Y2Nlc3NFeGFtcGxlIHtqc29ufSBTdWNjZXNzLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgMjAwIE9LXHJcbiAqICAgICB7XHJcbiAqICAgICAgIFwiRW1haWwgY29uZmlybWVkIHN1Y2Nlc3NmdWxseSFcIlxyXG4gKiAgICAgfVxyXG4gKiBAYXBpRXJyb3IgKDQwNCkgIGFydGlzdCBub3QgZm91bmQuXHJcbiAqIEBhcGlFcnJvciAoNDAxKSBVbmF1dGhvcml6ZWQuIFJlY2lldmVkIGEgY29ycnVwdGVkIGNvZGUuIFxyXG4gKiBcclxuICovXHJcblxyXG5yb3V0ZXIuZ2V0KCcvYXJ0aXN0cy9jb25maXJtLzpjb2RlJywocmVxLHJlcykgPT4ge1xyXG4gICBhcnRpc3QuQWN0aXZhdGVCeVRva2VuKHJlcS5wYXJhbXMuY29kZSkudGhlbigoYWN0aXZhdGVkKSA9PiB7XHJcbiAgICAgICAgaWYoIWFjdGl2YXRlZCl7XHJcblx0XHRcdHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwibm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgICAgICB9XHJcblx0XHJcblx0XHRyZXMuc3RhdHVzKDIwMCkuc2VuZChcIkVtYWlsIGNvbmZpcm1lZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCgpO1xyXG4gICAgfSlcclxufSlcdFx0XHJcblxyXG5cclxuLyoqXHJcbiAqIEBhcGkge2dldH0gL2FwaS9hcnRpc3RzIEdldCBzZXZlcmFsIEFydGlzdHNcclxuICogQGFwaU5hbWUgR2V0U2V2ZXJhbEFydGlzdHNcclxuICogQGFwaUdyb3VwIEFydGlzdHNcclxuICpcclxuICogQGFwaUhlYWRlciB7c3RyaW5nfSAgeC1hdXRoICAgICAgICAgIEF1dGhvcml6YXRpb24gUmVxdWlyZWQuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxyXG4gKiBcclxuICogQGFwaVBhcmFtIHtzdHJpbmdbXX0gICAgICAgIGlkcyBhcnJheSBvZiBlYWNoIEFydGlzdCdzIHVuaXF1ZSBJRC5cclxuICpcclxuICogQGFwaVN1Y2Nlc3Mge0FydGlzdFtdfSAgICAgICAgICBhcnRpc3RzIEFuIGFycmF5IG9mIEFydGlzdCBvYmplY3RzIGNvbnRhaW5pbmcgdGhlIGZ1bGwgZGV0YWlscyBvZiBlYWNoICBBcnRpc3QuXHJcbiAqIFxyXG4gKiBAYXBpU3VjY2Vzc0V4YW1wbGUge0pTT059IFN1Y2Nlc3MtUmVzcG9uc2U6XHJcbiAqICAgICBIVFRQLzEuMSAyMDAgT0tcclxuICogICAgIHtcclxuICogICAgIFtcclxuICAgIHtcclxuICAgICAgICBcImFydGlzdE5hbWVcIjogXCJIQW1vIEJlZWthXCIsXHJcbiAgICAgICAgXCJnZW5yZXNcIjogW1xyXG4gICAgICAgICAgICBcInNoYTNieVwiLFxyXG4gICAgICAgICAgICBcIlImQlwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBcImFib3V0XCI6IFwiQWRlbGUgTGF1cmllIEJsdWUgQWRraW5zIChib3JuIE1heSA1LCAxOTg4KSBpcyBhIEJyaXRpc2ggc2luZ2VyLXNvbmd3cml0ZXIgXFxud2hvIGhhcyBzb2xkIG1pbGxpb25zIG9mIGFsYnVtcyB3b3JsZHdpZGUgYW5kIHdvbiBhIHRvdGFsIG9mIDE1IEdyYW1teXMgYXMgd2VsbCBhcyBhbiBPc2Nhci5cXG4gICAgIEFkZWxlJ3MgZmlyc3QgdHdvIGFsYnVtcywgMTkgYW5kIDIxLCBlYXJuZWQgaGVyIGNyaXRpY2FsIHByYWlzZSBhbmQgYSBsZXZlbCBvZlxcbiAgICAgIGNvbW1lcmNpYWwgc3VjY2VzcyB1bnN1cnBhc3NlZCBhbW9uZyBoZXIgcGVlcnMuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogLTFcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJhcnRpc3ROYW1lXCI6IFwiQWRlbGVcIixcclxuICAgICAgICBcImdlbnJlc1wiOiBbXHJcbiAgICAgICAgICAgIFwicG9wXCIsXHJcbiAgICAgICAgICAgIFwiUiZCXCJcclxuICAgICAgICBdLFxyXG4gICAgICAgIFwiYWJvdXRcIjogXCJBZGVsZSBMYXVyaWUgQmx1ZSBBZGtpbnMgKGJvcm4gTWF5IDUsIDE5ODgpIGlzIGEgQnJpdGlzaCBzaW5nZXItc29uZ3dyaXRlciBcXG4gICAgd2hvIGhhcyBzb2xkIG1pbGxpb25zIG9mIGFsYnVtcyB3b3JsZHdpZGUgYW5kIHdvbiBhIHRvdGFsIG9mIDE1IEdyYW1teXMgYXMgd2VsbCBhcyBhbiBPc2Nhci5cXG4gICAgIEFkZWxlJ3MgZmlyc3QgdHdvIGFsYnVtcywgMTkgYW5kIDIxLCBlYXJuZWQgaGVyIGNyaXRpY2FsIHByYWlzZSBhbmQgYSBsZXZlbCBvZlxcbiAgICAgIGNvbW1lcmNpYWwgc3VjY2VzcyB1bnN1cnBhc3NlZCBhbW9uZyBoZXIgcGVlcnMuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogNFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImFydGlzdE5hbWVcIjogXCJFbWluZW1cIixcclxuICAgICAgICBcImdlbnJlc1wiOiBbXHJcbiAgICAgICAgICAgIFwiVHJhcFwiLFxyXG4gICAgICAgICAgICBcIkphenpcIixcclxuICAgICAgICAgICAgXCJwb3BcIixcclxuICAgICAgICAgICAgXCJSYXBcIlxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgXCJhYm91dFwiOiBcIk1hcnNoYWxsIEJydWNlIE1hdGhlcnMgSUlJIChib3JuIE9jdG9iZXIgMTcsIDE5NzIpLCBrbm93biBwcm9mZXNzaW9uYWxseSBhcyBFbWluZW1cXG4gICAgICgvy4zJm23JqsuIbsmbbS87IG9mdGVuIHN0eWxpemVkIGFzIEVNSU7Gjk0pLCBpcyBhbiBBbWVyaWNhbiByYXBwZXIsIHNvbmd3cml0ZXIsIHJlY29yZCBwcm9kdWNlciwgXFxuICAgICByZWNvcmQgZXhlY3V0aXZlIGFuZCBhY3Rvci4gSGUgaXMgb25lIG9mIHRoZSBtb3N0IHN1Y2Nlc3NmdWwgbXVzaWNhbCBhcnRpc3RzIG9mIHRoZSAyMXN0IGNlbnR1cnkuXCIsXHJcbiAgICAgICAgXCJyYXRpbmdcIjogNC42XHJcbiAgICB9XHJcbl1cclxufVxyXG4gKiBAYXBpRXJyb3IgQXJ0aXN0Tm90Rm91bmQgVGhlIGlkIG9mIHRoZSBBcnRpc3Qgd2FzIG5vdCBmb3VuZC5cclxuICpcclxuICogQGFwaUVycm9yRXhhbXBsZSB7c3RyaW5nfSBBdXRoRXJyb3ItUmVzcG9uc2U6XHJcbiAqICAgICBIVFRQLzEuMSA0MDEgIE5vdCBGb3VuZFxyXG4gKiAgICAge1xyXG4gKiAgICAgICBcImF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiXHJcbiAqICAgICB9XHJcbiAqICAgICBcclxuICogICAgIEBhcGlFcnJvciBFeGNlZWRlZCA1byBpZHMgXHJcbiAqXHJcbiAqIEBhcGlFcnJvckV4YW1wbGUge3N0cmluZ30gICAgICBCYWRSZXF1ZXN0LVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgNDAwIEJhZCBSZXF1ZXN0XHJcbiAqICAgICB7XHJcbiAqICAgICAgIFwibWF4aW11bSA1MCBpZHNcIlxyXG4gKiAgICAgfVxyXG4gKiBcclxuICogICAgIEBhcGlFcnJvciBpbnZhbGlkIGlkXHJcbiAqXHJcbiAqIEBhcGlFcnJvckV4YW1wbGUge3N0cmluZ30gICAgICAgZm9yYmlkZGVuLVJlc3BvbnNlOlxyXG4gKiAgICAgSFRUUC8xLjEgNDAzIGZvcmJpZGRlblxyXG4gKiAgICAge1xyXG4gKiAgICAgICBcImludmFsaWQgaWRcIlxyXG4gKiAgICAgfVxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKi9cclxuXHJcblxyXG5yb3V0ZXIuZ2V0KCcvYXJ0aXN0cycsYXN5bmMgKHJlcSxyZXMpPT57XHJcblxyXG4gICAgdmFyIGZsYWc9MVxyXG4gICAgdmFyIHRva2VuPXJlcS5oZWFkZXIoJ3gtYXV0aCcpO1xyXG5cclxuICAgIFVzZXIuZmluZEJ5VG9rZW4odG9rZW4pLnRoZW4oYXN5bmModXNlcik9PntcclxuXHJcbiAgICAgICAgaWYoIXVzZXIpIHsgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlZWVlJyk7XHJcbiAgICAgICAgICAgICBmbGFnPTBcclxuICAgICAgICAgICAgUHJvbWlzZS5yZWplY3QoXCJhdXRoZW50aWNhdG9uIGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ2F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpXHJcbiAgICAgfTtcclxuXHJcbiAgICAgdmFyIGFycj1yZXEuYm9keS5pZDtcclxuICBcclxuICAgIHZhciByZXR1cm5lZEFydGlzdEFycmF5PVt7fV07XHJcblxyXG4gICAgaWYoYXJyLmxlbmd0aD41MCkge3JldHVybiAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJtYXhpbXVtIDUwIElkcyBvbmx5XCIpfVxyXG5cclxuICAgIGZvcih2YXIgaT0wO2k8YXJyLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICBpZighT2JqZWN0SUQuaXNWYWxpZChhcnJbaV0pKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZChcImludmFsaWQgaWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgYXJ0aXN0LmZpbmRCeUlkKHJlcS5ib2R5LmlkW2ldKS50aGVuKChhcnRpc3RzKT0+XHJcbiAgICB7XHJcbiAgICAgICBpZighYXJ0aXN0cykvL3tyZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJjYW4gbm90IGZpbmQgYXJ0aXN0XCIpO31cclxuICAgICAgIHtcclxuICAgICAgICAgXHJcblxyXG4gICAgICAgfSBcclxuICAgICAgIFxyXG4gICAgICAgcmV0dXJuZWRBcnRpc3RBcnJheVtpXT0gXy5waWNrKGFydGlzdHMsIFsnYXJ0aXN0TmFtZScsICdnZW5yZXMnLCdhYm91dCcsJ3JhdGluZyddKTs7XHJcbiAgICB9KS5jYXRjaCgoZSk9PnJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpKTtcclxuXHJcblxyXG4gICAgfVxyXG5yZXMuc2VuZChyZXR1cm5lZEFydGlzdEFycmF5KTtcclxuXHJcbiAgICAgIH0pLmNhdGNoKChlKT0+e1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZChcImF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKVxyXG4gICAgfSlcclxuXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cz0gcm91dGVyO1xyXG4iXX0=